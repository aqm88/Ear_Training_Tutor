(self.webpackChunkear_training_tutor=self.webpackChunkear_training_tutor||[]).push([[792],{161:(Z,St,je)=>{"use strict";function Se(t,e,n,r,s,i,o){try{var a=t[i](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(r,s)}function q(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var i=t.apply(e,n);function o(c){Se(i,r,s,o,a,"next",c)}function a(c){Se(i,r,s,o,a,"throw",c)}o(void 0)})}}let xe=null,vt=1;const lt=Symbol("SIGNAL");function de(t){const e=xe;return xe=t,e}function Qi(t){if((!Xi(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==vt)){if(!t.producerMustRecompute(t)&&!Uo(t))return t.dirty=!1,void(t.lastCleanEpoch=vt);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=vt}}function Uo(t){li(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Qi(n),r!==n.version))return!0}return!1}function Ls(t,e){if(function Ku(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),li(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Ls(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],s=t.liveConsumerNode[e];li(s),s.producerIndexOfThis[r]=e}}function Xi(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function li(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let B=null;function ze(t){return"function"==typeof t}function di(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ho=di(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function as(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class zn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ze(r))try{r()}catch(i){e=i instanceof Ho?i.errors:[i]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const i of s)try{jw(i)}catch(o){e=e??[],o instanceof Ho?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ho(e)}}add(e){var n;if(e&&e!==this)if(this.closed)jw(e);else{if(e instanceof zn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&as(n,e)}remove(e){const{_finalizers:n}=this;n&&as(n,e),e instanceof zn&&e._removeParent(this)}}zn.EMPTY=(()=>{const t=new zn;return t.closed=!0,t})();const Lw=zn.EMPTY;function Vw(t){return t instanceof zn||t&&"closed"in t&&ze(t.remove)&&ze(t.add)&&ze(t.unsubscribe)}function jw(t){ze(t)?t():t.unsubscribe()}const to={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ju={setTimeout(t,e,...n){const{delegate:r}=Ju;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Ju;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Uw(t){Ju.setTimeout(()=>{const{onUnhandledError:e}=to;if(!e)throw t;e(t)})}function jp(){}const uO=Up("C",void 0,void 0);function Up(t,e,n){return{kind:t,value:e,error:n}}let no=null;function ed(t){if(to.useDeprecatedSynchronousErrorHandling){const e=!no;if(e&&(no={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=no;if(no=null,n)throw r}}else t()}class Bp extends zn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vw(e)&&e.add(this)):this.destination=_O}static create(e,n,r){return new Hp(e,n,r)}next(e){this.isStopped?qp(function hO(t){return Up("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?qp(function dO(t){return Up("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qp(uO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const pO=Function.prototype.bind;function $p(t,e){return pO.call(t,e)}class gO{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){td(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){td(r)}else td(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){td(n)}}}class Hp extends Bp{constructor(e,n,r){let s;if(super(),ze(e)||!e)s={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&to.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&$p(e.next,i),error:e.error&&$p(e.error,i),complete:e.complete&&$p(e.complete,i)}):s=e}this.destination=new gO(s)}}function td(t){to.useDeprecatedSynchronousErrorHandling?function fO(t){to.useDeprecatedSynchronousErrorHandling&&no&&(no.errorThrown=!0,no.error=t)}(t):Uw(t)}function qp(t,e){const{onStoppedNotification:n}=to;n&&Ju.setTimeout(()=>n(t,e))}const _O={closed:!0,next:jp,error:function mO(t){throw t},complete:jp},zp="function"==typeof Symbol&&Symbol.observable||"@@observable";function ro(t){return t}function Bw(t){return 0===t.length?ro:1===t.length?t[0]:function(n){return t.reduce((r,s)=>s(r),n)}}let cn=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,s){const i=function wO(t){return t&&t instanceof Bp||function yO(t){return t&&ze(t.next)&&ze(t.error)&&ze(t.complete)}(t)&&Vw(t)}(n)?n:new Hp(n,r,s);return ed(()=>{const{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=$w(r))((s,i)=>{const o=new Hp({next:a=>{try{n(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[zp](){return this}pipe(...n){return Bw(n)(this)}toPromise(n){return new(n=$w(n))((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return t.create=e=>new t(e),t})();function $w(t){var e;return null!==(e=t??to.Promise)&&void 0!==e?e:Promise}const bO=di(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yr=(()=>{class t extends cn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Hw(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new bO}next(n){ed(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ed(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ed(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:s,observers:i}=this;return r||s?Lw:(this.currentObservers=null,i.push(n),new zn(()=>{this.currentObservers=null,as(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){const n=new cn;return n.source=this,n}}return t.create=(e,n)=>new Hw(e,n),t})();class Hw extends yr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Lw}}class Gn extends yr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function qw(t){return ze(t?.lift)}function fn(t){return e=>{if(qw(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yt(t,e,n,r,s){return new CO(t,e,n,r,s)}class CO extends Bp{constructor(e,n,r,s,i,o){super(e),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=s?function(a){try{s(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Je(t,e){return fn((n,r)=>{let s=0;n.subscribe(Yt(r,i=>{r.next(t.call(e,i,s++))}))})}class O extends Error{constructor(e,n){super(function qo(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Vs(t){return{toString:t}.toString()}const Go="__parameters__";function Yo(t,e,n){return Vs(()=>{const r=function Gp(t){return function(...n){if(t){const r=t(...n);for(const s in r)this[s]=r[s]}}}(e);function s(...i){if(this instanceof s)return r.apply(this,i),this;const o=new s(...i);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(Go)?c[Go]:Object.defineProperty(c,Go,{value:[]})[Go];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}const Xe=globalThis;function et(t){for(let e in t)if(t[e]===et)return e;throw Error("Could not find renamed property on target object.")}function DO(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Zt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Zt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Wp(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const SO=et({__forward_ref__:et});function ut(t){return t.__forward_ref__=ut,t.toString=function(){return Zt(this())},t}function le(t){return rd(t)?t():t}function rd(t){return"function"==typeof t&&t.hasOwnProperty(SO)&&t.__forward_ref__===ut}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function cs(t){return{providers:t.providers||[],imports:t.imports||[]}}function sd(t){return Zw(t,od)||Zw(t,Qw)}function Zw(t,e){return t.hasOwnProperty(e)?t[e]:null}function id(t){return t&&(t.hasOwnProperty(Yp)||t.hasOwnProperty(AO))?t[Yp]:null}const od=et({\u0275prov:et}),Yp=et({\u0275inj:et}),Qw=et({ngInjectableDef:et}),AO=et({ngInjectorDef:et});class G{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Jp(t){return t&&!!t.\u0275providers}const Lc=et({\u0275cmp:et}),eg=et({\u0275dir:et}),tg=et({\u0275pipe:et}),Kw=et({\u0275mod:et}),js=et({\u0275fac:et}),Vc=et({__NG_ELEMENT_ID__:et}),Jw=et({__NG_ENV_ID__:et});function Ce(t){return"string"==typeof t?t:null==t?"":String(t)}function ng(t,e){throw new O(-201,!1)}var Pe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Pe||{});let rg;function eb(){return rg}function Wn(t){const e=rg;return rg=t,e}function tb(t,e,n){const r=sd(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Pe.Optional?null:void 0!==e?e:void ng()}const jc={},sg="__NG_DI_FLAG__",ad="ngTempTokenPath",FO=/\n/gm,nb="__source";let Zo;function fi(t){const e=Zo;return Zo=t,e}function jO(t,e=Pe.Default){if(void 0===Zo)throw new O(-203,!1);return null===Zo?tb(t,void 0,e):Zo.get(t,e&Pe.Optional?null:void 0,e)}function he(t,e=Pe.Default){return(eb()||jO)(le(t),e)}function V(t,e=Pe.Default){return he(t,cd(e))}function cd(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ig(t){const e=[];for(let n=0;n<t.length;n++){const r=le(t[n]);if(Array.isArray(r)){if(0===r.length)throw new O(900,!1);let s,i=Pe.Default;for(let o=0;o<r.length;o++){const a=r[o],c=UO(a);"number"==typeof c?-1===c?s=a.token:i|=c:s=a}e.push(he(s,i))}else e.push(he(r))}return e}function Uc(t,e){return t[sg]=e,t.prototype[sg]=e,t}function UO(t){return t[sg]}const ld=Uc(Yo("Optional"),8),ud=Uc(Yo("SkipSelf"),4);function so(t,e){return t.hasOwnProperty(js)?t[js]:null}function Qo(t,e){t.forEach(n=>Array.isArray(n)?Qo(n,e):e(n))}function sb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ar(t,e,n){let r=Xo(t,e);return r>=0?t[1|r]=n:(r=~r,function ib(t,e,n,r){let s=t.length;if(s==e)t.push(n,r);else if(1===s)t.push(r,t[0]),t[0]=n;else{for(s--,t.push(t[s-1],t[s]);s>e;)t[s]=t[s-2],s--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ag(t,e){const n=Xo(t,e);if(n>=0)return t[1|n]}function Xo(t,e){return function ob(t,e,n){let r=0,s=t.length>>n;for(;s!==r;){const i=r+(s-r>>1),o=t[i<<n];if(e===o)return i<<n;o>e?s=i:r=i+1}return~(s<<n)}(t,e,1)}const ls={},He=[],io=new G(""),ab=new G("",-1),cg=new G("");class fd{get(e,n=jc){if(n===jc){const r=new Error(`NullInjectorError: No provider for ${Zt(e)}!`);throw r.name="NullInjectorError",r}return n}}var pd=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(pd||{}),Lr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lr||{}),yt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(yt||{});function WO(t,e,n){let r=t.length;for(;;){const s=t.indexOf(e,n);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const i=e.length;if(s+i===r||t.charCodeAt(s+i)<=32)return s}n=s+1}}function lg(t,e,n){let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const i=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,i)}else{const i=s,o=n[++r];lb(i)?t.setProperty(e,i,o):t.setAttribute(e,i,o),r++}}return r}function cb(t){return 3===t||4===t||6===t}function lb(t){return 64===t.charCodeAt(0)}function Bc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?n=s:0===n||ub(t,n,s,null,-1===n||2===n?e[++r]:null)}}return t}function ub(t,e,n,r,s){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==s&&(t[i+1]=s));if(r===t[i+1])return void(t[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==s&&t.splice(i++,0,s)}const db="ng-template";function YO(t,e,n,r){let s=0;if(r){for(;s<e.length&&"string"==typeof e[s];s+=2)if("class"===e[s]&&-1!==WO(e[s+1].toLowerCase(),n,0))return!0}else if(ug(t))return!1;if(s=e.indexOf(1,s),s>-1){let i;for(;++s<e.length&&"string"==typeof(i=e[s]);)if(i.toLowerCase()===n)return!0}return!1}function ug(t){return 4===t.type&&t.value!==db}function ZO(t,e,n){return e===(4!==t.type||n?t.value:db)}function QO(t,e,n){let r=4;const s=t.attrs,i=null!==s?function JO(t){for(let e=0;e<t.length;e++)if(cb(t[e]))return e;return t.length}(s):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!ZO(t,c,n)||""===c&&1===e.length){if(Vr(r))return!1;o=!0}}else if(8&r){if(null===s||!YO(t,s,c,n)){if(Vr(r))return!1;o=!0}}else{const l=e[++a],u=XO(c,s,ug(t),n);if(-1===u){if(Vr(r))return!1;o=!0;continue}if(""!==l){let d;if(d=u>i?"":s[u+1].toLowerCase(),2&r&&l!==d){if(Vr(r))return!1;o=!0}}}}else{if(!o&&!Vr(r)&&!Vr(c))return!1;if(o&&Vr(c))continue;o=!1,r=c|1&r}}return Vr(r)||o}function Vr(t){return!(1&t)}function XO(t,e,n,r){if(null===e)return-1;let s=0;if(r||!n){let i=!1;for(;s<e.length;){const o=e[s];if(o===t)return s;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=i?1:2}return-1}return function ek(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function hb(t,e,n=!1){for(let r=0;r<e.length;r++)if(QO(t,e[r],n))return!0;return!1}function fb(t,e){return t?":not("+e.trim()+")":e}function nk(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""!==s&&!Vr(o)&&(e+=fb(i,s),s=""),r=o,i=i||!Vr(r);n++}return""!==s&&(e+=fb(i,s)),e}function Us(t){return Vs(()=>{const e=gb(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lr.Emulated,styles:t.styles||He,_:null,schemas:t.schemas||null,tView:null,id:""};mb(n);const r=t.dependencies;return n.directiveDefs=gd(r,!1),n.pipeDefs=gd(r,!0),n.id=function ck(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const s of n)e=Math.imul(31,e)+s.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function ik(t){return ke(t)||Qt(t)}function ok(t){return null!==t}function Bs(t){return Vs(()=>({type:t.type,bootstrap:t.bootstrap||He,declarations:t.declarations||He,imports:t.imports||He,exports:t.exports||He,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function pb(t,e){if(null==t)return ls;const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r];let i,o,a=yt.None;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i):(i=s,o=s),e?(n[i]=a!==yt.None?[r,a]:r,e[i]=o):n[i]=r}return n}function _e(t){return Vs(()=>{const e=gb(t);return mb(e),e})}function Zn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function ke(t){return t[Lc]||null}function Qt(t){return t[eg]||null}function pn(t){return t[tg]||null}function vn(t,e){const n=t[Kw]||null;if(!n&&!0===e)throw new Error(`Type ${Zt(t)} does not have '\u0275mod' property.`);return n}function gb(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ls,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||He,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pb(t.inputs,e),outputs:pb(t.outputs),debugInfo:null}}function mb(t){t.features?.forEach(e=>e(t))}function gd(t,e){if(!t)return null;const n=e?pn:ik;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(ok)}function lk(...t){return{\u0275providers:dg(0,t),\u0275fromNgModule:!0}}function dg(t,...e){const n=[],r=new Set;let s;const i=o=>{n.push(o)};return Qo(e,o=>{const a=o;_d(a,i,[],r)&&(s||=[],s.push(a))}),void 0!==s&&_b(s,i),n}function _b(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:s}=t[n];hg(s,i=>{e(i,r)})}}function _d(t,e,n,r){if(!(t=le(t)))return!1;let s=null,i=id(t);const o=!i&&ke(t);if(i||o){if(o&&!o.standalone)return!1;s=t}else{const c=t.ngModule;if(i=id(c),!i)return!1;s=c}const a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)_d(l,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(s);try{Qo(i.imports,u=>{_d(u,e,n,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&_b(l,e)}if(!a){const l=so(s)||(()=>new s);e({provide:s,useFactory:l,deps:He},s),e({provide:cg,useValue:s,multi:!0},s),e({provide:io,useValue:()=>he(s),multi:!0},s)}const c=i.providers;if(null!=c&&!a){const l=t;hg(c,u=>{e(u,l)})}}}return s!==t&&void 0!==t.providers}function hg(t,e){for(let n of t)Jp(n)&&(n=n.\u0275providers),Array.isArray(n)?hg(n,e):e(n)}const uk=et({provide:String,useValue:et});function fg(t){return null!==t&&"object"==typeof t&&uk in t}function oo(t){return"function"==typeof t}const pg=new G(""),vd={},hk={};let gg;function yd(){return void 0===gg&&(gg=new fd),gg}class Qn{}class Ko extends Qn{get destroyed(){return this._destroyed}constructor(e,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(e,o=>this.processProvider(o)),this.records.set(ab,Jo(void 0,this)),s.has("environment")&&this.records.set(Qn,Jo(void 0,this));const i=this.records.get(pg);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(cg,He,Pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=de(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),de(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=fi(this),r=Wn(void 0);try{return e()}finally{fi(n),Wn(r)}}get(e,n=jc,r=Pe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Jw))return e[Jw](this);r=cd(r);const i=fi(this),o=Wn(void 0);try{if(!(r&Pe.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function _k(t){return"function"==typeof t||"object"==typeof t&&t instanceof G}(e)&&sd(e);c=l&&this.injectableDefInScope(l)?Jo(mg(e),vd):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Pe.Self?yd():this.parent).get(e,n=r&Pe.Optional&&n===jc?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ad]=a[ad]||[]).unshift(Zt(e)),i)throw a;return function BO(t,e,n,r){const s=t[ad];throw e[nb]&&s.unshift(e[nb]),t.message=function $O(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let s=Zt(e);if(Array.isArray(e))s=e.map(Zt).join(" -> ");else if("object"==typeof e){let i=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):Zt(a)))}s=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${t.replace(FO,"\n  ")}`}("\n"+t.message,s,n,r),t.ngTokenPath=s,t[ad]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Wn(o),fi(i)}}resolveInjectorInitializers(){const e=de(null),n=fi(this),r=Wn(void 0);try{const i=this.get(io,He,Pe.Self);for(const o of i)o()}finally{fi(n),Wn(r),de(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Zt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){let n=oo(e=le(e))?e:le(e&&e.provide);const r=function pk(t){return fg(t)?Jo(void 0,t.useValue):Jo(wb(t),vd)}(e);if(!oo(e)&&!0===e.multi){let s=this.records.get(n);s||(s=Jo(void 0,vd,!0),s.factory=()=>ig(s.multi),this.records.set(n,s)),n=e,s.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=de(null);try{return n.value===vd&&(n.value=hk,n.value=n.factory()),"object"==typeof n.value&&n.value&&function mk(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{de(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=le(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function mg(t){const e=sd(t),n=null!==e?e.factory:so(t);if(null!==n)return n;if(t instanceof G)throw new O(204,!1);if(t instanceof Function)return function fk(t){if(t.length>0)throw new O(204,!1);const n=function IO(t){return t&&(t[od]||t[Qw])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new O(204,!1)}function wb(t,e,n){let r;if(oo(t)){const s=le(t);return so(s)||mg(s)}if(fg(t))r=()=>le(t.useValue);else if(function yb(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...ig(t.deps||[]));else if(function vb(t){return!(!t||!t.useExisting)}(t))r=()=>he(le(t.useExisting));else{const s=le(t&&(t.useClass||t.provide));if(!function gk(t){return!!t.deps}(t))return so(s)||mg(s);r=()=>new s(...ig(t.deps))}return r}function Jo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _g(t,e){for(const n of t)Array.isArray(n)?_g(n,e):n&&Jp(n)?_g(n.\u0275providers,e):e(n)}function $s(t,e){t instanceof Ko&&t.assertNotDestroyed();const r=fi(t),s=Wn(void 0);try{return e()}finally{fi(r),Wn(s)}}function bb(){return void 0!==eb()||null!=function VO(){return Zo}()}const bt=0,j=1,re=2,Lt=3,jr=4,yn=5,cr=6,ta=7,dt=8,Ht=9,Ur=10,fe=11,Hc=12,Db=13,na=14,Tt=15,qc=16,ra=17,Hs=18,zc=19,Sb=20,gi=21,Cd=22,ao=23,De=25,yg=1,us=7,sa=9,Vt=10;var wg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(wg||{});function wn(t){return Array.isArray(t)&&"object"==typeof t[yg]}function bn(t){return Array.isArray(t)&&!0===t[yg]}function bg(t){return!!(4&t.flags)}function co(t){return t.componentOffset>-1}function Sd(t){return!(1&~t.flags)}function Br(t){return!!t.template}function Cg(t){return!!(512&t[re])}class Ak{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function xb(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function wr(){return Ib}function Ib(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ok),Nk}function Nk(){const t=Nb(this),e=t?.current;if(e){const n=t.previous;if(n===ls)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ok(t,e,n,r,s){const i=this.declaredInputs[r],o=Nb(t)||function kk(t,e){return t[Ab]=e}(t,{previous:ls,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[i];a[i]=new Ak(l&&l.currentValue,n,c===ls),xb(t,e,s,n)}wr.ngInherit=!0;const Ab="__ngSimpleChanges__";function Nb(t){return t[Ab]||null}const ds=function(t,e,n){};let Rb=!1;function st(t){for(;Array.isArray(t);)t=t[bt];return t}function Wc(t,e){return st(e[t])}function On(t,e){return st(e[t.index])}function Yc(t,e){return t.data[e]}function lr(t,e){const n=e[t];return wn(n)?n:n[bt]}function Mg(t){return!(128&~t[re])}function hs(t,e){return null==e?null:t[e]}function Pb(t){t[ra]=0}function jk(t){1024&t[re]||(t[re]|=1024,Mg(t)&&Zc(t))}function xg(t){return!!(9216&t[re]||t[ao]?.dirty)}function Ig(t){t[Ur].changeDetectionScheduler?.notify(1),xg(t)?Zc(t):64&t[re]&&(function Pk(){return Rb}()?(t[re]|=1024,Zc(t)):t[Ur].changeDetectionScheduler?.notify())}function Zc(t){t[Ur].changeDetectionScheduler?.notify();let e=lo(t);for(;null!==e&&!(8192&e[re])&&(e[re]|=8192,Mg(e));)e=lo(e)}function Td(t,e){if(!(256&~t[re]))throw new O(911,!1);null===t[gi]&&(t[gi]=[]),t[gi].push(e)}function lo(t){const e=t[Lt];return bn(e)?e[Lt]:e}const pe={lFrame:zb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Vb(){return pe.bindingsEnabled}function M(){return pe.lFrame.lView}function Fe(){return pe.lFrame.tView}function Le(t){return pe.lFrame.contextLView=t,t[dt]}function Ve(t){return pe.lFrame.contextLView=null,t}function tt(){let t=jb();for(;null!==t&&64===t.type;)t=t.parent;return t}function jb(){return pe.lFrame.currentTNode}function fs(t,e){const n=pe.lFrame;n.currentTNode=t,n.isParent=e}function Ng(){return pe.lFrame.isParent}function qs(){return pe.lFrame.bindingIndex}function $r(){return pe.lFrame.bindingIndex++}function zs(t){const e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Qk(t,e){const n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,kg(e)}function kg(t){pe.lFrame.currentDirectiveIndex=t}function Pg(){return pe.lFrame.currentQueryIndex}function Ed(t){pe.lFrame.currentQueryIndex=t}function Kk(t){const e=t[j];return 2===e.type?e.declTNode:1===e.type?t[yn]:null}function Hb(t,e,n){if(n&Pe.SkipSelf){let s=e,i=t;for(;!(s=s.parent,null!==s||n&Pe.Host||(s=Kk(i),null===s||(i=i[na],10&s.type))););if(null===s)return!1;e=s,t=i}const r=pe.lFrame=qb();return r.currentTNode=e,r.lView=t,!0}function Fg(t){const e=qb(),n=t[j];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function qb(){const t=pe.lFrame,e=null===t?null:t.child;return null===e?zb(t):e}function zb(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Gb(){const t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Wb=Gb;function Lg(){const t=Gb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Cn(){return pe.lFrame.selectedIndex}function uo(t){pe.lFrame.selectedIndex=t}function ht(){const t=pe.lFrame;return Yc(t.tView,t.selectedIndex)}let Zb=!0;function Xc(){return Zb}function ps(t){Zb=t}function Md(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function xd(t,e,n){Qb(t,e,3,n)}function Id(t,e,n,r){(3&t[re])===n&&Qb(t,e,n,r)}function Vg(t,e){let n=t[re];(3&n)===e&&(n&=16383,n+=1,t[re]=n)}function Qb(t,e,n,r){const i=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&t[ra]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[ra]+=65536),(a<i||-1==i)&&(iR(t,n,e,c),t[ra]=(4294901760&t[ra])+c+2),c++}function Xb(t,e){ds(4,t,e);const n=de(null);try{e.call(t)}finally{de(n),ds(5,t,e)}}function iR(t,e,n,r){const s=n[r]<0,i=n[r+1],a=t[s?-n[r]:n[r]];s?t[re]>>14<t[ra]>>16&&(3&t[re])===e&&(t[re]+=16384,Xb(a,i)):Xb(a,i)}const aa=-1;class Kc{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ug(t){return t!==aa}function Jc(t){return 32767&t}function el(t,e){let n=function uR(t){return t>>16}(t),r=e;for(;n>0;)r=r[na],n--;return r}let Bg=!0;function Ad(t){const e=Bg;return Bg=t,e}const Kb=255,Jb=5;let dR=0;const gs={};function Nd(t,e){const n=eC(t,e);if(-1!==n)return n;const r=e[j];r.firstCreatePass&&(t.injectorIndex=e.length,$g(r.data,t),$g(e,null),$g(r.blueprint,null));const s=Od(t,e),i=t.injectorIndex;if(Ug(s)){const o=Jc(s),a=el(s,e),c=a[j].data;for(let l=0;l<8;l++)e[i+l]=a[o+l]|c[o+l]}return e[i+8]=s,i}function $g(t,e){t.push(0,0,0,0,0,0,0,0,e)}function eC(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Od(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,s=e;for(;null!==s;){if(r=aC(s),null===r)return aa;if(n++,s=s[na],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return aa}function Hg(t,e,n){!function hR(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vc)&&(r=n[Vc]),null==r&&(r=n[Vc]=dR++);const s=r&Kb;e.data[t+(s>>Jb)]|=1<<s}(t,e,n)}function tC(t,e,n){if(n&Pe.Optional||void 0!==t)return t;ng()}function nC(t,e,n,r){if(n&Pe.Optional&&void 0===r&&(r=null),!(n&(Pe.Self|Pe.Host))){const s=t[Ht],i=Wn(void 0);try{return s?s.get(e,r,n&Pe.Optional):tb(e,r,n&Pe.Optional)}finally{Wn(i)}}return tC(r,0,n)}function rC(t,e,n,r=Pe.Default,s){if(null!==t){if(2048&e[re]&&!(r&Pe.Self)){const o=function _R(t,e,n,r,s){let i=t,o=e;for(;null!==i&&null!==o&&2048&o[re]&&!(512&o[re]);){const a=sC(i,o,n,r|Pe.Self,gs);if(a!==gs)return a;let c=i.parent;if(!c){const l=o[Sb];if(l){const u=l.get(n,gs,r);if(u!==gs)return u}c=aC(o),o=o[na]}i=c}return s}(t,e,n,r,gs);if(o!==gs)return o}const i=sC(t,e,n,r,gs);if(i!==gs)return i}return nC(e,n,r,s)}function sC(t,e,n,r,s){const i=function gR(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Vc)?t[Vc]:void 0;return"number"==typeof e?e>=0?e&Kb:mR:e}(n);if("function"==typeof i){if(!Hb(e,t,r))return r&Pe.Host?tC(s,0,r):nC(e,n,r,s);try{let o;if(o=i(r),null!=o||r&Pe.Optional)return o;ng()}finally{Wb()}}else if("number"==typeof i){let o=null,a=eC(t,e),c=aa,l=r&Pe.Host?e[Tt][yn]:null;for((-1===a||r&Pe.SkipSelf)&&(c=-1===a?Od(t,e):e[a+8],c!==aa&&oC(r,!1)?(o=e[j],a=Jc(c),e=el(c,e)):a=-1);-1!==a;){const u=e[j];if(iC(i,a,u.data)){const d=pR(a,e,n,o,r,l);if(d!==gs)return d}c=e[a+8],c!==aa&&oC(r,e[j].data[a+8]===l)&&iC(i,a,e)?(o=u,a=Jc(c),e=el(c,e)):a=-1}}return s}function pR(t,e,n,r,s,i){const o=e[j],a=o.data[t+8],u=kd(a,o,n,null==r?co(a)&&Bg:r!=o&&!!(3&a.type),s&Pe.Host&&i===a);return null!==u?ho(e,o,u,a):gs}function kd(t,e,n,r,s){const i=t.providerIndexes,o=e.data,a=1048575&i,c=t.directiveStart,u=i>>20,h=s?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=o[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(s){const f=o[c];if(f&&Br(f)&&f.type===n)return c}return null}function ho(t,e,n,r){let s=t[n];const i=e.data;if(function oR(t){return t instanceof Kc}(s)){const o=s;o.resolving&&function kO(t,e){throw e&&e.join(" > "),new O(-200,t)}(function Ge(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ce(t)}(i[n]));const a=Ad(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Wn(o.injectImpl):null;Hb(t,r,Pe.Default);try{s=t[n]=o.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function sR(t,e,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const o=Ib(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}s&&(n.preOrderHooks??=[]).push(0-t,s),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}(n,i[n],e)}finally{null!==l&&Wn(l),Ad(a),o.resolving=!1,Wb()}}return s}function iC(t,e,n){return!!(n[e+(t>>Jb)]&1<<t)}function oC(t,e){return!(t&Pe.Self||t&Pe.Host&&e)}class Kt{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return rC(this._tNode,this._lView,e,cd(r),n)}}function mR(){return new Kt(tt(),M())}function ln(t){return Vs(()=>{const e=t.prototype.constructor,n=e[js]||qg(e),r=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==r;){const i=s[js]||qg(s);if(i&&i!==n)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function qg(t){return rd(t)?()=>{const e=qg(le(t));return e&&e()}:so(t)}function aC(t){const e=t[j],n=e.type;return 2===n?e.declTNode:1===n?t[yn]:null}function hC(t,e=null,n=null,r){const s=fC(t,e,n,r);return s.resolveInjectorInitializers(),s}function fC(t,e=null,n=null,r,s=new Set){const i=[n||He,lk(t)];return r=r||("object"==typeof t?void 0:Zt(t)),new Ko(i,e||yd(),r||null,s)}let Rn=(()=>{class t{static{this.THROW_IF_NOT_FOUND=jc}static{this.NULL=new fd}static create(n,r){if(Array.isArray(n))return hC({name:""},r,n,"");{const s=n.name??"";return hC({name:s},n.parent,n.providers,s)}}static{this.\u0275prov=ne({token:t,providedIn:"any",factory:()=>he(ab)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function Gg(t){return t.ngOriginalError}class ms{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Gg(e);for(;n&&Gg(n);)n=Gg(n);return n||null}}const gC=new G("",{providedIn:"root",factory:()=>V(ms).handleError.bind(void 0)});let ua=(()=>{class t{static{this.__NG_ELEMENT_ID__=ER}static{this.__NG_ENV_ID__=n=>n}}return t})();class TR extends ua{constructor(e){super(),this._lView=e}onDestroy(e){return Td(this._lView,e),()=>function Ag(t,e){if(null===t[gi])return;const n=t[gi].indexOf(e);-1!==n&&t[gi].splice(n,1)}(this._lView,e)}}function ER(){return new TR(M())}function MR(){return da(tt(),M())}function da(t,e){return new ur(On(t,e))}let ur=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=MR}}return t})();function _C(t){return t instanceof ur?t.nativeElement:t}function Wg(t){return e=>{setTimeout(t,void 0,e)}}const Nt=class xR extends yr{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,bb()&&(this.destroyRef=V(ua,{optional:!0})??void 0)}emit(e){const n=de(null);try{super.next(e)}finally{de(n)}}subscribe(e,n,r){let s=e,i=n||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;s=c.next?.bind(c),i=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(i=Wg(i),s&&(s=Wg(s)),o&&(o=Wg(o)));const a=super.subscribe({next:s,error:i,complete:o});return e instanceof zn&&e.add(a),a}};function IR(){return this._results[Symbol.iterator]()}class Yg{get changes(){return this._changes??=new Nt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const n=Yg.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=IR)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function Yn(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function GO(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],i=e[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Pd(t){return!(128&~t.flags)}const Zg=new Map;let NR=0;const Xg="__ngContext__";function Dn(t,e){wn(e)?(t[Xg]=e[zc],function kR(t){Zg.set(t[zc],t)}(e)):t[Xg]=e}function MC(t){return IC(t[Hc])}function xC(t){return IC(t[jr])}function IC(t){for(;null!==t&&!bn(t);)t=t[jr];return t}let Kg;const Vd=new G("",{providedIn:"root",factory:()=>XR}),XR="ng",LC=new G(""),fo=new G("",{providedIn:"platform",factory:()=>"unknown"}),VC=new G("",{providedIn:"root",factory:()=>function mi(){if(void 0!==Kg)return Kg;if(typeof document<"u")return document;throw new O(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let jC=()=>null;function om(t,e,n=!1){return jC(t,e,n)}const qC=new G("",{providedIn:"root",factory:()=>!1});class ZC{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function _i(t){return t instanceof ZC?t.changingThisBreaksApplicationSecurity:t}function dr(t){return t instanceof Function?t():t}var vi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(vi||{});let ym;function wm(t,e){return ym(t,e)}function _a(t,e,n,r,s){if(null!=r){let i,o=!1;bn(r)?i=r:wn(r)&&(o=!0,r=r[bt]);const a=st(r);0===t&&null!==n?null==s?vD(e,n,a):po(e,n,a,s||null,!0):1===t&&null!==n?po(e,n,a,s||null,!0):2===t?function fl(t,e,n){const r=Kd(t,e);r&&function rF(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=i&&function oF(t,e,n,r,s){const i=n[us];i!==st(n)&&_a(e,t,r,i,s);for(let a=Vt;a<n.length;a++){const c=n[a];eh(c[j],c,t,e,r,i)}}(e,t,i,n,s)}}function Qd(t,e,n){return t.createElement(e,n)}function gD(t,e){e[Ur].changeDetectionScheduler?.notify(1),eh(t,e,e[fe],2,null,null)}function mD(t,e){const n=t[sa],r=n.indexOf(e);n.splice(r,1)}function dl(t,e){if(t.length<=Vt)return;const n=Vt+e,r=t[n];if(r){const s=r[qc];null!==s&&s!==t&&mD(s,r),e>0&&(t[n-1][jr]=r[jr]);const i=dd(t,Vt+e);!function QP(t,e){gD(t,e),e[bt]=null,e[yn]=null}(r[j],r);const o=i[Hs];null!==o&&o.detachView(i[j]),r[Lt]=null,r[jr]=null,r[re]&=-129}return r}function Xd(t,e){if(!(256&e[re])){const n=e[fe];n.destroyNode&&eh(t,e,n,3,null,null),function KP(t){let e=t[Hc];if(!e)return Dm(t[j],t);for(;e;){let n=null;if(wn(e))n=e[Hc];else{const r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[jr]&&e!==t;)wn(e)&&Dm(e[j],e),e=e[Lt];null===e&&(e=t),wn(e)&&Dm(e[j],e),n=e&&e[jr]}e=n}}(e)}}function Dm(t,e){if(256&e[re])return;const n=de(null);try{e[re]&=-129,e[re]|=256,e[ao]&&function Qu(t){if(li(t),Xi(t))for(let e=0;e<t.producerNode.length;e++)Ls(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[ao]),function nF(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const s=e[n[r]];if(!(s instanceof Kc)){const i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=s[i[o]],c=i[o+1];ds(4,a,c);try{c.call(a)}finally{ds(5,a,c)}}else{ds(4,s,i);try{i.call(s)}finally{ds(5,s,i)}}}}}(t,e),function tF(t,e){const n=t.cleanup,r=e[ta];if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const o=n[i+3];o>=0?r[o]():r[-o].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);null!==r&&(e[ta]=null);const s=e[gi];if(null!==s){e[gi]=null;for(let i=0;i<s.length;i++)(0,s[i])()}}(t,e),1===e[j].type&&e[fe].destroy();const r=e[qc];if(null!==r&&bn(e[Lt])){r!==e[Lt]&&mD(r,e);const s=e[Hs];null!==s&&s.detachView(t)}!function RR(t){Zg.delete(t[zc])}(e)}finally{de(n)}}function Sm(t,e,n){return function _D(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[bt];{const{componentOffset:s}=r;if(s>-1){const{encapsulation:i}=t.data[r.directiveStart+s];if(i===Lr.None||i===Lr.Emulated)return null}return On(r,n)}}(t,e.parent,n)}function po(t,e,n,r,s){t.insertBefore(e,n,r,s)}function vD(t,e,n){t.appendChild(e,n)}function yD(t,e,n,r,s){null!==r?po(t,e,n,r,s):vD(t,e,n)}function Kd(t,e){return t.parentNode(e)}let Tm,CD=function bD(t,e,n){return 40&t.type?On(t,n):null};function Jd(t,e,n,r){const s=Sm(t,r,e),i=e[fe],a=function wD(t,e,n){return CD(t,e,n)}(r.parent||e[yn],r,e);if(null!=s)if(Array.isArray(n))for(let c=0;c<n.length;c++)yD(i,s,n[c],a,!1);else yD(i,s,n,a,!1);void 0!==Tm&&Tm(i,r,e,n,s)}function hl(t,e){if(null!==e){const n=e.type;if(3&n)return On(e,t);if(4&n)return Em(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return hl(t,r);{const s=t[e.index];return bn(s)?Em(-1,s):st(s)}}if(32&n)return wm(e,t)()||st(t[e.index]);{const r=SD(t,e);return null!==r?Array.isArray(r)?r[0]:hl(lo(t[Tt]),r):hl(t,e.next)}}return null}function SD(t,e){return null!==e?t[Tt][yn].projection[e.projection]:null}function Em(t,e){const n=Vt+t+1;if(n<e.length){const r=e[n],s=r[j].firstChild;if(null!==s)return hl(r,s)}return e[us]}function Mm(t,e,n,r,s,i,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===e&&(a&&Dn(st(a),r),n.flags|=2),32&~n.flags)if(8&c)Mm(t,e,n.child,r,s,i,!1),_a(e,t,s,a,i);else if(32&c){const l=wm(n,r);let u;for(;u=l();)_a(e,t,s,u,i);_a(e,t,s,a,i)}else 16&c?ED(t,e,r,n,s,i):_a(e,t,s,a,i);n=o?n.projectionNext:n.next}}function eh(t,e,n,r,s,i){Mm(n,r,t.firstChild,e,s,i,!1)}function ED(t,e,n,r,s,i){const o=n[Tt],c=o[yn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)_a(e,t,s,c[l],i);else{let l=c;const u=o[Lt];Pd(r)&&(l.flags|=128),Mm(t,e,l,u,s,i,!0)}}function MD(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function xD(t,e,n){const{mergedAttrs:r,classes:s,styles:i}=n;null!==r&&lg(t,e,r),null!==s&&MD(t,e,s),null!==i&&function cF(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}const Te={};function P(t=1){ID(Fe(),M(),Cn()+t,!1)}function ID(t,e,n,r){if(!r)if(3&~e[re]){const i=t.preOrderHooks;null!==i&&Id(e,i,0,n)}else{const i=t.preOrderCheckHooks;null!==i&&xd(e,i,n)}uo(n)}function k(t,e=Pe.Default){const n=M();return null===n?he(t,e):rC(tt(),n,le(t),e)}function ND(t,e,n,r,s,i){const o=de(null);try{let a=null;s&yt.SignalBased&&(a=e[r][lt]),null!==a&&void 0!==a.transformFn&&(i=a.transformFn(i)),s&yt.HasDecoratorInputTransform&&(i=t.inputTransforms[r].call(e,i)),null!==t.setInput?t.setInput(e,a,i,n,r):xb(e,a,r,i)}finally{de(o)}}function th(t,e,n,r,s,i,o,a,c,l,u){const d=e.blueprint.slice();return d[bt]=s,d[re]=204|r,(null!==l||t&&2048&t[re])&&(d[re]|=2048),Pb(d),d[Lt]=d[na]=t,d[dt]=n,d[Ur]=o||t&&t[Ur],d[fe]=a||t&&t[fe],d[Ht]=c||t&&t[Ht]||null,d[yn]=i,d[zc]=function OR(){return NR++}(),d[cr]=u,d[Sb]=l,d[Tt]=2==e.type?t[Tt]:d,d}function va(t,e,n,r,s){let i=t.data[e];if(null===i)i=function xm(t,e,n,r,s){const i=jb(),o=Ng(),c=t.data[e]=function mF(t,e,n,r,s,i){let o=e?e.injectorIndex:-1,a=0;return function oa(){return null!==pe.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,e,r,s);return null===t.firstChild&&(t.firstChild=c),null!==i&&(o?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(t,e,n,r,s),function Zk(){return pe.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const o=function Qc(){const t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return fs(i,!0),i}function pl(t,e,n,r){if(0===n)return-1;const s=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return s}function OD(t,e,n,r,s){const i=Cn(),o=2&r;try{uo(-1),o&&e.length>De&&ID(t,e,De,!1),ds(o?2:0,s),n(r,s)}finally{uo(i),ds(o?3:1,s)}}function Im(t,e,n){if(bg(e)){const r=de(null);try{const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{de(r)}}}function Am(t,e,n){Vb()&&(function DF(t,e,n,r){const s=n.directiveStart,i=n.directiveEnd;co(n)&&function AF(t,e,n){const r=On(e,t),s=kD(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=nh(t,th(t,s,null,o,r,e,null,t[Ur].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[s+n.componentOffset]),t.firstCreatePass||Nd(n,e),Dn(r,e);const o=n.initialInputs;for(let a=s;a<i;a++){const c=t.data[a],l=ho(e,t,a,n);Dn(l,e),null!==o&&NF(0,a-s,l,c,0,o),Br(c)&&(lr(n.index,e)[dt]=ho(e,t,a,n))}}(t,e,n,On(n,e)),!(64&~n.flags)&&VD(t,e,n))}function Nm(t,e,n=On){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(e,t):t[o];t[s++]=a}}}function kD(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Om(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Om(t,e,n,r,s,i,o,a,c,l,u){const d=De+r,h=d+s,f=function uF(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Te);return n}(d,h),p="function"==typeof l?l():l;return f[j]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let RD=()=>null;function PD(t,e,n,r,s){for(let i in e){if(!e.hasOwnProperty(i))continue;const o=e[i];if(void 0===o)continue;r??={};let a,c=yt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=i;if(null!==s){if(!s.hasOwnProperty(i))continue;l=s[i]}0===t?FD(r,n,l,a,c):FD(r,n,l,a)}return r}function FD(t,e,n,r,s){let i;t.hasOwnProperty(n)?(i=t[n]).push(e,r):i=t[n]=[e,r],void 0!==s&&i.push(s)}function Kn(t,e,n,r,s,i,o,a){const c=On(e,n);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(Lm(t,n,u,r,s),co(e)&&function yF(t,e){const n=lr(e,t);16&n[re]||(n[re]|=64)}(n,e.index)):3&e.type&&(r=function vF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),s=null!=o?o(s,e.value||"",r):s,i.setProperty(c,r,s))}function km(t,e,n,r){if(Vb()){const s=null===r?null:{"":-1},i=function TF(t,e){const n=t.directiveRegistry;let r=null,s=null;if(n)for(let i=0;i<n.length;i++){const o=n[i];if(hb(e,o.selectors,!1))if(r||(r=[]),Br(o))if(null!==o.findHostDirectiveDefs){const a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),r.unshift(...a,o),Rm(t,e,a.length)}else r.unshift(o),Rm(t,e,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,r,s),r.push(o)}return null===r?null:[r,s]}(t,n);let o,a;null===i?o=a=null:[o,a]=i,null!==o&&LD(t,e,n,o,s,a),s&&function EF(t,e,n){if(e){const r=t.localNames=[];for(let s=0;s<e.length;s+=2){const i=n[e[s+1]];if(null==i)throw new O(-301,!1);r.push(e[s],i)}}}(n,r,s)}n.mergedAttrs=Bc(n.mergedAttrs,n.attrs)}function LD(t,e,n,r,s,i){for(let l=0;l<r.length;l++)Hg(Nd(n,e),t,r[l].type);!function xF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=pl(t,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];n.mergedAttrs=Bc(n.mergedAttrs,u.hostAttrs),IF(t,n,e,c,u),MF(c,u,s),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function _F(t,e,n){const s=e.directiveEnd,i=t.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<s;u++){const d=i[u],h=n?n.get(d):null,p=h?h.outputs:null;c=PD(0,d.inputs,u,c,h?h.inputs:null),l=PD(1,d.outputs,u,l,p);const g=null===c||null===o||ug(e)?null:OF(c,u,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,i)}function VD(t,e,n){const r=n.directiveStart,s=n.directiveEnd,i=n.index,o=function Xk(){return pe.lFrame.currentDirectiveIndex}();try{uo(i);for(let a=r;a<s;a++){const c=t.data[a],l=e[a];kg(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&SF(c,l)}}finally{uo(-1),kg(o)}}function SF(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Rm(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function MF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Br(e)&&(n[""]=t)}}function IF(t,e,n,r,s){t.data[r]=s;const i=s.factory||(s.factory=so(s.type)),o=new Kc(i,Br(s),k);t.blueprint[r]=o,n[r]=o,function bF(t,e,n,r,s){const i=s.hostBindings;if(i){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function CF(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,i)}}(t,e,r,pl(t,n,s.hostVars,Te),s)}function _s(t,e,n,r,s,i){const o=On(t,e);!function Pm(t,e,n,r,s,i,o){if(null==i)t.removeAttribute(e,s,n);else{const a=null==o?Ce(i):o(i,r||"",s);t.setAttribute(e,s,a,n)}}(e[fe],o,i,t.value,n,r,s)}function NF(t,e,n,r,s,i){const o=i[e];if(null!==o)for(let a=0;a<o.length;)ND(r,n,o[a++],o[a++],o[a++],o[a++])}function OF(t,e,n){let r=null,s=0;for(;s<n.length;){const i=n[s];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const o=t[i];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(i,o[a+1],o[a+2],n[s+1]);break}}s+=2}else s+=2;else s+=4}return r}function jD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function UD(t,e){const n=t.contentQueries;if(null!==n){const r=de(null);try{for(let s=0;s<n.length;s+=2){const o=n[s+1];if(-1!==o){const a=t.data[o];Ed(n[s]),a.contentQueries(2,e[o],o)}}}finally{de(r)}}}function nh(t,e){return t[Hc]?t[Db][jr]=e:t[Hc]=e,t[Db]=e,e}function Fm(t,e,n){Ed(0);const r=de(null);try{e(t,n)}finally{de(r)}}function BD(t){return t[ta]||(t[ta]=[])}function $D(t){return t.cleanup||(t.cleanup=[])}function rh(t,e){const n=t[Ht],r=n?n.get(ms,null):null;r&&r.handleError(e)}function Lm(t,e,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],c=n[i++];ND(t.data[o],e[o],r,a,c,s)}}function Ws(t,e,n){const r=Wc(e,t);!function pD(t,e,n){t.setValue(e,n)}(t[fe],r,n)}function kF(t,e){const n=lr(e,t),r=n[j];!function RF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const s=n[bt];null!==s&&null===n[cr]&&(n[cr]=om(s,n[Ht])),Vm(r,n,n[dt])}function Vm(t,e,n){Fg(e);try{const r=t.viewQuery;null!==r&&Fm(1,r,n);const s=t.template;null!==s&&OD(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Hs]?.finishViewCreation(t),t.staticContentQueries&&UD(t,e),t.staticViewQueries&&Fm(2,t.viewQuery,n);const i=t.components;null!==i&&function PF(t,e){for(let n=0;n<e.length;n++)kF(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[re]&=-5,Lg()}}function ya(t,e){return!e||null===e.firstChild||Pd(t)}function ml(t,e,n,r=!0){const s=e[j];if(function JP(t,e,n,r){const s=Vt+r,i=n.length;r>0&&(n[s-1][jr]=e),r<i-Vt?(e[jr]=n[s],sb(n,Vt+r,e)):(n.push(e),e[jr]=null),e[Lt]=n;const o=e[qc];null!==o&&n!==o&&function eF(t,e){const n=t[sa];e[Tt]!==e[Lt][Lt][Tt]&&(t[re]|=wg.HasTransplantedViews),null===n?t[sa]=[e]:n.push(e)}(o,e);const a=e[Hs];null!==a&&a.insertView(t),Ig(e),e[re]|=128}(s,e,t,n),r){const o=Em(n,t),a=e[fe],c=Kd(a,t[us]);null!==c&&function XP(t,e,n,r,s,i){r[bt]=s,r[yn]=e,eh(t,r,n,1,s,i)}(s,t[yn],a,e,c,o)}const i=e[cr];null!==i&&null!==i.firstChild&&(i.firstChild=null)}function _l(t,e,n,r,s=!1){for(;null!==n;){const i=e[n.index];null!==i&&r.push(st(i)),bn(i)&&zD(i,r);const o=n.type;if(8&o)_l(t,e,n.child,r);else if(32&o){const a=wm(n,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=SD(e,n);if(Array.isArray(a))r.push(...a);else{const c=lo(e[Tt]);_l(c[j],c,a,r,!0)}}n=s?n.projectionNext:n.next}return r}function zD(t,e){for(let n=Vt;n<t.length;n++){const r=t[n],s=r[j].firstChild;null!==s&&_l(r[j],r,s,e)}t[us]!==t[bt]&&e.push(t[us])}let GD=[];const jF={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Zc(t.lView)},consumerOnSignalRead(){this.lView[ao]=this}},WD=100;function sh(t,e=!0,n=0){const r=t[Ur],s=r.rendererFactory;s.begin?.();try{!function UF(t,e){Um(t,e);let n=0;for(;xg(t);){if(n===WD)throw new O(103,!1);n++,Um(t,1)}}(t,n)}catch(o){throw e&&rh(t,o),o}finally{s.end?.(),r.inlineEffectRunner?.flush()}}function BF(t,e,n,r){const s=e[re];if(!(256&~s))return;e[Ur].inlineEffectRunner?.flush(),Fg(e);let o=null,a=null;(function $F(t){return 2!==t.type})(t)&&(a=function FF(t){return t[ao]??function LF(t){const e=GD.pop()??Object.create(jF);return e.lView=t,e}(t)}(e),o=function Fr(t){return t&&(t.nextProducerIndex=0),de(t)}(a));try{Pb(e),function Bb(t){return pe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&OD(t,e,n,2,r);const c=!(3&~s);if(c){const d=t.preOrderCheckHooks;null!==d&&xd(e,d,null)}else{const d=t.preOrderHooks;null!==d&&Id(e,d,0,null),Vg(e,0)}if(function HF(t){for(let e=MC(t);null!==e;e=xC(e)){if(!(e[re]&wg.HasTransplantedViews))continue;const n=e[sa];for(let r=0;r<n.length;r++){jk(n[r])}}}(e),YD(e,0),null!==t.contentQueries&&UD(t,e),c){const d=t.contentCheckHooks;null!==d&&xd(e,d)}else{const d=t.contentHooks;null!==d&&Id(e,d,1),Vg(e,1)}!function lF(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)uo(~s);else{const i=s,o=n[++r],a=n[++r];Qk(o,i),a(2,e[i])}}}finally{uo(-1)}}(t,e);const l=t.components;null!==l&&QD(e,l,0);const u=t.viewQuery;if(null!==u&&Fm(2,u,r),c){const d=t.viewCheckHooks;null!==d&&xd(e,d)}else{const d=t.viewHooks;null!==d&&Id(e,d,2),Vg(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Cd]){for(const d of e[Cd])d();e[Cd]=null}e[re]&=-73}catch(c){throw Zc(e),c}finally{null!==a&&(function Oc(t,e){if(de(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Xi(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ls(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,o),function VF(t){t.lView[ao]!==t&&(t.lView=null,GD.push(t))}(a)),Lg()}}function YD(t,e){for(let n=MC(t);null!==n;n=xC(n))for(let r=Vt;r<n.length;r++)ZD(n[r],e)}function qF(t,e,n){ZD(lr(e,t),n)}function ZD(t,e){Mg(t)&&Um(t,e)}function Um(t,e){const r=t[j],s=t[re],i=t[ao];let o=!!(0===e&&16&s);if(o||=!!(64&s&&0===e),o||=!!(1024&s),o||=!(!i?.dirty||!Uo(i)),i&&(i.dirty=!1),t[re]&=-9217,o)BF(r,t,r.template,t[dt]);else if(8192&s){YD(t,1);const a=r.components;null!==a&&QD(t,a,1)}}function QD(t,e,n){for(let r=0;r<e.length;r++)qF(t,e[r],n)}function vl(t){for(t[Ur].changeDetectionScheduler?.notify();t;){t[re]|=64;const e=lo(t);if(Cg(t)&&!e)return t;t=e}return null}class yl{get rootNodes(){const e=this._lView,n=e[j];return _l(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dt]}set context(e){this._lView[dt]=e}get destroyed(){return!(256&~this._lView[re])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Lt];if(bn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(dl(e,r),dd(n,r))}this._attachedToViewContainer=!1}Xd(this._lView[j],this._lView)}onDestroy(e){Td(this._lView,e)}markForCheck(){vl(this._cdRefInjectingView||this._lView)}detach(){this._lView[re]&=-129}reattach(){Ig(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,sh(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,gD(this._lView[j],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e,Ig(this._lView)}}let Ys=(()=>{class t{static{this.__NG_ELEMENT_ID__=WF}}return t})();const zF=Ys,GF=class extends zF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const s=function gl(t,e,n,r){const s=de(null);try{const i=e.tView,c=th(t,i,n,4096&t[re]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[qc]=t[e.index];const u=t[Hs];return null!==u&&(c[Hs]=u.createEmbeddedView(i)),Vm(i,c,n),c}finally{de(s)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new yl(s)}};function WF(){return ih(tt(),M())}function ih(t,e){return 4&t.type?new GF(e,t,da(t,e)):null}class Gm{}class _L{}class r0{}class yL{resolveComponentFactory(e){throw function vL(t){const e=Error(`No component factory found for ${Zt(t)}.`);return e.ngComponent=t,e}(e)}}let uh=(()=>{class t{static{this.NULL=new yL}}return t})();class o0{}let Zs=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function wL(){const t=M(),n=lr(tt().index,t);return(wn(n)?n:t)[fe]}()}}return t})(),bL=(()=>{class t{static{this.\u0275prov=ne({token:t,providedIn:"root",factory:()=>null})}}return t})();const Wm={},a0=new Set;function vs(t){a0.has(t)||(a0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function c0(...t){}class nt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nt(!1),this.onMicrotaskEmpty=new Nt(!1),this.onStable=new Nt(!1),this.onError=new Nt(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&n,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function CL(){const t="function"==typeof Xe.requestAnimationFrame;let e=Xe[t?"requestAnimationFrame":"setTimeout"],n=Xe[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function TL(t){const e=()=>{!function SL(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Xe,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Zm(t),t.isCheckStableRunning=!0,Ym(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Zm(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{if(function EL(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(s,i,o,a);try{return l0(t),n.invokeTask(s,i,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),u0(t)}},onInvoke:(n,r,s,i,o,a,c)=>{try{return l0(t),n.invoke(s,i,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),u0(t)}},onHasTask:(n,r,s,i)=>{n.hasTask(s,i),r===s&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Zm(t),Ym(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,s,i)=>(n.handleError(s,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nt.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(nt.isInAngularZone())throw new O(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,s){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,e,DL,c0,c0);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const DL={};function Ym(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Zm(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function l0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function u0(t){t._nesting--,Ym(t)}class d0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nt,this.onMicrotaskEmpty=new Nt,this.onStable=new Nt,this.onError=new Nt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,s){return e.apply(n,r)}}var go=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(go||{});const h0={destroy(){}};function Xm(t,e){!e&&function wd(t){if(!bb())throw new O(-203,!1)}();const n=e?.injector??V(Rn);if(!function Hr(t){return"browser"===(t??V(Rn)).get(fo)}(n))return h0;vs("NgAfterNextRender");const r=n.get(Sl),s=r.handler??=new p0,i=e?.phase??go.MixedReadWrite,o=()=>{s.unregister(c),a()},a=n.get(ua).onDestroy(o),c=$s(n,()=>new f0(i,()=>{o(),t()}));return s.register(c),{destroy:o}}class f0{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=V(nt),this.errorHandler=V(ms,{optional:!0}),V(Gm,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class p0{constructor(){this.executingCallbacks=!1,this.buckets={[go.EarlyRead]:new Set,[go.Write]:new Set,[go.MixedReadWrite]:new Set,[go.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Sl=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=ne({token:t,providedIn:"root",factory:()=>new t})}}return t})();function hh(t,e,n){let r=n?t.styles:null,s=n?t.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:1==i?s=Wp(s,a):2==i&&(r=Wp(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=s:t.classesWithoutHost=s}class _0 extends uh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ke(e);return new Ml(n,this.ngModule)}}function v0(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}class fh{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=cd(r);const s=this.injector.get(e,Wm,r);return s!==Wm||n===Wm?s:this.parentInjector.get(e,n,r)}}class Ml extends r0{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=v0(e.inputs);if(null!==n)for(const s of r)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return r}get outputs(){return v0(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function rk(t){return t.map(nk).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,s){const i=de(null);try{let o=(s=s||this.ngModule)instanceof Qn?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new fh(e,o):e,c=a.get(o0,null);if(null===c)throw new O(407,!1);const l=a.get(bL,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(Sl,null),changeDetectionScheduler:a.get(Gm,null)},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?function dF(t,e,n,r){const i=r.get(qC,!1)||n===Lr.ShadowDom,o=t.selectRootElement(e,i);return function hF(t){RD(t)}(o),o}(f,r,this.componentDef.encapsulation,a):Qd(f,p,function NL(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p));let _=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let m=null;null!==g&&(m=om(g,a,!0));const v=Om(0,null,null,1,0,null,null,null,null,null,null),w=th(null,v,null,_,null,null,h,f,a,null,m);let T,y;Fg(w);try{const S=this.componentDef;let C,b=null;S.findHostDirectiveDefs?(C=[],b=new Map,S.findHostDirectiveDefs(S,C,b),C.push(S)):C=[S];const L=function kL(t,e){const n=t[j],r=De;return t[r]=e,va(n,r,2,"#host",null)}(w,g),F=function RL(t,e,n,r,s,i,o){const a=s[j];!function PL(t,e,n,r){for(const s of t)e.mergedAttrs=Bc(e.mergedAttrs,s.hostAttrs);null!==e.mergedAttrs&&(hh(e,e.mergedAttrs,!0),null!==n&&xD(r,n,e))}(r,t,e,o);let c=null;null!==e&&(c=om(e,s[Ht]));const l=i.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=th(s,kD(n),null,u,s[t.index],t,i,l,null,null,c);return a.firstCreatePass&&Rm(a,t,r.length-1),nh(s,d),s[t.index]=d}(L,g,S,C,w,h,f);y=Yc(v,De),g&&function LL(t,e,n,r){if(r)lg(t,n,["ng-version","17.3.12"]);else{const{attrs:s,classes:i}=function sk(t){const e=[],n=[];let r=1,s=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===s?""!==i&&e.push(i,t[++r]):8===s&&n.push(i);else{if(!Vr(s))break;s=i}r++}return{attrs:e,classes:n}}(e.selectors[0]);s&&lg(t,n,s),i&&i.length>0&&MD(t,n,i.join(" "))}}(f,S,g,r),void 0!==n&&function VL(t,e,n){const r=t.projection=[];for(let s=0;s<e.length;s++){const i=n[s];r.push(null!=i?Array.from(i):null)}}(y,this.ngContentSelectors,n),T=function FL(t,e,n,r,s,i){const o=tt(),a=s[j],c=On(o,s);LD(a,s,o,n,null,r);for(let u=0;u<n.length;u++)Dn(ho(s,a,o.directiveStart+u,o),s);VD(a,s,o),c&&Dn(c,s);const l=ho(s,a,o.directiveStart+o.componentOffset,o);if(t[dt]=s[dt]=l,null!==i)for(const u of i)u(l,e);return Im(a,o,s),l}(F,S,C,b,w,[jL]),Vm(v,w,null)}finally{Lg()}return new OL(this.componentType,T,da(y,w),w,y)}finally{de(i)}}}class OL extends _L{constructor(e,n,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new yl(s,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let s;if(null!==r&&(s=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;Lm(i[j],i,s,e,n),this.previousInputValues.set(e,n),vl(lr(this._tNode.index,i))}}get injector(){return new Kt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function jL(){const t=tt();Md(M()[j],t)}let qr=(()=>{class t{static{this.__NG_ELEMENT_ID__=UL}}return t})();function UL(){return b0(tt(),M())}const BL=qr,y0=class extends BL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return da(this._hostTNode,this._hostLView)}get injector(){return new Kt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Od(this._hostTNode,this._hostLView);if(Ug(e)){const n=el(e,this._hostLView),r=Jc(e);return new Kt(n[j].data[r+8],n)}return new Kt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=w0(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let s,i;"number"==typeof r?s=r:null!=r&&(s=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,s,ya(this._hostTNode,null)),a}createComponent(e,n,r,s,i){const o=e&&!function $c(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const p=n||{};a=p.index,r=p.injector,s=p.projectableNodes,i=p.environmentInjector||p.ngModuleRef}const c=o?e:new Ml(ke(e)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const g=(o?l:this.parentInjector).get(Qn,null);g&&(i=g)}ke(c.componentType??{});const f=c.create(l,s,null,i);return this.insertImpl(f.hostView,a,ya(this._hostTNode,null)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const s=e._lView;if(function Vk(t){return bn(t[Lt])}(s)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=s[Lt],l=new y0(c,c[yn],c[Lt]);l.detach(l.indexOf(e))}}const i=this._adjustIndex(n),o=this._lContainer;return ml(o,s,i,r),e.attachToViewContainerRef(),sb(e_(o),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=w0(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=dl(this._lContainer,n);r&&(dd(e_(this._lContainer),n),Xd(r[j],r))}detach(e){const n=this._adjustIndex(e,-1),r=dl(this._lContainer,n);return r&&null!=dd(e_(this._lContainer),n)?new yl(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function w0(t){return t[8]}function e_(t){return t[8]||(t[8]=[])}function b0(t,e){let n;const r=e[t.index];return bn(r)?n=r:(n=jD(r,e,null,t),e[t.index]=n,nh(e,n)),C0(n,e,t,r),new y0(n,t,e)}let C0=function S0(t,e,n,r){if(t[us])return;let s;s=8&n.type?st(r):function $L(t,e){const n=t[fe],r=n.createComment(""),s=On(e,t);return po(n,Kd(n,s),r,function sF(t,e){return t.nextSibling(e)}(n,s),!1),r}(e,n),t[us]=s},t_=()=>!1;class n_{constructor(e){this.queryList=e,this.matches=null}clone(){return new n_(this.queryList)}setDirty(){this.queryList.setDirty()}}class r_{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,s=[];for(let i=0;i<r;i++){const o=n.getByIndex(i);s.push(this.queries[o.indexInDeclarationView].clone())}return new r_(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==c_(e,n).matches&&this.queries[n].setDirty()}}class T0{constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function QL(t){return t.split(",").map(e=>e.trim())}(e):e}}class s_{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const s=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(e,s);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new s_(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class i_{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new i_(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];this.matchTNodeWithReadOption(e,n,GL(n,i)),this.matchTNodeWithReadOption(e,n,kd(n,e,i,!1,!1))}else r===Ys?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,kd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===ur||s===qr||s===Ys&&4&n.type)this.addMatch(n.index,-2);else{const i=kd(n,e,s,!1,!1);null!==i&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function GL(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function YL(t,e,n,r){return-1===n?function WL(t,e){return 11&t.type?da(t,e):4&t.type?ih(t,e):null}(e,t):-2===n?function ZL(t,e,n){return n===ur?da(e,t):n===Ys?ih(e,t):n===qr?b0(e,t):void 0}(t,e,r):ho(t,t[j],n,e)}function E0(t,e,n,r){const s=e[Hs].queries[r];if(null===s.matches){const i=t.data,o=n.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:YL(e,i[l],o[c+1],n.metadata.read))}s.matches=a}return s.matches}function o_(t,e,n,r){const s=t.queries.getByIndex(n),i=s.matches;if(null!==i){const o=E0(t,e,s,n);for(let a=0;a<i.length;a+=2){const c=i[a];if(c>0)r.push(o[a/2]);else{const l=i[a+1],u=e[-c];for(let d=Vt;d<u.length;d++){const h=u[d];h[qc]===h[Lt]&&o_(h[j],h,l,r)}if(null!==u[sa]){const d=u[sa];for(let h=0;h<d.length;h++){const f=d[h];o_(f[j],f,l,r)}}}}}return r}function x0(t,e,n){const r=Fe();return r.firstCreatePass&&(function A0(t,e,n){null===t.queries&&(t.queries=new s_),t.queries.track(new i_(e,n))}(r,new T0(t,e,n),-1),!(2&~e)&&(r.staticViewQueries=!0)),function M0(t,e,n){const r=new Yg(!(4&~n));return function gF(t,e,n,r){const s=BD(e);s.push(n),t.firstCreatePass&&$D(t).push(r,s.length-1)}(t,e,r,r.destroy),(e[Hs]??=new r_).queries.push(new n_(r))-1}(r,M(),e)}function c_(t,e){return t.queries.getByIndex(e)}function N0(t,e){const n=t[j],r=c_(n,e);return r.crossesNgTemplate?o_(n,t,e,[]):E0(n,t,r,e)}function R0(t){return function O0(t){return"function"==typeof t&&void 0!==t[lt]}(t)&&"function"==typeof t.set}function rt(t){let e=function z0(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let s;if(Br(t))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);s=e.\u0275dir}if(s){if(n){r.push(s);const o=t;o.inputs=gh(t.inputs),o.inputTransforms=gh(t.inputTransforms),o.declaredInputs=gh(t.declaredInputs),o.outputs=gh(t.outputs);const a=s.hostBindings;a&&hV(t,a);const c=s.viewQuery,l=s.contentQueries;if(c&&uV(t,c),l&&dV(t,l),cV(t,s),DO(t.outputs,s.outputs),Br(s)&&s.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const i=s.features;if(i)for(let o=0;o<i.length;o++){const a=i[o];a&&a.ngInherit&&a(t),a===rt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function lV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const s=t[r];s.hostVars=e+=s.hostVars,s.hostAttrs=Bc(s.hostAttrs,n=Bc(n,s.hostAttrs))}}(r)}function cV(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];if(void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const s=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(s))continue;t.inputTransforms??={},t.inputTransforms[s]=e.inputTransforms[s]}}}function gh(t){return t===ls?{}:t===He?[]:t}function uV(t,e){const n=t.viewQuery;t.viewQuery=n?(r,s)=>{e(r,s),n(r,s)}:e}function dV(t,e){const n=t.contentQueries;t.contentQueries=n?(r,s,i)=>{e(r,s,i),n(r,s,i)}:e}function hV(t,e){const n=t.hostBindings;t.hostBindings=n?(r,s)=>{e(r,s),n(r,s)}:e}class mo{}class Q0{}class u_ extends mo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _0(this);const s=vn(e);this._bootstrapComponents=dr(s.bootstrap),this._r3Injector=fC(e,n,[{provide:mo,useValue:this},{provide:uh,useValue:this.componentFactoryResolver},...r],Zt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class d_ extends Q0{constructor(e){super(),this.moduleType=e}create(e){return new u_(this.moduleType,e,[])}}class X0 extends mo{constructor(e){super(),this.componentFactoryResolver=new _0(this),this.instance=null;const n=new Ko([...e.providers,{provide:mo,useValue:this},{provide:uh,useValue:this.componentFactoryResolver}],e.parent||yd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function mh(t,e,n=null){return new X0({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Ca=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function vh(t){return!!function h_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function jt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function _o(t,e,n,r){const s=jt(t,e,n);return jt(t,e+1,r)||s}function Ot(t,e,n,r,s,i,o,a){const c=M(),l=Fe(),u=t+De,d=l.firstCreatePass?function TV(t,e,n,r,s,i,o,a,c){const l=e.consts,u=va(e,t,4,o||null,hs(l,a));km(e,n,u,hs(l,c)),Md(e,u);const d=u.tView=Om(2,u,r,s,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,n,r,s,i,o):l.data[u];fs(d,!1);const h=K0(l,c,d,t);Xc()&&Jd(l,c,h,d),Dn(h,c);const f=jD(h,c,h,d);return c[u]=f,nh(c,f),function D0(t,e,n){return t_(t,e,n)}(f,d,c),Sd(d)&&Am(l,c,d),null!=o&&Nm(c,d,a),Ot}let K0=function J0(t,e,n,r){return ps(!0),e[fe].createComment("")};function zr(t,e,n,r){const s=M();return jt(s,$r(),e)&&(Fe(),_s(ht(),s,t,e,n,r)),zr}function Oa(t,e,n,r,s,i,o,a){const l=function yh(t,e,n,r,s){const i=_o(t,e,n,r);return jt(t,e+2,s)||i}(t,qs(),n,s,o);return zs(3),l?e+Ce(n)+r+Ce(s)+i+Ce(o)+a:Te}function Th(t,e){return t<<17|e<<2}function Ci(t){return t>>17&32767}function C_(t){return 2|t}function yo(t){return(131068&t)>>2}function D_(t,e){return-131069&t|e<<2}function S_(t){return 1|t}function AS(t,e,n,r){const s=t[n+1],i=null===e;let o=r?Ci(s):yo(s),a=!1;for(;0!==o&&(!1===a||i);){const l=t[o+1];d2(t[o],e)&&(a=!0,t[o+1]=r?S_(l):C_(l)),o=r?Ci(l):yo(l)}a&&(t[n+1]=r?C_(s):S_(s))}function d2(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Xo(t,e)>=0}const Jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function NS(t){return t.substring(Jt.key,Jt.keyEnd)}function OS(t,e){const n=Jt.textEnd;return n===e?-1:(e=Jt.keyEnd=function g2(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Jt.key=e,n),Va(t,e,n))}function Va(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Oe(t,e,n){const r=M();return jt(r,$r(),e)&&Kn(Fe(),ht(),r,t,e,r[fe],n,!1),Oe}function T_(t,e,n,r,s){const o=s?"class":"style";Lm(t,n,e.inputs[o],o,r)}function Rl(t,e,n){return Gr(t,e,n,!1),Rl}function Et(t,e){return Gr(t,e,null,!0),Et}function LS(t){!function Wr(t,e,n,r){const s=Fe(),i=zs(2);s.firstUpdatePass&&jS(s,null,i,r);const o=M();if(n!==Te&&jt(o,i,n)){const a=s.data[Cn()];if(HS(a,r)&&!VS(s,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Wp(c,n||"")),T_(s,a,o,n,r)}else!function T2(t,e,n,r,s,i,o,a){s===Te&&(s=He);let c=0,l=0,u=0<s.length?s[0]:null,d=0<i.length?i[0]:null;for(;null!==u||null!==d;){const h=c<s.length?s[c+1]:void 0,f=l<i.length?i[l+1]:void 0;let g,p=null;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),null!==p&&BS(t,e,n,r,p,g,o,a),u=c<s.length?s[c]:null,d=l<i.length?i[l]:null}}(s,a,o,o[fe],o[i+1],o[i+1]=function D2(t,e,n){if(null==n||""===n)return He;const r=[],s=_i(n);if(Array.isArray(s))for(let i=0;i<s.length;i++)t(r,s[i],!0);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&t(r,i,s[i]);else"string"==typeof s&&e(r,s);return r}(t,e,n),r,i)}}(S2,bs,t,!0)}function bs(t,e){for(let n=function f2(t){return function RS(t){Jt.key=0,Jt.keyEnd=0,Jt.value=0,Jt.valueEnd=0,Jt.textEnd=t.length}(t),OS(t,Va(t,0,Jt.textEnd))}(e);n>=0;n=OS(e,n))ar(t,NS(e),!0)}function Gr(t,e,n,r){const s=M(),i=Fe(),o=zs(2);i.firstUpdatePass&&jS(i,t,o,r),e!==Te&&jt(s,o,e)&&BS(i,i.data[Cn()],s,s[fe],t,s[o+1]=function E2(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Zt(_i(t)))),t}(e,n),r,o)}function VS(t,e){return e>=t.expandoStartIndex}function jS(t,e,n,r){const s=t.data;if(null===s[n+1]){const i=s[Cn()],o=VS(t,n);HS(i,r)&&null===e&&!o&&(e=!1),e=function y2(t,e,n,r){const s=function Rg(t){const e=pe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(n=Pl(n=E_(null,t,e,n,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==s)if(n=E_(s,t,e,n,r),null===i){let c=function w2(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==yo(r))return t[Ci(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=E_(null,t,e,c[1],r),c=Pl(c,e.attrs,r),function b2(t,e,n,r){t[Ci(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else i=function C2(t,e,n){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=Pl(r,t[i].hostAttrs,n);return Pl(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(s,i,e,r),function l2(t,e,n,r,s,i){let o=i?e.classBindings:e.styleBindings,a=Ci(o),c=yo(o);t[r]=n;let u,l=!1;if(Array.isArray(n)?(u=n[1],(null===u||Xo(n,u)>0)&&(l=!0)):u=n,s)if(0!==c){const h=Ci(t[a+1]);t[r+1]=Th(h,a),0!==h&&(t[h+1]=D_(t[h+1],r)),t[a+1]=function a2(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Th(a,0),0!==a&&(t[a+1]=D_(t[a+1],r)),a=r;else t[r+1]=Th(c,0),0===a?a=r:t[c+1]=D_(t[c+1],r),c=r;l&&(t[r+1]=C_(t[r+1])),AS(t,u,r,!0),AS(t,u,r,!1),function u2(t,e,n,r,s){const i=s?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&Xo(i,e)>=0&&(n[r+1]=S_(n[r+1]))}(e,u,t,r,i),o=Th(a,c),i?e.classBindings=o:e.styleBindings=o}(s,i,e,n,o,r)}}function E_(t,e,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],r=Pl(r,i.hostAttrs,s),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Pl(t,e,n){const r=n?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ar(t,o,!!n||e[++i]))}return void 0===t?null:t}function S2(t,e,n){const r=String(e);""!==r&&!r.includes(" ")&&ar(t,r,n)}function BS(t,e,n,r,s,i,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],u=function c2(t){return!(1&~t)}(l)?$S(c,e,n,s,yo(l),o):void 0;Eh(u)||(Eh(i)||function o2(t){return!(2&~t)}(l)&&(i=$S(c,null,n,s,a,o)),function aF(t,e,n,r,s){if(e)s?t.addClass(n,r):t.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:vi.DashCase;null==s?t.removeStyle(n,r,i):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),i|=vi.Important),t.setStyle(n,r,s,i))}}(r,o,Wc(Cn(),n),s,i))}function $S(t,e,n,r,s,i){const o=null===e;let a;for(;s>0;){const c=t[s],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=n[s+1];h===Te&&(h=d?He:void 0);let f=d?ag(h,r):u===r?h:void 0;if(l&&!Eh(f)&&(f=ag(c,r)),Eh(f)&&(a=f,o))return a;const p=t[s+1];s=o?Ci(p):yo(p)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=ag(c,r))}return a}function Eh(t){return void 0!==t}function HS(t,e){return!!(t.flags&(e?8:16))}function D(t,e,n,r){const s=M(),i=Fe(),o=De+t,a=s[fe],c=i.firstCreatePass?function Z2(t,e,n,r,s,i){const o=e.consts,c=va(e,t,2,r,hs(o,s));return km(e,n,c,hs(o,i)),null!==c.attrs&&hh(c,c.attrs,!1),null!==c.mergedAttrs&&hh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,i,s,e,n,r):i.data[o],l=WS(i,s,c,a,e,t);s[o]=l;const u=Sd(c);return fs(c,!0),xD(a,l,c),!function Al(t){return!(32&~t.flags)}(c)&&Xc()&&Jd(i,s,l,c),0===function Uk(){return pe.lFrame.elementDepthCount}()&&Dn(l,s),function Bk(){pe.lFrame.elementDepthCount++}(),u&&(Am(i,s,c),Im(i,c,s)),null!==r&&Nm(s,c),D}function E(){let t=tt();Ng()?function Og(){pe.lFrame.isParent=!1}():(t=t.parent,fs(t,!1));const e=t;(function Hk(t){return pe.skipHydrationRootTNode===t})(e)&&function Wk(){pe.skipHydrationRootTNode=null}(),function $k(){pe.lFrame.elementDepthCount--}();const n=Fe();return n.firstCreatePass&&(Md(n,t),bg(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function cR(t){return!!(8&t.flags)}(e)&&T_(n,e,M(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lR(t){return!!(16&t.flags)}(e)&&T_(n,e,M(),e.stylesWithoutHost,!1),E}function Di(t,e,n,r){return D(t,e,n,r),E(),Di}let WS=(t,e,n,r,s,i)=>(ps(!0),Qd(r,s,function Yb(){return pe.lFrame.currentNamespace}()));function Yr(){return M()}const wo=void 0;var nj=["en",[["a","p"],["AM","PM"],wo],[["AM","PM"],wo,wo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wo,"{1} 'at' {0}",wo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tj(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let ja={};function Pn(t){const e=function rj(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=JS(e);if(n)return n;const r=e.split("-")[0];if(n=JS(r),n)return n;if("en"===r)return nj;throw new O(701,!1)}function JS(t){return t in ja||(ja[t]=Xe.ng&&Xe.ng.common&&Xe.ng.common.locales&&Xe.ng.common.locales[t]),ja[t]}var ft=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ft||{});const Ua="en-US";let eT=Ua;function ue(t,e,n,r){const s=M(),i=Fe(),o=tt();return P_(i,s,s[fe],o,t,e,r),ue}function P_(t,e,n,r,s,i,o){const a=Sd(r),l=t.firstCreatePass&&$D(t),u=e[dt],d=BD(e);let h=!0;if(3&r.type||o){const g=On(r,e),_=o?o(g):g,m=d.length,v=o?T=>o(st(T[r.index])):r.index;let w=null;if(!o&&a&&(w=function Jj(t,e,n,r){const s=t.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const o=s[i];if(o===n&&s[i+1]===r){const a=e[ta],c=s[i+2];return a.length>c?a[c]:null}"string"==typeof o&&(i+=2)}return null}(t,e,s,r.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=i,w.__ngLastListenerFn__=i,h=!1;else{i=xT(r,e,u,i,!1);const T=n.listen(_,s,i);d.push(i,T),l&&l.push(s,v,m,m+1)}}else i=xT(r,e,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[s])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const y=e[p[_]][p[_+1]].subscribe(i),S=d.length;d.push(i,y),l&&l.push(s,r.index,S,-(S+1))}}}function MT(t,e,n,r){const s=de(null);try{return ds(6,e,n),!1!==n(r)}catch(i){return rh(t,i),!1}finally{ds(7,e,n),de(s)}}function xT(t,e,n,r,s){return function i(o){if(o===Function)return r;vl(t.componentOffset>-1?lr(t.index,e):e);let c=MT(e,n,r,o),l=i.__ngNextListenerFn__;for(;l;)c=MT(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return s&&!1===c&&o.preventDefault(),c}}function ge(t=1){return function Jk(t){return(pe.lFrame.contextLView=function Fb(t,e){for(;t>0;)e=e[na],t--;return e}(t,pe.lFrame.contextLView))[dt]}(t)}function V_(){return function a_(t,e){return t[Hs].queries[e].queryList}(M(),Pg())}function I(t,e=""){const n=M(),r=Fe(),s=t+De,i=r.firstCreatePass?va(r,s,1,e,null):r.data[s],o=ZT(r,n,i,e,t);n[s]=o,Xc()&&Jd(r,n,o,i),fs(i,!1)}let ZT=(t,e,n,r,s)=>(ps(!0),function bm(t,e){return t.createText(e)}(e[fe],r));function Mt(t){return fr("",t,""),Mt}function fr(t,e,n){const r=M(),s=function Aa(t,e,n,r){return jt(t,$r(),n)?e+Ce(n)+r:Te}(r,t,e,n);return s!==Te&&Ws(r,Cn(),s),fr}function Si(t,e,n,r,s){const i=M(),o=function Na(t,e,n,r,s,i){const a=_o(t,qs(),n,s);return zs(2),a?e+Ce(n)+r+Ce(s)+i:Te}(i,t,e,n,r,s);return o!==Te&&Ws(i,Cn(),o),Si}function j_(t,e,n,r,s,i,o){const a=M(),c=Oa(a,t,e,n,r,s,i,o);return c!==Te&&Ws(a,Cn(),c),j_}function Nh(t,e,n){R0(e)&&(e=e());const r=M();return jt(r,$r(),e)&&Kn(Fe(),ht(),r,t,e,r[fe],n,!1),Nh}function U_(t,e){const n=R0(t);return n&&t.set(e),n}function Oh(t,e){const n=M(),r=Fe(),s=tt();return P_(r,n,n[fe],s,t,e),Oh}function B_(t,e,n,r,s){if(t=le(t),Array.isArray(t))for(let i=0;i<t.length;i++)B_(t[i],e,n,r,s);else{const i=Fe(),o=M(),a=tt();let c=oo(t)?t:le(t.provide);const l=wb(t),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(oo(t)||!t.multi){const f=new Kc(l,s,k),p=H_(c,e,s?u:u+h,d);-1===p?(Hg(Nd(a,o),i,c),$_(i,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=H_(c,e,u+h,d),p=H_(c,e,u,u+h),_=p>=0&&n[p];if(s&&!_||!s&&!(f>=0&&n[f])){Hg(Nd(a,o),i,c);const m=function CU(t,e,n,r,s){const i=new Kc(t,n,k);return i.multi=[],i.index=e,i.componentProviders=0,nE(i,s,r&&!n),i}(s?bU:wU,n.length,s,r,l);!s&&_&&(n[p].providerFactory=m),$_(i,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(m),o.push(m)}else $_(i,t,f>-1?f:p,nE(n[s?p:f],l,!s&&r));!s&&r&&_&&n[p].componentProviders++}}}function $_(t,e,n,r){const s=oo(e),i=function dk(t){return!!t.useClass}(e);if(s||i){const c=(i?le(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!s&&e.multi){const u=l.indexOf(n);-1===u?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function nE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function H_(t,e,n,r){for(let s=n;s<r;s++)if(e[s]===t)return s;return-1}function wU(t,e,n,r){return q_(this.multi,[])}function bU(t,e,n,r){const s=this.multi;let i;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ho(n,n[j],this.providerFactory.index,r);i=a.slice(0,o),q_(s,i);for(let c=o;c<a.length;c++)i.push(a[c])}else i=[],q_(s,i);return i}function q_(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ct(t,e=[]){return n=>{n.providersResolver=(r,s)=>function yU(t,e,n){const r=Fe();if(r.firstCreatePass){const s=Br(t);B_(n,r.data,r.blueprint,s,!0),B_(e,r.data,r.blueprint,s,!1)}}(r,s?s(t):t,e)}}let DU=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=dg(0,n.type),s=r.length>0?mh([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ne({token:t,providedIn:"environment",factory:()=>new t(he(Qn))})}}return t})();function rE(t){vs("NgStandalone"),t.getStandaloneInjector=e=>e.get(DU).getOrCreateStandaloneInjector(t)}function oE(t,e,n,r,s,i,o){const a=e+n;return _o(t,a,s,i)?function ys(t,e,n){return t[e]=n}(t,a+2,o?r.call(o,s,i):r(s,i)):function $l(t,e){const n=t[e];return n===Te?void 0:n}(t,a+2)}function dE(t,e,n,r){const s=t+De,i=M(),o=function ia(t,e){return t[e]}(i,s);return function Hl(t,e){return t[j].data[e].pure}(i,s)?oE(i,function kn(){const t=pe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r)}let ME=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const OE=new G(""),Fh=new G("");let K_,Q_=(()=>{class t{constructor(n,r,s){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,K_||(function RB(t){K_=t}(s),s.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,s){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==i),n()},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:s})}whenStable(n,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,s){return[]}static{this.\u0275fac=function(r){return new(r||t)(he(nt),he(X_),he(Fh))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})(),X_=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return K_?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function Wl(t){return!!t&&"function"==typeof t.then}function kE(t){return!!t&&"function"==typeof t.subscribe}const J_=new G("");let ev=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=V(J_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const s of this.appInits){const i=s();if(Wl(i))n.push(i);else if(kE(i)){const o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const tv=new G("");function FE(t,e){return Array.isArray(e)?e.reduce(FE,t):{...t,...e}}let Ti=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(gC),this.afterRenderEffectManager=V(Sl),this.externalTestViews=new Set,this.beforeRender=new yr,this.afterTick=new yr,this.componentTypes=[],this.components=[],this.isStable=V(Ca).hasPendingTasks.pipe(Je(n=>!n)),this._injector=V(Qn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const s=n instanceof r0;if(!this._injector.get(ev).done)throw!s&&function pi(t){const e=ke(t)||Qt(t)||pn(t);return null!==e&&e.standalone}(n),new O(405,!1);let o;o=s?n:this._injector.get(uh).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function PB(t){return t.isBoundToModule}(o)?void 0:this._injector.get(mo),l=o.create(Rn.NULL,[],r||o.selector,a),u=l.location.nativeElement,d=l.injector.get(OE,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Lh(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new O(101,!1);const r=de(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,de(r)}}detectChangesInAttachedViews(n){let r=0;const s=this.afterRenderEffectManager;for(;;){if(r===WD)throw new O(103,!1);if(n){const i=0===r;this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:a}of this._views)LB(o,i,a)}if(r++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>nv(i))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>nv(i))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Lh(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(tv,[]);[...this._bootstrapListeners,...r].forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Lh(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new O(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Lh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function LB(t,e,n){!e&&!nv(t)||function VB(t,e,n){let r;n?(r=0,t[re]|=1024):r=64&t[re]?0:1,sh(t,e,r)}(t,n,e)}function nv(t){return xg(t)}class jB{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let LE=(()=>{class t{compileModuleSync(n){return new d_(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=dr(vn(n).declarations).reduce((o,a)=>{const c=ke(a);return c&&o.push(new Ml(c)),o},[]);return new jB(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$B=(()=>{class t{constructor(){this.zone=V(nt),this.applicationRef=V(Ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function HB(){const t=V(nt),e=V(ms);return n=>t.runOutsideAngular(()=>e.handleError(n))}let zB=(()=>{class t{constructor(){this.subscription=new zn,this.initialized=!1,this.zone=V(nt),this.pendingTasks=V(Ca)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Qs=new G("",{providedIn:"root",factory:()=>V(Qs,Pe.Optional|Pe.SkipSelf)||function GB(){return typeof $localize<"u"&&$localize.locale||Ua}()}),rv=new G("");let BE=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const s=function ML(t="zone.js",e){return"noop"===t?new d0:"zone.js"===t?new nt(e):t}(r?.ngZone,function UE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{const i=function yV(t,e,n){return new u_(t,e,n)}(n.moduleType,this.injector,function jE(t){return[{provide:nt,useFactory:t},{provide:io,multi:!0,useFactory:()=>{const e=V($B,{optional:!0});return()=>e.initialize()}},{provide:io,multi:!0,useFactory:()=>{const e=V(zB);return()=>{e.initialize()}}},{provide:gC,useFactory:HB}]}(()=>s)),o=i.injector.get(ms,null);return s.runOutsideAngular(()=>{const a=s.onError.subscribe({next:c=>{o.handleError(c)}});i.onDestroy(()=>{Lh(this._modules,i),a.unsubscribe()})}),function PE(t,e,n){try{const r=n();return Wl(r)?r.catch(s=>{throw e.runOutsideAngular(()=>t.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,s,()=>{const a=i.injector.get(ev);return a.runInitializers(),a.donePromise.then(()=>(function tT(t){"string"==typeof t&&(eT=t.toLowerCase().replace(/_/g,"-"))}(i.injector.get(Qs,Ua)||Ua),this._moduleDoBootstrap(i),i))})})}bootstrapModule(n,r=[]){const s=FE({},r);return function BB(t,e,n){const r=new d_(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,s))}_moduleDoBootstrap(n){const r=n.injector.get(Ti);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!n.instance.ngDoBootstrap)throw new O(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new O(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(rv,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||t)(he(Rn))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Ei=null;const $E=new G("");function HE(t,e,n=[]){const r=`Platform: ${e}`,s=new G(r);return(i=[])=>{let o=sv();if(!o||o.injector.get($E,!1)){const a=[...n,...i,{provide:s,useValue:!0}];t?t(a):function ZB(t){if(Ei&&!Ei.get($E,!1))throw new O(400,!1);(function RE(){!function Ie(t){B=t}(()=>{throw new O(600,!1)})})(),Ei=t;const e=t.get(BE);(function zE(t){t.get(LC,null)?.forEach(n=>n())})(t)}(function qE(t=[],e){return Rn.create({name:e,providers:[{provide:pg,useValue:"platform"},{provide:rv,useValue:new Set([()=>Ei=null])},...t]})}(a,r))}return function QB(t){const e=sv();if(!e)throw new O(401,!1);return e}()}}function sv(){return Ei?.get(BE)??null}let Yl=(()=>{class t{static{this.__NG_ELEMENT_ID__=KB}}return t})();function KB(t){return function JB(t,e,n){if(co(t)&&!n){const r=lr(t.index,e);return new yl(r,r)}return 47&t.type?new yl(e[Tt],e):null}(tt(),M(),!(16&~t))}class QE{constructor(){}supports(e){return vh(e)}create(e){return new s3(e)}}const r3=(t,e)=>e;class s3{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||r3}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,s=0,i=null;for(;n||r;){const o=!r||n&&n.currentIndex<KE(r,s,i)?n:r,a=KE(o,s,i),c=o.currentIndex;if(o===r)s--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)s++;else{i||(i=[]);const l=a-s,u=c-s;if(l!=u){for(let h=0;h<l;h++){const f=h<i.length?i[h]:i[h]=0,p=f+h;u<=p&&p<l&&(i[h]=f+1)}i[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!vh(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,i,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],o=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,i,o,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,o,a),r=!0),n=n._next}else s=0,function DV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(s,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,s)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,s),r=!0),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,s){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,s)):e=this._addAfter(new i3(n,r),i,s),e}_verifyReinsertion(e,n,r,s){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,i=e._nextRemoved;return null===s?this._removalsHead=i:s._nextRemoved=i,null===i?this._removalsTail=s:i._prevRemoved=s,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const s=null===n?this._itHead:n._next;return e._next=s,e._prev=n,null===s?this._itTail=e:s._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new XE),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new XE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class i3{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class o3{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class XE{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new o3,this.map.set(n,r)),r.add(e)}get(e,n){const s=this.map.get(e);return s?s.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function KE(t,e,n){const r=t.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+e+s}function eM(){return new lv([new QE])}let lv=(()=>{class t{static{this.\u0275prov=ne({token:t,providedIn:"root",factory:eM})}constructor(n){this.factories=n}static create(n,r){if(null!=r){const s=r.factories.slice();n=n.concat(s)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||eM()),deps:[[t,new ud,new ld]]}}find(n){const r=this.factories.find(s=>s.supports(n));if(null!=r)return r;throw new O(901,!1)}}return t})();const d3=HE(null,"core",[]);let h3=(()=>{class t{constructor(n){}static{this.\u0275fac=function(r){return new(r||t)(he(Ti))}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({})}}return t})();let SM=null;function Mi(){return SM}class Z3{}const Cr=new G("");let hv=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>V(X3),providedIn:"platform"})}}return t})();const Q3=new G("");let X3=(()=>{class t extends hv{constructor(){super(),this._doc=V(Cr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mi().getBaseHref(this._doc)}onPopState(n){const r=Mi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Mi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,s){this._history.pushState(n,r,s)}replaceState(n,r,s){this._history.replaceState(n,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function fv(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function TM(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Xs(t){return t&&"?"!==t[0]?"?"+t:t}let Co=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>V(MM),providedIn:"root"})}}return t})();const EM=new G("");let MM=(()=>{class t extends Co{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Cr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return fv(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Xs(this._platformLocation.search),s=this._platformLocation.hash;return s&&n?`${r}${s}`:r}pushState(n,r,s,i){const o=this.prepareExternalUrl(s+Xs(i));this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){const o=this.prepareExternalUrl(s+Xs(i));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(he(hv),he(EM,8))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),K3=(()=>{class t extends Co{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=fv(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,s,i){let o=this.prepareExternalUrl(s+Xs(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,s,i){let o=this.prepareExternalUrl(s+Xs(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(he(hv),he(EM,8))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})(),Xl=(()=>{class t{constructor(n){this._subject=new Nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function t$(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(TM(xM(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Xs(r))}normalize(n){return t.stripTrailingSlash(function e$(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,xM(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",s=null){this._locationStrategy.pushState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xs(r)),s)}replaceState(n,r="",s=null){this._locationStrategy.replaceState(s,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xs(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(s=>s(n,r))}subscribe(n,r,s){return this._subject.subscribe({next:n,error:r,complete:s})}static{this.normalizeQueryParams=Xs}static{this.joinWithSlash=fv}static{this.stripTrailingSlash=TM}static{this.\u0275fac=function(r){return new(r||t)(he(Co))}}static{this.\u0275prov=ne({token:t,factory:()=>function J3(){return new Xl(he(Co))}(),providedIn:"root"})}}return t})();function xM(t){return t.replace(/\/index.html$/,"")}var Ln=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Ln||{}),ct=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(ct||{}),pr=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(pr||{});const qt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Yh(t,e){return Sr(Pn(t)[ft.DateFormat],e)}function Zh(t,e){return Sr(Pn(t)[ft.TimeFormat],e)}function Qh(t,e){return Sr(Pn(t)[ft.DateTimeFormat],e)}function Dr(t,e){const n=Pn(t),r=n[ft.NumberSymbols][e];if(typeof r>"u"){if(e===qt.CurrencyDecimal)return n[ft.NumberSymbols][qt.Decimal];if(e===qt.CurrencyGroup)return n[ft.NumberSymbols][qt.Group]}return r}function AM(t){if(!t[ft.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ft.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Sr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function gv(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const g$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xh={},m$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ks=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Ks||{}),We=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(We||{}),Ye=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ye||{});function _$(t,e,n,r){let s=function E$(t){if(kM(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[s,i=1,o=1]=t.split("-").map(a=>+a);return Kh(s,i-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(g$))return function M$(t){const e=new Date(0);let n=0,r=0;const s=t[8]?e.setUTCFullYear:e.setFullYear,i=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),s.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return i.call(e,o,a,c,l),e}(r)}const e=new Date(t);if(!kM(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Js(n,e)||e;let a,o=[];for(;e;){if(a=m$.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const u=o.pop();if(!u)break;e=u}}let c=s.getTimezoneOffset();r&&(c=OM(r,c),s=function T$(t,e,n){const r=n?-1:1,s=t.getTimezoneOffset();return function S$(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(OM(e,s)-s))}(s,r,!0));let l="";return o.forEach(u=>{const d=function D$(t){if(_v[t])return _v[t];let e;switch(t){case"G":case"GG":case"GGG":e=pt(Ye.Eras,ct.Abbreviated);break;case"GGGG":e=pt(Ye.Eras,ct.Wide);break;case"GGGGG":e=pt(Ye.Eras,ct.Narrow);break;case"y":e=zt(We.FullYear,1,0,!1,!0);break;case"yy":e=zt(We.FullYear,2,0,!0,!0);break;case"yyy":e=zt(We.FullYear,3,0,!1,!0);break;case"yyyy":e=zt(We.FullYear,4,0,!1,!0);break;case"Y":e=nf(1);break;case"YY":e=nf(2,!0);break;case"YYY":e=nf(3);break;case"YYYY":e=nf(4);break;case"M":case"L":e=zt(We.Month,1,1);break;case"MM":case"LL":e=zt(We.Month,2,1);break;case"MMM":e=pt(Ye.Months,ct.Abbreviated);break;case"MMMM":e=pt(Ye.Months,ct.Wide);break;case"MMMMM":e=pt(Ye.Months,ct.Narrow);break;case"LLL":e=pt(Ye.Months,ct.Abbreviated,Ln.Standalone);break;case"LLLL":e=pt(Ye.Months,ct.Wide,Ln.Standalone);break;case"LLLLL":e=pt(Ye.Months,ct.Narrow,Ln.Standalone);break;case"w":e=mv(1);break;case"ww":e=mv(2);break;case"W":e=mv(1,!0);break;case"d":e=zt(We.Date,1);break;case"dd":e=zt(We.Date,2);break;case"c":case"cc":e=zt(We.Day,1);break;case"ccc":e=pt(Ye.Days,ct.Abbreviated,Ln.Standalone);break;case"cccc":e=pt(Ye.Days,ct.Wide,Ln.Standalone);break;case"ccccc":e=pt(Ye.Days,ct.Narrow,Ln.Standalone);break;case"cccccc":e=pt(Ye.Days,ct.Short,Ln.Standalone);break;case"E":case"EE":case"EEE":e=pt(Ye.Days,ct.Abbreviated);break;case"EEEE":e=pt(Ye.Days,ct.Wide);break;case"EEEEE":e=pt(Ye.Days,ct.Narrow);break;case"EEEEEE":e=pt(Ye.Days,ct.Short);break;case"a":case"aa":case"aaa":e=pt(Ye.DayPeriods,ct.Abbreviated);break;case"aaaa":e=pt(Ye.DayPeriods,ct.Wide);break;case"aaaaa":e=pt(Ye.DayPeriods,ct.Narrow);break;case"b":case"bb":case"bbb":e=pt(Ye.DayPeriods,ct.Abbreviated,Ln.Standalone,!0);break;case"bbbb":e=pt(Ye.DayPeriods,ct.Wide,Ln.Standalone,!0);break;case"bbbbb":e=pt(Ye.DayPeriods,ct.Narrow,Ln.Standalone,!0);break;case"B":case"BB":case"BBB":e=pt(Ye.DayPeriods,ct.Abbreviated,Ln.Format,!0);break;case"BBBB":e=pt(Ye.DayPeriods,ct.Wide,Ln.Format,!0);break;case"BBBBB":e=pt(Ye.DayPeriods,ct.Narrow,Ln.Format,!0);break;case"h":e=zt(We.Hours,1,-12);break;case"hh":e=zt(We.Hours,2,-12);break;case"H":e=zt(We.Hours,1);break;case"HH":e=zt(We.Hours,2);break;case"m":e=zt(We.Minutes,1);break;case"mm":e=zt(We.Minutes,2);break;case"s":e=zt(We.Seconds,1);break;case"ss":e=zt(We.Seconds,2);break;case"S":e=zt(We.FractionalSeconds,1);break;case"SS":e=zt(We.FractionalSeconds,2);break;case"SSS":e=zt(We.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ef(Ks.Short);break;case"ZZZZZ":e=ef(Ks.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ef(Ks.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ef(Ks.Long);break;default:return null}return _v[t]=e,e}(u);l+=d?d(s,n,c):"''"===u?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Kh(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Js(t,e){const n=function r$(t){return Pn(t)[ft.LocaleId]}(t);if(Xh[n]??={},Xh[n][e])return Xh[n][e];let r="";switch(e){case"shortDate":r=Yh(t,pr.Short);break;case"mediumDate":r=Yh(t,pr.Medium);break;case"longDate":r=Yh(t,pr.Long);break;case"fullDate":r=Yh(t,pr.Full);break;case"shortTime":r=Zh(t,pr.Short);break;case"mediumTime":r=Zh(t,pr.Medium);break;case"longTime":r=Zh(t,pr.Long);break;case"fullTime":r=Zh(t,pr.Full);break;case"short":const s=Js(t,"shortTime"),i=Js(t,"shortDate");r=Jh(Qh(t,pr.Short),[s,i]);break;case"medium":const o=Js(t,"mediumTime"),a=Js(t,"mediumDate");r=Jh(Qh(t,pr.Medium),[o,a]);break;case"long":const c=Js(t,"longTime"),l=Js(t,"longDate");r=Jh(Qh(t,pr.Long),[c,l]);break;case"full":const u=Js(t,"fullTime"),d=Js(t,"fullDate");r=Jh(Qh(t,pr.Full),[u,d])}return r&&(Xh[n][e]=r),r}function Jh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function Zr(t,e,n="-",r,s){let i="";(t<0||s&&t<=0)&&(s?t=1-t:(t=-t,i=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),i+o}function zt(t,e,n=0,r=!1,s=!1){return function(i,o){let a=function y$(t,e){switch(t){case We.FullYear:return e.getFullYear();case We.Month:return e.getMonth();case We.Date:return e.getDate();case We.Hours:return e.getHours();case We.Minutes:return e.getMinutes();case We.Seconds:return e.getSeconds();case We.FractionalSeconds:return e.getMilliseconds();case We.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,i);if((n>0||a>-n)&&(a+=n),t===We.Hours)0===a&&-12===n&&(a=12);else if(t===We.FractionalSeconds)return function v$(t,e){return Zr(t,3).substring(0,e)}(a,e);const c=Dr(o,qt.MinusSign);return Zr(a,e,c,r,s)}}function pt(t,e,n=Ln.Format,r=!1){return function(s,i){return function w$(t,e,n,r,s,i){switch(n){case Ye.Months:return function o$(t,e,n){const r=Pn(t),i=Sr([r[ft.MonthsFormat],r[ft.MonthsStandalone]],e);return Sr(i,n)}(e,s,r)[t.getMonth()];case Ye.Days:return function i$(t,e,n){const r=Pn(t),i=Sr([r[ft.DaysFormat],r[ft.DaysStandalone]],e);return Sr(i,n)}(e,s,r)[t.getDay()];case Ye.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(i){const l=function u$(t){const e=Pn(t);return AM(e),(e[ft.ExtraData][2]||[]).map(r=>"string"==typeof r?gv(r):[gv(r[0]),gv(r[1])])}(e),u=function d$(t,e,n){const r=Pn(t);AM(r);const i=Sr([r[ft.ExtraData][0],r[ft.ExtraData][1]],e)||[];return Sr(i,n)||[]}(e,s,r),d=l.findIndex(h=>{if(Array.isArray(h)){const[f,p]=h,g=o>=f.hours&&a>=f.minutes,_=o<p.hours||o===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&_)return!0}else if(g||_)return!0}else if(h.hours===o&&h.minutes===a)return!0;return!1});if(-1!==d)return u[d]}return function s$(t,e,n){const r=Pn(t),i=Sr([r[ft.DayPeriodsFormat],r[ft.DayPeriodsStandalone]],e);return Sr(i,n)}(e,s,r)[o<12?0:1];case Ye.Eras:return function a$(t,e){return Sr(Pn(t)[ft.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,i,t,e,n,r)}}function ef(t){return function(e,n,r){const s=-1*r,i=Dr(n,qt.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(t){case Ks.Short:return(s>=0?"+":"")+Zr(o,2,i)+Zr(Math.abs(s%60),2,i);case Ks.ShortGMT:return"GMT"+(s>=0?"+":"")+Zr(o,1,i);case Ks.Long:return"GMT"+(s>=0?"+":"")+Zr(o,2,i)+":"+Zr(Math.abs(s%60),2,i);case Ks.Extended:return 0===r?"Z":(s>=0?"+":"")+Zr(o,2,i)+":"+Zr(Math.abs(s%60),2,i);default:throw new Error(`Unknown zone width "${t}"`)}}}const b$=0,tf=4;function NM(t){const e=t.getDay(),n=0===e?-3:tf-e;return Kh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function mv(t,e=!1){return function(n,r){let s;if(e){const i=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();s=1+Math.floor((o+i)/7)}else{const i=NM(n),o=function C$(t){const e=Kh(t,b$,1).getDay();return Kh(t,0,1+(e<=tf?tf:tf+7)-e)}(i.getFullYear()),a=i.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return Zr(s,t,Dr(r,qt.MinusSign))}}function nf(t,e=!1){return function(n,r){return Zr(NM(n).getFullYear(),t,Dr(r,qt.MinusSign),e)}}const _v={};function OM(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function kM(t){return t instanceof Date&&!isNaN(t.valueOf())}const Dv=/\s+/,LM=[];let VM=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=LM,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Dv):LM}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Dv):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const s=this.stateMap.get(n);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],s=n[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Dv).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static{this.\u0275fac=function(r){return new(r||t)(k(ur),k(Zs))}}static{this.\u0275dir=_e({type:t,selectors:[["","ngClass",""]],inputs:{klass:[yt.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();class B${constructor(e,n,r,s){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sf=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,s){this._viewContainer=n,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((s,i,o)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new B$(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,o),UM(a,s)}});for(let s=0,i=r.length;s<i;s++){const a=r.get(s).context;a.index=s,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(s=>{UM(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(k(qr),k(Ys),k(lv))}}static{this.\u0275dir=_e({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function UM(t,e){t.context.$implicit=e.item}let Ga=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new $$,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){BM("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){BM("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(k(qr),k(Ys))}}static{this.\u0275dir=_e({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})();class $${constructor(){this.$implicit=null,this.ngIf=null}}function BM(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Zt(e)}'.`)}const nH=new G(""),rH=new G("");let HM=(()=>{class t{constructor(n,r,s){this.locale=n,this.defaultTimezone=r,this.defaultOptions=s}transform(n,r,s,i){if(null==n||""===n||n!=n)return null;try{return _$(n,r??this.defaultOptions?.dateFormat??"mediumDate",i||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function Qr(t,e){return new O(2100,!1)}()}}static{this.\u0275fac=function(r){return new(r||t)(k(Qs,16),k(nH,24),k(rH,24))}}static{this.\u0275pipe=Zn({name:"date",type:t,pure:!0,standalone:!0})}}return t})(),zM=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({})}}return t})();const GM="browser";function WM(t){return"server"===t}let _H=(()=>{class t{static{this.\u0275prov=ne({token:t,providedIn:"root",factory:()=>function mH(t){return t===GM}(V(fo))?new vH(V(Cr),window):new wH})}}return t})();class vH{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function yH(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const i=s.shadowRoot;if(i){const o=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(o)return o}s=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,s=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],s-i[1])}}class wH{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class ZH extends Z3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Iv extends ZH{static makeCurrent(){!function Y3(t){SM??=t}(new Iv)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function QH(){return tu=tu||document.querySelector("base"),tu?tu.getAttribute("href"):null}();return null==n?null:function XH(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function j$(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[s,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,e)}}let tu=null,JH=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();const Av=new G("");let nx=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(s=>{s.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,s){return this._findPluginFor(r).addEventListener(n,r,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(he(Av),he(nt))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();class rx{constructor(e){this._doc=e}}const Nv="ng-app-id";let sx=(()=>{class t{constructor(n,r,s,i={}){this.doc=n,this.appId=r,this.nonce=s,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=WM(i),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(s=>s.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Nv}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(n,r){const s=this.styleRef;if(s.has(n)){const i=s.get(n);return i.usage+=r,i.usage}return s.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const s=this.styleNodesInDOM,i=s?.get(r);if(i?.parentNode===n)return s.delete(r),i.removeAttribute(Nv),i;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Nv,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){const s=this.getStyleElement(n,r),i=this.styleRef,o=i.get(r)?.elements;o?o.push(s):i.set(r,{elements:[s],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(he(Cr),he(Vd),he(VC,8),he(fo))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();const Ov={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kv=/%COMP%/g,rq=new G("",{providedIn:"root",factory:()=>!0});function ox(t,e){return e.map(n=>n.replace(kv,t))}let ax=(()=>{class t{constructor(n,r,s,i,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=WM(a),this.defaultRenderer=new Rv(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Lr.ShadowDom&&(r={...r,encapsulation:Lr.Emulated});const s=this.getOrCreateRenderer(n,r);return s instanceof lx?s.applyToHost(n):s instanceof Pv&&s.applyStyles(),s}getOrCreateRenderer(n,r){const s=this.rendererByCompId;let i=s.get(r.id);if(!i){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Lr.Emulated:i=new lx(c,l,r,this.appId,u,o,a,d);break;case Lr.ShadowDom:return new aq(c,l,n,r,o,a,this.nonce,d);default:i=new Pv(c,l,r,u,o,a,d)}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(he(nx),he(sx),he(Vd),he(rq),he(Cr),he(fo),he(nt),he(VC))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();class Rv{constructor(e,n,r,s){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ov[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(cx(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(cx(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new O(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,s){if(s){n=s+":"+n;const i=Ov[s];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const s=Ov[r];s?e.removeAttributeNS(s,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,s){s&(vi.DashCase|vi.Important)?e.style.setProperty(n,r,s&vi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&vi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Mi().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function cx(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class aq extends Rv{constructor(e,n,r,s,i,o,a,c){super(e,i,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ox(s.id,s.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Pv extends Rv{constructor(e,n,r,s,i,o,a,c){super(e,i,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=c?ox(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class lx extends Pv{constructor(e,n,r,s,i,o,a,c){const l=s+"-"+r.id;super(e,n,r,i,o,a,c,l),this.contentAttr=function sq(t){return"_ngcontent-%COMP%".replace(kv,t)}(l),this.hostAttr=function iq(t){return"_nghost-%COMP%".replace(kv,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let cq=(()=>{class t extends rx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s){return n.addEventListener(r,s,!1),()=>this.removeEventListener(n,r,s)}removeEventListener(n,r,s){return n.removeEventListener(r,s)}static{this.\u0275fac=function(r){return new(r||t)(he(Cr))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();const ux=["alt","control","meta","shift"],lq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uq={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let dq=(()=>{class t extends rx{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,s){const i=t.parseEventName(r),o=t.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mi().onAndCancel(n,i.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const i=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ux.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let s=lq[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(s=n.code,i="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),ux.forEach(o=>{o!==s&&(0,uq[o])(n)&&(i+=o+".")}),i+=s,i===r)}static eventCallback(n,r,s){return i=>{t.matchEventFullKeyCode(i,n)&&s.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(he(Cr))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();const hx=[{provide:fo,useValue:GM},{provide:LC,useValue:function hq(){Iv.makeCurrent()},multi:!0},{provide:Cr,useFactory:function pq(){return function QR(t){Kg=t}(document),document},deps:[]}],gq=HE(d3,"browser",hx),mq=new G(""),fx=[{provide:Fh,useClass:class KH{addToWindow(e){Xe.getAngularTestability=(r,s=!0)=>{const i=e.findTestabilityInTree(r,s);if(null==i)throw new O(5103,!1);return i},Xe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Xe.getAllAngularRootElements=()=>e.getAllRootElements(),Xe.frameworkStabilizers||(Xe.frameworkStabilizers=[]),Xe.frameworkStabilizers.push(r=>{const s=Xe.getAllAngularTestabilities();let i=s.length;const o=function(){i--,0==i&&r()};s.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Mi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:OE,useClass:Q_,deps:[nt,X_,Fh]},{provide:Q_,useClass:Q_,deps:[nt,X_,Fh]}],px=[{provide:pg,useValue:"root"},{provide:ms,useFactory:function fq(){return new ms},deps:[]},{provide:Av,useClass:cq,multi:!0,deps:[Cr,nt,fo]},{provide:Av,useClass:dq,multi:!0,deps:[Cr]},ax,sx,nx,{provide:o0,useExisting:ax},{provide:class bH{},useClass:JH,deps:[]},[]];let _q=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Vd,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||t)(he(mq,12))}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({providers:[...px,...fx],imports:[zM,h3]})}}return t})(),vq=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(he(Cr))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tr(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function it(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):function s(i){return i instanceof n?i:new n(function(o){o(i)})}(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function xi(t){return this instanceof xi?(this.v=t,this):new xi(t)}function wx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function jv(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){!function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}(a,c,(o=t[i](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const bx=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Cx(t){return ze(t?.then)}function Dx(t){return ze(t[zp])}function Sx(t){return Symbol.asyncIterator&&ze(t?.[Symbol.asyncIterator])}function Tx(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ex=function Wq(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Mx(t){return ze(t?.[Ex])}function xx(t){return function yx(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(t,e||[]),i=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(f){return function(p){return Promise.resolve(p).then(f,d)}}),s[Symbol.asyncIterator]=function(){return this},s;function a(f,p){r[f]&&(s[f]=function(g){return new Promise(function(_,m){i.push([f,g,_,m])>1||c(f,g)})},p&&(s[f]=p(s[f])))}function c(f,p){try{!function l(f){f.value instanceof xi?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}(r[f](p))}catch(g){h(i[0][3],g)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:s}=yield xi(n.read());if(s)return yield xi(void 0);yield yield xi(r)}}finally{n.releaseLock()}})}function Ix(t){return ze(t?.getReader)}function Cs(t){if(t instanceof cn)return t;if(null!=t){if(Dx(t))return function Yq(t){return new cn(e=>{const n=t[zp]();if(ze(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(bx(t))return function Zq(t){return new cn(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Cx(t))return function Qq(t){return new cn(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Uw)})}(t);if(Sx(t))return Ax(t);if(Mx(t))return function Xq(t){return new cn(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ix(t))return function Kq(t){return Ax(xx(t))}(t)}throw Tx(t)}function Ax(t){return new cn(e=>{(function Jq(t,e){var n,r,s,i;return it(this,void 0,void 0,function*(){try{for(n=wx(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function ei(t,e,n,r=0,s=!1){const i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function Nx(t,e=0){return fn((n,r)=>{n.subscribe(Yt(r,s=>ei(r,t,()=>r.next(s),e),()=>ei(r,t,()=>r.complete(),e),s=>ei(r,t,()=>r.error(s),e)))})}function Ox(t,e=0){return fn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function kx(t,e){if(!t)throw new Error("Iterable cannot be null");return new cn(n=>{ei(n,e,()=>{const r=t[Symbol.asyncIterator]();ei(n,e,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function un(t,e){return e?function i4(t,e){if(null!=t){if(Dx(t))return function e4(t,e){return Cs(t).pipe(Ox(e),Nx(e))}(t,e);if(bx(t))return function n4(t,e){return new cn(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Cx(t))return function t4(t,e){return Cs(t).pipe(Ox(e),Nx(e))}(t,e);if(Sx(t))return kx(t,e);if(Mx(t))return function r4(t,e){return new cn(n=>{let r;return ei(n,e,()=>{r=t[Ex](),ei(n,e,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){return void n.error(o)}i?n.complete():n.next(s)},0,!0)}),()=>ze(r?.return)&&r.return()})}(t,e);if(Ix(t))return function s4(t,e){return kx(xx(t),e)}(t,e)}throw Tx(t)}(t,e):Cs(t)}const{isArray:o4}=Array,{getPrototypeOf:a4,prototype:c4,keys:l4}=Object;function Rx(t){if(1===t.length){const e=t[0];if(o4(e))return{args:e,keys:null};if(function u4(t){return t&&"object"==typeof t&&a4(t)===c4}(e)){const n=l4(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Bv(t){return t[t.length-1]}function Px(t){return ze(Bv(t))?t.pop():void 0}function uf(t){return function d4(t){return t&&ze(t.schedule)}(Bv(t))?t.pop():void 0}const{isArray:h4}=Array;function Fx(t){return Je(e=>function f4(t,e){return h4(e)?t(...e):t(e)}(t,e))}function Lx(t,e){return t.reduce((n,r,s)=>(n[r]=e[s],n),{})}let Vx=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(k(Zs),k(ur))}}static{this.\u0275dir=_e({type:t})}}return t})(),Do=(()=>{class t extends Vx{static{this.\u0275fac=(()=>{let n;return function(s){return(n||(n=ln(t)))(s||t)}})()}static{this.\u0275dir=_e({type:t,features:[rt]})}}return t})();const Ds=new G(""),m4={provide:Ds,useExisting:ut(()=>ru),multi:!0},v4=new G("");let ru=(()=>{class t extends Vx{constructor(n,r,s){super(n,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _4(){const t=Mi()?Mi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(k(Zs),k(ur),k(v4,8))}}static{this.\u0275dir=_e({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&ue("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[Ct([m4]),rt]})}}return t})();const Sn=new G(""),Ai=new G("");function Zx(t){return null!=t}function Qx(t){return Wl(t)?un(t):t}function Xx(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Kx(t,e){return e.map(n=>n(t))}function Jx(t){return t.map(e=>function w4(t){return!t.validate}(e)?e:n=>e.validate(n))}function $v(t){return null!=t?function eI(t){if(!t)return null;const e=t.filter(Zx);return 0==e.length?null:function(n){return Xx(Kx(n,e))}}(Jx(t)):null}function Hv(t){return null!=t?function tI(t){if(!t)return null;const e=t.filter(Zx);return 0==e.length?null:function(n){return function p4(...t){const e=Px(t),{args:n,keys:r}=Rx(t),s=new cn(i=>{const{length:o}=n;if(!o)return void i.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let d=!1;Cs(n[u]).subscribe(Yt(i,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||i.next(r?Lx(r,a):a),i.complete())}))}});return e?s.pipe(Fx(e)):s}(Kx(n,e).map(Qx)).pipe(Je(Xx))}}(Jx(t)):null}function nI(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function qv(t){return t?Array.isArray(t)?t:[t]:[]}function hf(t,e){return Array.isArray(t)?t.includes(e):t===e}function iI(t,e){const n=qv(e);return qv(t).forEach(s=>{hf(n,s)||n.push(s)}),n}function oI(t,e){return qv(e).filter(n=>!hf(t,n))}class aI{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$v(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Vn extends aI{get formDirective(){return null}get path(){return null}}class Ni extends aI{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cI{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ff=(()=>{class t extends cI{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(k(Ni,2))}}static{this.\u0275dir=_e({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&Et("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[rt]})}}return t})();const su="VALID",gf="INVALID",Wa="PENDING",iu="DISABLED";function mf(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Zv{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===su}get invalid(){return this.status===gf}get pending(){return this.status==Wa}get disabled(){return this.status===iu}get enabled(){return this.status!==iu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(oI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(oI(e,this._rawAsyncValidators))}hasValidator(e){return hf(this._rawValidators,e)}hasAsyncValidator(e){return hf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=iu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=su,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===su||this.status===Wa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?iu:su}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wa,this._hasOwnPendingAsyncValidator=!0;const n=Qx(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,s)=>r&&r._find(s),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Nt,this.statusChanges=new Nt}_calculateStatus(){return this._allControlsDisabled()?iu:this.errors?gf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wa)?Wa:this._anyControlsHaveStatus(gf)?gf:su}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function T4(t){return Array.isArray(t)?$v(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function E4(t){return Array.isArray(t)?Hv(t):t||null}(this._rawAsyncValidators)}}const Ya=new G("CallSetDisabledState",{providedIn:"root",factory:()=>_f}),_f="always";function ou(t,e,n=_f){(function Xv(t,e){const n=function rI(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(nI(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function sI(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(nI(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const s=()=>t.updateValueAndValidity();wf(e._rawValidators,s),wf(e._rawAsyncValidators,s)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function I4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&hI(t,e)})}(t,e),function N4(t,e){const n=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function A4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&hI(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function x4(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function wf(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function hI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function gI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function mI(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const _I=class extends Zv{constructor(e=null,n,r){super(function Wv(t){return(mf(t)?t.validators:t)||null}(n),function Yv(t,e){return(mf(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=mI(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},j4={provide:Ni,useExisting:ut(()=>cu)},wI=Promise.resolve();let cu=(()=>{class t extends Ni{constructor(n,r,s,i,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new _I,this._registered=!1,this.name="",this.update=new Nt,this._parent=n,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function ey(t,e){if(!e)return null;let n,r,s;return Array.isArray(e),e.forEach(i=>{i.constructor===ru?n=i:function R4(t){return Object.getPrototypeOf(t.constructor)===Do}(i)?r=i:s=i}),s||r||n||null}(0,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function Jv(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ou(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){wI.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,s=0!==r&&function qa(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);wI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function vf(t,e){return[...e.path,t]}(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(k(Vn,9),k(Sn,10),k(Ai,10),k(Ds,10),k(Yl,8),k(Ya,8))}}static{this.\u0275dir=_e({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[yt.None,"disabled","isDisabled"],model:[yt.None,"ngModel","model"],options:[yt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ct([j4]),rt,wr]})}}return t})();const Q4={provide:Ds,useExisting:ut(()=>Cf),multi:!0};function xI(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Cf=(()=>{class t extends Do{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const s=xI(this._getOptionId(n),n);this.setProperty("value",s)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function X4(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(s){return(n||(n=ln(t)))(s||t)}})()}static{this.\u0275dir=_e({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){1&r&&ue("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ct([Q4]),rt]})}}return t})(),II=(()=>{class t{constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(xI(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(k(ur),k(Zs),k(Cf,9))}}static{this.\u0275dir=_e({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();const K4={provide:Ds,useExisting:ut(()=>iy),multi:!0};function AI(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let iy=(()=>{class t extends Do{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const s=n.map(i=>this._getOptionId(i));r=(i,o)=>{i._setSelected(s.indexOf(o.toString())>-1)}}else r=(s,i)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const s=[],i=r.selectedOptions;if(void 0!==i){const o=i;for(let a=0;a<o.length;a++){const l=this._getOptionValue(o[a].value);s.push(l)}}else{const o=r.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const l=this._getOptionValue(c.value);s.push(l)}}}this.value=s,n(s)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function J4(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(s){return(n||(n=ln(t)))(s||t)}})()}static{this.\u0275dir=_e({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){1&r&&ue("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ct([K4]),rt]})}}return t})(),NI=(()=>{class t{constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(AI(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(AI(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(k(ur),k(Zs),k(iy,9))}}static{this.\u0275dir=_e({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),c5=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({})}}return t})(),u5=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ya,useValue:n.callSetDisabledState??_f}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({imports:[c5]})}}return t})();function be(...t){return un(t,uf(t))}function ay(...t){const e=uf(t),n=Px(t),{args:r,keys:s}=Rx(t);if(0===r.length)return un([],e);const i=new cn(function h5(t,e,n=ro){return r=>{BI(e,()=>{const{length:s}=t,i=new Array(s);let o=s,a=s;for(let c=0;c<s;c++)BI(e,()=>{const l=un(t[c],e);let u=!1;l.subscribe(Yt(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,s?o=>Lx(s,o):ro));return n?i.pipe(Fx(n)):i}function BI(t,e,n){t?ei(n,t,e):e()}const Df=di(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Tn(t,e,n=1/0){return ze(e)?Tn((r,s)=>Je((i,o)=>e(r,i,s,o))(Cs(t(r,s))),n):("number"==typeof e&&(n=e),fn((r,s)=>function f5(t,e,n,r,s,i,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{i&&e.next(g),l++;let _=!1;Cs(n(g,u++)).subscribe(Yt(e,m=>{s?.(m),i?f(m):e.next(m)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){const m=c.shift();o?ei(e,o,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return t.subscribe(Yt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,s,t,n)))}function lu(t=1/0){return Tn(ro,t)}function cy(...t){return function p5(){return lu(1)}()(un(t,uf(t)))}function $I(t){return new cn(e=>{Cs(t()).subscribe(e)})}function Sf(t,e){const n=ze(t)?t:()=>t,r=s=>s.error(n());return new cn(e?s=>e.schedule(r,0,s):r)}const Ss=new cn(t=>t.complete());function ly(){return fn((t,e)=>{let n=null;t._refCount++;const r=Yt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const s=t._connection,i=n;n=null,s&&(!i||s===i)&&s.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class HI extends cn{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,qw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zn;const n=this.getSubject();e.add(this.source.subscribe(Yt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zn.EMPTY)}return e}refCount(){return ly()(this)}}function Ts(t,e){return fn((n,r)=>{let s=null,i=0,o=!1;const a=()=>o&&!s&&r.complete();n.subscribe(Yt(r,c=>{s?.unsubscribe();let l=0;const u=i++;Cs(t(c,u)).subscribe(s=Yt(r,d=>r.next(e?e(c,d,u,l++):d),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function ti(t){return t<=0?()=>Ss:fn((e,n)=>{let r=0;e.subscribe(Yt(n,s=>{++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function Oi(t,e){return fn((n,r)=>{let s=0;n.subscribe(Yt(r,i=>t.call(e,i,s++)&&r.next(i)))})}function Tf(t){return fn((e,n)=>{let r=!1;e.subscribe(Yt(n,s=>{r=!0,n.next(s)},()=>{r||n.next(t),n.complete()}))})}function qI(t=_5){return fn((e,n)=>{let r=!1;e.subscribe(Yt(n,s=>{r=!0,n.next(s)},()=>r?n.complete():n.error(t())))})}function _5(){return new Df}function To(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Oi((s,i)=>t(s,i,r)):ro,ti(1),n?Tf(e):qI(()=>new Df))}function uu(t,e){return ze(e)?Tn(t,e,1):Tn(t,1)}function jn(t,e,n){const r=ze(t)||e||n?{next:t,error:e,complete:n}:t;return r?fn((s,i)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;s.subscribe(Yt(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ro}function Za(t){return fn((e,n)=>{let i,r=null,s=!1;r=e.subscribe(Yt(n,void 0,void 0,o=>{i=Cs(t(o,Za(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):s=!0})),s&&(r.unsubscribe(),r=null,i.subscribe(n))})}function uy(t){return t<=0?()=>Ss:fn((e,n)=>{let r=[];e.subscribe(Yt(n,s=>{r.push(s),t<r.length&&r.shift()},()=>{for(const s of r)n.next(s);n.complete()},void 0,()=>{r=null}))})}function dy(t){return fn((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ae="primary",du=Symbol("RouteTitle");class D5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Qa(t){return new D5(t)}function S5(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const s={};for(let i=0;i<r.length;i++){const o=r[i],a=t[i];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:s}}function Es(t,e){const n=t?hy(t):void 0,r=e?hy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!zI(t[s],e[s]))return!1;return!0}function hy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function zI(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((s,i)=>r[i]===s)}return t===e}function GI(t){return t.length>0?t[t.length-1]:null}function ki(t){return function d5(t){return!!t&&(t instanceof cn||ze(t.lift)&&ze(t.subscribe))}(t)?t:Wl(t)?un(Promise.resolve(t)):be(t)}const E5={exact:function ZI(t,e,n){if(!Eo(t.segments,e.segments)||!Ef(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!ZI(t.children[r],e.children[r],n))return!1;return!0},subset:QI},WI={exact:function M5(t,e){return Es(t,e)},subset:function x5(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>zI(t[n],e[n]))},ignored:()=>!0};function YI(t,e,n){return E5[n.paths](t.root,e.root,n.matrixParams)&&WI[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function QI(t,e,n){return XI(t,e,e.segments,n)}function XI(t,e,n,r){if(t.segments.length>n.length){const s=t.segments.slice(0,n.length);return!(!Eo(s,n)||e.hasChildren()||!Ef(s,n,r))}if(t.segments.length===n.length){if(!Eo(t.segments,n)||!Ef(t.segments,n,r))return!1;for(const s in e.children)if(!t.children[s]||!QI(t.children[s],e.children[s],r))return!1;return!0}{const s=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(Eo(t.segments,s)&&Ef(t.segments,s,r)&&t.children[Ae])&&XI(t.children[Ae],e,i,r)}}function Ef(t,e,n){return e.every((r,s)=>WI[n](t[s].parameters,r.parameters))}class Xa{constructor(e=new ot([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){return N5.serialize(this)}}class ot{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mf(this)}}class hu{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qa(this.parameters),this._parameterMap}toString(){return eA(this)}}function Eo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Ka=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>new fy,providedIn:"root"})}}return t})();class fy{parse(e){const n=new $5(e);return new Xa(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${fu(e.root,!0)}`,r=function R5(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(s=>`${xf(n)}=${xf(s)}`).join("&"):`${xf(n)}=${xf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function O5(t){return encodeURI(t)}(e.fragment)}`:""}`}}const N5=new fy;function Mf(t){return t.segments.map(e=>eA(e)).join("/")}function fu(t,e){if(!t.hasChildren())return Mf(t);if(e){const n=t.children[Ae]?fu(t.children[Ae],!1):"",r=[];return Object.entries(t.children).forEach(([s,i])=>{s!==Ae&&r.push(`${s}:${fu(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function A5(t,e){let n=[];return Object.entries(t.children).forEach(([r,s])=>{r===Ae&&(n=n.concat(e(s,r)))}),Object.entries(t.children).forEach(([r,s])=>{r!==Ae&&(n=n.concat(e(s,r)))}),n}(t,(r,s)=>s===Ae?[fu(t.children[Ae],!1)]:[`${s}:${fu(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ae]?`${Mf(t)}/${n[0]}`:`${Mf(t)}/(${n.join("//")})`}}function KI(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xf(t){return KI(t).replace(/%3B/gi,";")}function py(t){return KI(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function If(t){return decodeURIComponent(t)}function JI(t){return If(t.replace(/\+/g,"%20"))}function eA(t){return`${py(t.path)}${function k5(t){return Object.entries(t).map(([e,n])=>`;${py(e)}=${py(n)}`).join("")}(t.parameters)}`}const P5=/^[^\/()?;#]+/;function gy(t){const e=t.match(P5);return e?e[0]:""}const F5=/^[^\/()?;=#]+/,V5=/^[^=?&#]+/,U5=/^[^&#]+/;class $5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ot([],{}):new ot([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ae]=new ot(e,n)),r}parseSegment(){const e=gy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new hu(If(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function L5(t){const e=t.match(F5);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=gy(this.remaining);s&&(r=s,this.capture(r))}e[If(n)]=If(r)}parseQueryParam(e){const n=function j5(t){const e=t.match(V5);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function B5(t){const e=t.match(U5);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const s=JI(n),i=JI(r);if(e.hasOwnProperty(s)){let o=e[s];Array.isArray(o)||(o=[o],e[s]=o),o.push(i)}else e[s]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=gy(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new O(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ae);const o=this.parseChildren();n[i]=1===Object.keys(o).length?o[Ae]:new ot([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}}function tA(t){return t.segments.length>0?new ot([],{[Ae]:t}):t}function nA(t){const e={};for(const[r,s]of Object.entries(t.children)){const i=nA(s);if(r===Ae&&0===i.segments.length&&i.hasChildren())for(const[o,a]of Object.entries(i.children))e[o]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function H5(t){if(1===t.numberOfChildren&&t.children[Ae]){const e=t.children[Ae];return new ot(t.segments.concat(e.segments),e.children)}return t}(new ot(t.segments,e))}function Ja(t){return t instanceof Xa}function rA(t){let e;const s=tA(function n(i){const o={};for(const c of i.children){const l=n(c);o[c.outlet]=l}const a=new ot(i.url,o);return i===t&&(e=a),a}(t.root));return e??s}function sA(t,e,n,r){let s=t;for(;s.parent;)s=s.parent;if(0===e.length)return my(s,s,s,n,r);const i=function z5(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new oA(!0,0,t);let e=0,n=!1;const r=t.reduce((s,i,o)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return"string"!=typeof i?[...s,i]:0===o?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&s.push(a))}),s):[...s,i]},[]);return new oA(n,e,r)}(e);if(i.toRoot())return my(s,s,new ot([],{}),n,r);const o=function G5(t,e,n){if(t.isAbsolute)return new Nf(e,!0,0);if(!n)return new Nf(e,!1,NaN);if(null===n.parent)return new Nf(n,!0,0);const r=Af(t.commands[0])?0:1;return function W5(t,e,n){let r=t,s=e,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new O(4005,!1);s=r.segments.length}return new Nf(r,!1,s-i)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(i,s,t),a=o.processChildren?gu(o.segmentGroup,o.index,i.commands):aA(o.segmentGroup,o.index,i.commands);return my(s,o.segmentGroup,a,n,r)}function Af(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function pu(t){return"object"==typeof t&&null!=t&&t.outlets}function my(t,e,n,r,s){let o,i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=t===e?n:iA(t,e,n);const a=tA(nA(o));return new Xa(a,i,s)}function iA(t,e,n){const r={};return Object.entries(t.children).forEach(([s,i])=>{r[s]=i===e?n:iA(i,e,n)}),new ot(t.segments,r)}class oA{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Af(r[0]))throw new O(4003,!1);const s=r.find(pu);if(s&&s!==GI(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nf{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function aA(t,e,n){if(t??=new ot([],{}),0===t.segments.length&&t.hasChildren())return gu(t,e,n);const r=function Z5(t,e,n){let r=0,s=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<t.segments.length;){if(r>=n.length)return i;const o=t.segments[s],a=n[r];if(pu(a))break;const c=`${a}`,l=r<n.length-1?n[r+1]:null;if(s>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!lA(c,l,o))return i;r+=2}else{if(!lA(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(t,e,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new ot(t.segments.slice(0,r.pathIndex),{});return i.children[Ae]=new ot(t.segments.slice(r.pathIndex),t.children),gu(i,0,s)}return r.match&&0===s.length?new ot(t.segments,{}):r.match&&!t.hasChildren()?_y(t,e,n):r.match?gu(t,0,s):_y(t,e,n)}function gu(t,e,n){if(0===n.length)return new ot(t.segments,{});{const r=function Y5(t){return pu(t[0])?t[0].outlets:{[Ae]:t}}(n),s={};if(Object.keys(r).some(i=>i!==Ae)&&t.children[Ae]&&1===t.numberOfChildren&&0===t.children[Ae].segments.length){const i=gu(t.children[Ae],e,n);return new ot(t.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(s[i]=aA(t.children[i],e,o))}),Object.entries(t.children).forEach(([i,o])=>{void 0===r[i]&&(s[i]=o)}),new ot(t.segments,s)}}function _y(t,e,n){const r=t.segments.slice(0,e);let s=0;for(;s<n.length;){const i=n[s];if(pu(i)){const c=Q5(i.outlets);return new ot(r,c)}if(0===s&&Af(n[0])){r.push(new hu(t.segments[e].path,cA(n[0]))),s++;continue}const o=pu(i)?i.outlets[Ae]:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&Af(a)?(r.push(new hu(o,cA(a))),s+=2):(r.push(new hu(o,{})),s++)}return new ot(r,{})}function Q5(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=_y(new ot([],{}),0,r))}),e}function cA(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function lA(t,e,n){return t==n.path&&Es(e,n.parameters)}const mu="imperative";var Be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Be||{});class Ms{constructor(e,n){this.id=e,this.url=n}}class Of extends Ms{constructor(e,n,r="imperative",s=null){super(e,n),this.type=Be.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ni extends Ms{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var gr=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(gr||{}),kf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(kf||{});class ec extends Ms{constructor(e,n,r,s){super(e,n),this.reason=r,this.code=s,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tc extends Ms{constructor(e,n,r,s){super(e,n),this.reason=r,this.code=s,this.type=Be.NavigationSkipped}}class Rf extends Ms{constructor(e,n,r,s){super(e,n),this.error=r,this.target=s,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uA extends Ms{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X5 extends Ms{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K5 extends Ms{constructor(e,n,r,s,i){super(e,n),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class J5 extends Ms{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e8 extends Ms{constructor(e,n,r,s){super(e,n),this.urlAfterRedirects=r,this.state=s,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t8{constructor(e){this.route=e,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class n8{constructor(e){this.route=e,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class r8{constructor(e){this.snapshot=e,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s8{constructor(e){this.snapshot=e,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i8{constructor(e){this.snapshot=e,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o8{constructor(e){this.snapshot=e,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dA{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Be.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vy{}class yy{constructor(e){this.url=e}}class a8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _u,this.attachRef=null}}let _u=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const s=this.getOrCreateContext(n);s.outlet=r,this.contexts.set(n,s)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new a8,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class hA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=wy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=wy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=by(e,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return by(e,this._root).map(n=>n.value)}}function wy(t,e){if(t===e.value)return e;for(const n of e.children){const r=wy(t,n);if(r)return r}return null}function by(t,e){if(t===e.value)return[e];for(const n of e.children){const r=by(t,n);if(r.length)return r.unshift(e),r}return[]}class Xr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function nc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class fA extends hA{constructor(e,n){super(e),this.snapshot=n,Sy(this,e)}toString(){return this.snapshot.toString()}}function pA(t){const e=function c8(t){const i=new Dy([],{},{},"",{},Ae,t,null,{});return new gA("",new Xr(i,[]))}(t),n=new Gn([new hu("",{})]),r=new Gn({}),s=new Gn({}),i=new Gn({}),o=new Gn(""),a=new rc(n,r,i,o,s,Ae,t,e.root);return a.snapshot=e.root,new fA(new Xr(a,[]),e)}class rc{constructor(e,n,r,s,i,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Je(l=>l[du]))??be(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Je(e=>Qa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Je(e=>Qa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cy(t,e,n="emptyOnly"){let r;const{routeConfig:s}=t;return r=null===e||"always"!==n&&""!==s?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...s?.data,...t._resolvedData}},s&&_A(s)&&(r.resolve[du]=s.title),r}class Dy{get title(){return this.data?.[du]}constructor(e,n,r,s,i,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qa(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gA extends hA{constructor(e,n){super(n),this.url=e,Sy(this,n)}toString(){return mA(this._root)}}function Sy(t,e){e.value._routerState=t,e.children.forEach(n=>Sy(t,n))}function mA(t){const e=t.children.length>0?` { ${t.children.map(mA).join(", ")} } `:"";return`${t.value}${e}`}function Ty(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Es(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Es(e.params,n.params)||t.paramsSubject.next(n.params),function T5(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Es(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Es(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ey(t,e){const n=Es(t.params,e.params)&&function I5(t,e){return Eo(t,e)&&t.every((n,r)=>Es(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Ey(t.parent,e.parent))}function _A(t){return"string"==typeof t.title||null===t.title}let My=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ae,this.activateEvents=new Nt,this.deactivateEvents=new Nt,this.attachEvents=new Nt,this.detachEvents=new Nt,this.parentContexts=V(_u),this.location=V(qr),this.changeDetector=V(Yl),this.environmentInjector=V(Qn),this.inputBinder=V(Pf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:s}=n.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=n;const s=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new xy(n,a,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=_e({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wr]})}}return t})();class xy{__ngOutletInjector(e){return new xy(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===rc?this.route:e===_u?this.childContexts:this.parent.get(e,n)}}const Pf=new G("");let vA=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,s=ay([r.queryParams,r.params,r.data]).pipe(Ts(([i,o,a],c)=>(a={...i,...o,...a},0===c?be(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function W3(t){const e=ke(t);if(!e)return null;const n=new Ml(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,s)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();function vu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const s=function u8(t,e,n){return e.children.map(r=>{for(const s of n.children)if(t.shouldReuseRoute(r.value,s.value.snapshot))return vu(t,r,s);return vu(t,r)})}(t,e,n);return new Xr(r,s)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>vu(t,a)),o}}const r=function d8(t){return new rc(new Gn(t.url),new Gn(t.params),new Gn(t.queryParams),new Gn(t.fragment),new Gn(t.data),t.outlet,t.component,t)}(e.value),s=e.children.map(i=>vu(t,i));return new Xr(r,s)}}const yA="ngNavigationCancelingError";function wA(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=bA(!1,gr.Redirect);return s.url=n,s.navigationBehaviorOptions=r,s}function bA(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[yA]=!0,n.cancellationCode=e,n}function CA(t){return!!t&&t[yA]}let DA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Us({type:t,selectors:[["ng-component"]],standalone:!0,features:[rE],decls:1,vars:0,template:function(r,s){1&r&&Di(0,"router-outlet")},dependencies:[My],encapsulation:2})}}return t})();function Iy(t){const e=t.children&&t.children.map(Iy),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ae&&(n.component=DA),n}function xs(t){return t.outlet||Ae}function yu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class y8{constructor(e,n,r,s,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Ty(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const s=nc(n);e.children.forEach(i=>{const o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const s=e.value,i=n?n.value:null;if(s===i)if(s.component){const o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=nc(e);for(const o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),s=r&&e.value.component?r.children:n,i=nc(e);for(const o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const s=nc(n);e.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new o8(i.value.snapshot))}),e.children.length&&this.forwardEvent(new s8(e.value.snapshot))}activateRoutes(e,n,r){const s=e.value,i=n?n.value:null;if(Ty(s),s===i)if(s.component){const o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(s.component){const o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ty(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=yu(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class SA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ff{constructor(e,n){this.component=e,this.route=n}}function w8(t,e,n){const r=t._root;return wu(r,e?e._root:null,n,[r.value])}function sc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function xO(t){return null!==sd(t)}(t)?e.get(t):t:r}function wu(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=nc(e);return t.children.forEach(o=>{(function C8(t,e,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const c=function D8(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Eo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Eo(t.url,e.url)||!Es(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ey(t,e)||!Es(t.queryParams,e.queryParams);default:return!Ey(t,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new SA(r)):(i.data=o.data,i._resolvedData=o._resolvedData),wu(t,e,i.component?a?a.children:null:n,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Ff(a.outlet.component,o))}else o&&bu(e,a,s),s.canActivateChecks.push(new SA(r)),wu(t,null,i.component?a?a.children:null:n,r,s)})(o,i[o.value.outlet],n,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>bu(a,n.getContext(o),s)),s}function bu(t,e,n){const r=nc(t),s=t.value;Object.entries(r).forEach(([i,o])=>{bu(o,s.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new Ff(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Cu(t){return"function"==typeof t}function TA(t){return t instanceof Df||"EmptyError"===t?.name}const Lf=Symbol("INITIAL_VALUE");function ic(){return Ts(t=>ay(t.map(e=>e.pipe(ti(1),function m5(...t){const e=uf(t);return fn((n,r)=>{(e?cy(t,n,e):cy(t,n)).subscribe(r)})}(Lf)))).pipe(Je(e=>{for(const n of e)if(!0!==n){if(n===Lf)return Lf;if(!1===n||n instanceof Xa)return n}return!0}),Oi(e=>e!==Lf),ti(1)))}function EA(t){return function vO(...t){return Bw(t)}(jn(e=>{if(Ja(e))throw wA(0,e)}),Je(e=>!0===e))}class Ay{constructor(e){this.segmentGroup=e||null}}class Ny extends Error{constructor(e){super(),this.urlTree=e}}function oc(t){return Sf(new Ay(t))}class $8{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],s=n.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return be(r);if(s.numberOfChildren>1||!s.children[Ae])return Sf(new O(4e3,!1));s=s.children[Ae]}}applyRedirectCommands(e,n,r){const s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ny(s);return s}applyRedirectCreateUrlTree(e,n,r,s){const i=this.createSegmentGroup(e,n.root,r,s);return new Xa(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([s,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,s){const i=this.createSegments(e,n.segments,r,s);let o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,s)}),new ot(i,o)}createSegments(e,n,r,s){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,s):this.findOrReturn(i,r))}findPosParam(e,n,r){const s=r[n.path.substring(1)];if(!s)throw new O(4001,!1);return s}findOrReturn(e,n){let r=0;for(const s of n){if(s.path===e.path)return n.splice(r),s;r++}return e}}const Oy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function H8(t,e,n,r,s){const i=ky(t,e,n);return i.matched?(r=function f8(t,e){return t.providers&&!t._injector&&(t._injector=mh(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function j8(t,e,n,r){const s=e.canMatch;return s&&0!==s.length?be(s.map(o=>{const a=sc(o,t);return ki(function I8(t){return t&&Cu(t.canMatch)}(a)?a.canMatch(e,n):$s(t,()=>a(e,n)))})).pipe(ic(),EA()):be(!0)}(r,e,n).pipe(Je(o=>!0===o?i:{...Oy}))):be(i)}function ky(t,e,n){if("**"===e.path)return function q8(t){return{matched:!0,parameters:t.length>0?GI(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Oy}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const s=(e.matcher||S5)(n,t,e);if(!s)return{...Oy};const i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const o=s.consumed.length>0?{...i,...s.consumed[s.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function MA(t,e,n,r){return n.length>0&&function W8(t,e,n){return n.some(r=>Vf(t,e,r)&&xs(r)!==Ae)}(t,n,r)?{segmentGroup:new ot(e,G8(r,new ot(n,t.children))),slicedSegments:[]}:0===n.length&&function Y8(t,e,n){return n.some(r=>Vf(t,e,r))}(t,n,r)?{segmentGroup:new ot(t.segments,z8(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ot(t.segments,t.children),slicedSegments:n}}function z8(t,e,n,r){const s={};for(const i of n)if(Vf(t,e,i)&&!r[xs(i)]){const o=new ot([],{});s[xs(i)]=o}return{...r,...s}}function G8(t,e){const n={};n[Ae]=e;for(const r of t)if(""===r.path&&xs(r)!==Ae){const s=new ot([],{});n[xs(r)]=s}return n}function Vf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class X8{}class ez{constructor(e,n,r,s,i,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new $8(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new O(4002,`'${e.segmentGroup}'`)}recognize(){const e=MA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Je(n=>{const r=new Dy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ae,this.rootComponentType,null,{}),s=new Xr(r,n),i=new gA("",s),o=function q5(t,e,n=null,r=null){return sA(rA(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(i._root,null),{state:i,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Ae).pipe(Za(r=>{if(r instanceof Ny)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ay?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,s=Cy(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(s.params),r.data=Object.freeze(s.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,n,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,s,!0).pipe(Je(i=>i instanceof Xr?[i]:[]))}processChildren(e,n,r){const s=[];for(const i of Object.keys(r.children))"primary"===i?s.unshift(i):s.push(i);return un(s).pipe(uu(i=>{const o=r.children[i],a=function _8(t,e){const n=t.filter(r=>xs(r)===e);return n.push(...t.filter(r=>xs(r)!==e)),n}(n,i);return this.processSegmentGroup(e,a,o,i)}),function y5(t,e){return fn(function v5(t,e,n,r,s){return(i,o)=>{let a=n,c=e,l=0;i.subscribe(Yt(o,u=>{const d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},s&&(()=>{a&&o.next(c),o.complete()})))}}(t,e,arguments.length>=2,!0))}((i,o)=>(i.push(...o),i)),Tf(null),function w5(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Oi((s,i)=>t(s,i,r)):ro,uy(1),n?Tf(e):qI(()=>new Df))}(),Tn(i=>{if(null===i)return oc(r);const o=xA(i);return function tz(t){t.sort((e,n)=>e.value.outlet===Ae?-1:n.value.outlet===Ae?1:e.value.outlet.localeCompare(n.value.outlet))}(o),be(o)}))}processSegment(e,n,r,s,i,o){return un(n).pipe(uu(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,s,i,o).pipe(Za(c=>{if(c instanceof Ay)return be(null);throw c}))),To(a=>!!a),Za(a=>{if(TA(a))return function Q8(t,e,n){return 0===e.length&&!t.children[n]}(r,s,i)?be(new X8):oc(r);throw a}))}processSegmentAgainstRoute(e,n,r,s,i,o,a){return function Z8(t,e,n,r){return!!(xs(t)===r||r!==Ae&&Vf(e,n,t))&&ky(e,t,n).matched}(r,s,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,i,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,s,n,r,i,o):oc(s):oc(s)}expandSegmentAgainstRouteUsingRedirect(e,n,r,s,i,o){const{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=ky(n,s,i);if(!a)return oc(n);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const d=this.applyRedirects.applyRedirectCommands(c,s.redirectTo,l);return this.applyRedirects.lineralizeSegments(s,d).pipe(Tn(h=>this.processSegment(e,r,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,s,i){const o=H8(n,r,s,e);return"**"===r.path&&(n.children={}),o.pipe(Ts(a=>a.matched?this.getChildConfig(e=r._injector??e,r,s).pipe(Ts(({routes:c})=>{const l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Dy(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function rz(t){return t.data||{}}(r),xs(r),r.component??r._loadedComponent??null,r,function sz(t){return t.resolve||{}}(r)),{segmentGroup:p,slicedSegments:g}=MA(n,u,d,c);if(0===g.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(Je(m=>null===m?null:new Xr(f,m)));if(0===c.length&&0===g.length)return be(new Xr(f,[]));const _=xs(r)===i;return this.processSegment(l,c,p,g,_?Ae:i,!0).pipe(Je(m=>new Xr(f,m instanceof Xr?[m]:[])))})):oc(n)))}getChildConfig(e,n,r){return n.children?be({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?be({routes:n._loadedRoutes,injector:n._loadedInjector}):function V8(t,e,n,r){const s=e.canLoad;return void 0===s||0===s.length?be(!0):be(s.map(o=>{const a=sc(o,t);return ki(function T8(t){return t&&Cu(t.canLoad)}(a)?a.canLoad(e,n):$s(t,()=>a(e,n)))})).pipe(ic(),EA())}(e,n,r).pipe(Tn(s=>s?this.configLoader.loadChildren(e,n).pipe(jn(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function B8(t){return Sf(bA(!1,gr.GuardRejected))}())):be({routes:[],injector:e})}}function nz(t){const e=t.value.routeConfig;return e&&""===e.path}function xA(t){const e=[],n=new Set;for(const r of t){if(!nz(r)){e.push(r);continue}const s=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==s?(s.children.push(...r.children),n.add(s)):e.push(r)}for(const r of n){const s=xA(r.children);e.push(new Xr(r.value,s))}return e.filter(r=>!n.has(r))}function IA(t){const e=t.children.map(n=>IA(n)).flat();return[t,...e]}function Ry(t){return Ts(e=>{const n=t(e);return n?un(n).pipe(Je(()=>e)):be(e)})}let AA=(()=>{class t{buildTitle(n){let r,s=n.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===Ae);return r}getResolvedTitleForRoute(n){return n.data[du]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>V(uz),providedIn:"root"})}}return t})(),uz=(()=>{class t extends AA{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(he(vq))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const ac=new G("",{providedIn:"root",factory:()=>({})}),cc=new G("");let Py=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(LE)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return be(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ki(n.loadComponent()).pipe(Je(NA),jn(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),dy(()=>{this.componentLoaders.delete(n)})),s=new HI(r,()=>new yr).pipe(ly());return this.componentLoaders.set(n,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return be({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function dz(t,e,n,r){return ki(t.loadChildren()).pipe(Je(NA),Tn(s=>s instanceof Q0||Array.isArray(s)?be(s):un(e.compileModuleAsync(s))),Je(s=>{r&&r(t);let i,o,a=!1;return Array.isArray(s)?(o=s,!0):(i=s.create(n).injector,o=i.get(cc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Iy),injector:i}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(dy(()=>{this.childrenLoaders.delete(r)})),o=new HI(i,()=>new yr).pipe(ly());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function NA(t){return function hz(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Fy=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>V(fz),providedIn:"root"})}}return t})(),fz=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const OA=new G(""),kA=new G("");function pz(t,e,n){const r=t.get(kA),s=t.get(Cr);return t.get(nt).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i;const o=new Promise(l=>{i=l}),a=s.startViewTransition(()=>(i(),function gz(t){return new Promise(e=>{Xm(e,{injector:t})})}(t))),{onViewTransitionCreated:c}=r;return c&&$s(t,()=>c({transition:a,from:e,to:n})),o})}let jf=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yr,this.transitionAbortSubject=new yr,this.configLoader=V(Py),this.environmentInjector=V(Qn),this.urlSerializer=V(Ka),this.rootContexts=V(_u),this.location=V(Xl),this.inputBindingEnabled=null!==V(Pf,{optional:!0}),this.titleStrategy=V(AA),this.options=V(ac,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(Fy),this.createViewTransition=V(OA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>be(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new n8(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new t8(s))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,s){return this.transitions=new Gn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Oi(i=>0!==i.id),Je(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ts(i=>{let o=!1,a=!1;return be(i).pipe(Ts(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",gr.SupersededByNewNavigation),Ss;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const d="";return this.events.next(new tc(c.id,this.urlSerializer.serialize(c.rawUrl),d,kf.IgnoredSameUrlNavigation)),c.resolve(null),Ss}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return be(c).pipe(Ts(d=>{const h=this.transitions?.getValue();return this.events.next(new Of(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Ss:Promise.resolve(d)}),function iz(t,e,n,r,s,i){return Tn(o=>function K8(t,e,n,r,s,i,o="emptyOnly"){return new ez(t,e,n,r,s,o,i).recognize()}(t,e,n,r,o.extractedUrl,s,i).pipe(Je(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),jn(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new uA(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=c,_=new Of(d,this.urlSerializer.serialize(h),f,p);this.events.next(_);const m=pA(this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:m,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,be(i)}{const d="";return this.events.next(new tc(c.id,this.urlSerializer.serialize(c.extractedUrl),d,kf.IgnoredByUrlHandlingStrategy)),c.resolve(null),Ss}}),jn(c=>{const l=new X5(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Je(c=>(this.currentTransition=i={...c,guards:w8(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function A8(t,e){return Tn(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?be({...n,guardsResult:!0}):function N8(t,e,n,r){return un(t).pipe(Tn(s=>function L8(t,e,n,r,s){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?be(i.map(a=>{const c=yu(e)??s,l=sc(a,c);return ki(function x8(t){return t&&Cu(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):$s(c,()=>l(t,e,n,r))).pipe(To())})).pipe(ic()):be(!0)}(s.component,s.route,n,e,r)),To(s=>!0!==s,!0))}(o,r,s,t).pipe(Tn(a=>a&&function S8(t){return"boolean"==typeof t}(a)?function O8(t,e,n,r){return un(e).pipe(uu(s=>cy(function R8(t,e){return null!==t&&e&&e(new r8(t)),be(!0)}(s.route.parent,r),function k8(t,e){return null!==t&&e&&e(new i8(t)),be(!0)}(s.route,r),function F8(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>function b8(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>$I(()=>be(o.guards.map(c=>{const l=yu(o.node)??n,u=sc(c,l);return ki(function M8(t){return t&&Cu(t.canActivateChild)}(u)?u.canActivateChild(r,t):$s(l,()=>u(r,t))).pipe(To())})).pipe(ic())));return be(i).pipe(ic())}(t,s.path,n),function P8(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return be(!0);const s=r.map(i=>$I(()=>{const o=yu(e)??n,a=sc(i,o);return ki(function E8(t){return t&&Cu(t.canActivate)}(a)?a.canActivate(e,t):$s(o,()=>a(e,t))).pipe(To())}));return be(s).pipe(ic())}(t,s.route,n))),To(s=>!0!==s,!0))}(r,i,t,e):be(a)),Je(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),jn(c=>{if(i.guardsResult=c.guardsResult,Ja(c.guardsResult))throw wA(0,c.guardsResult);const l=new K5(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Oi(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",gr.GuardRejected),!1)),Ry(c=>{if(c.guards.canActivateChecks.length)return be(c).pipe(jn(l=>{const u=new J5(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ts(l=>{let u=!1;return be(l).pipe(function oz(t,e){return Tn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=n;if(!s.length)return be(n);const i=new Set(s.map(c=>c.route)),o=new Set;for(const c of i)if(!o.has(c))for(const l of IA(c))o.add(l);let a=0;return un(o).pipe(uu(c=>i.has(c)?function az(t,e,n,r){const s=t.routeConfig,i=t._resolve;return void 0!==s?.title&&!_A(s)&&(i[du]=s.title),function cz(t,e,n,r){const s=hy(t);if(0===s.length)return be({});const i={};return un(s).pipe(Tn(o=>function lz(t,e,n,r){const s=yu(e)??r,i=sc(t,s);return ki(i.resolve?i.resolve(e,n):$s(s,()=>i(e,n)))}(t[o],e,n,r).pipe(To(),jn(a=>{i[o]=a}))),uy(1),function b5(t){return Je(()=>t)}(i),Za(o=>TA(o)?Ss:Sf(o)))}(i,t,e,r).pipe(Je(o=>(t._resolvedData=o,t.data=Cy(t,t.parent,n).resolve,null)))}(c,r,t,e):(c.data=Cy(c,c.parent,t).resolve,be(void 0))),jn(()=>a++),uy(1),Tn(c=>a===o.size?be(n):Ss))})}(this.paramsInheritanceStrategy,this.environmentInjector),jn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",gr.NoDataFromResolver)}}))}),jn(l=>{const u=new e8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Ry(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(jn(h=>{u.component=h}),Je(()=>{})));for(const h of u.children)d.push(...l(h));return d};return ay(l(c.targetSnapshot.root)).pipe(Tf(null),ti(1))}),Ry(()=>this.afterPreactivation()),Ts(()=>{const{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?un(u).pipe(Je(()=>i)):be(i)}),Je(c=>{const l=function l8(t,e,n){const r=vu(t,e._root,n?n._root:void 0);return new fA(r,e)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,i}),jn(()=>{this.events.next(new vy)}),((t,e,n,r)=>Je(s=>(new y8(e,s.targetRouterState,s.currentRouterState,n,r).activate(t),s)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ti(1),jn({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ni(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),function C5(t){return fn((e,n)=>{Cs(t).subscribe(Yt(n,()=>n.complete(),jp)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(jn(c=>{throw c}))),dy(()=>{!o&&!a&&this.cancelNavigationTransition(i,"",gr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Za(c=>{if(a=!0,CA(c))this.events.next(new ec(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function h8(t){return CA(t)&&Ja(t.url)}(c)?this.events.next(new yy(c.url)):i.resolve(!1);else{this.events.next(new Rf(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(n.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Ss}))}))}cancelNavigationTransition(n,r,s){const i=new ec(n.id,this.urlSerializer.serialize(n.extractedUrl),r,s);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function mz(t){return t!==mu}let _z=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>V(yz),providedIn:"root"})}}return t})();class vz{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let yz=(()=>{class t extends vz{static{this.\u0275fac=(()=>{let n;return function(s){return(n||(n=ln(t)))(s||t)}})()}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),RA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:()=>V(wz),providedIn:"root"})}}return t})(),wz=(()=>{class t extends RA{constructor(){super(...arguments),this.location=V(Xl),this.urlSerializer=V(Ka),this.options=V(ac,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(Fy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xa,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=pA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Of)this.stateMemento=this.createStateMemento();else if(n instanceof tc)this.rawUrlTree=r.initialUrl;else if(n instanceof uA){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else n instanceof vy?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof ec&&(n.code===gr.GuardRejected||n.code===gr.NoDataFromResolver)?this.restoreHistory(r):n instanceof Rf?this.restoreHistory(r,!0):n instanceof ni&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const s=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",o)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",i)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===n.finalUrl&&0===i&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(s){return(n||(n=ln(t)))(s||t)}})()}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Du=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Du||{});function PA(t,e){t.events.pipe(Oi(n=>n instanceof ni||n instanceof ec||n instanceof Rf||n instanceof tc),Je(n=>n instanceof ni||n instanceof tc?Du.COMPLETE:n instanceof ec&&(n.code===gr.Redirect||n.code===gr.SupersededByNewNavigation)?Du.REDIRECTING:Du.FAILED),Oi(n=>n!==Du.REDIRECTING),ti(1)).subscribe(()=>{e()})}function bz(t){throw t}const Cz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let En=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(ME),this.stateManager=V(RA),this.options=V(ac,{optional:!0})||{},this.pendingTasks=V(Ca),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(jf),this.urlSerializer=V(Ka),this.location=V(Xl),this.urlHandlingStrategy=V(Fy),this._events=new yr,this.errorHandler=this.options.errorHandler||bz,this.navigated=!1,this.routeReuseStrategy=V(_z),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(cc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Pf,{optional:!0}),this.eventsSubscription=new zn,this.isNgZoneEnabled=V(nt)instanceof nt&&nt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(null!==s&&null!==i)if(this.stateManager.handleRouterEvent(r,i),r instanceof ec&&r.code!==gr.Redirect&&r.code!==gr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ni)this.navigated=!0;else if(r instanceof yy){const o=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),a={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mz(s.source)};this.scheduleNavigation(o,mu,null,a,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function Tz(t){return!(t instanceof vy||t instanceof yy)})(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,s){const i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){const c={...s};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Iy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}null!==u&&(u=this.removeEmptyProps(u));try{d=rA(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return sA(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const s=Ja(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,mu,null,r)}navigate(n,r={skipLocationChange:!1}){return function Sz(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new O(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let s;if(s=!0===r?{...Cz}:!1===r?{...Dz}:r,Ja(n))return YI(this.currentUrlTree,n,s);const i=this.parseUrl(n);return YI(this.currentUrlTree,i,s)}removeEmptyProps(n){return Object.entries(n).reduce((r,[s,i])=>(null!=i&&(r[s]=i),r),{})}scheduleNavigation(n,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return PA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class FA{}let xz=(()=>{class t{constructor(n,r,s,i,o){this.router=n,this.injector=s,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Oi(n=>n instanceof ni),uu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const s=[];for(const i of r){i.providers&&!i._injector&&(i._injector=mh(i.providers,n,`Route: ${i.path}`));const o=i._injector??n,a=i._loadedInjector??o;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&s.push(this.preloadConfig(o,i)),(i.children||i._loadedRoutes)&&s.push(this.processRoutes(a,i.children??i._loadedRoutes))}return un(s).pipe(lu())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):be(null);const i=s.pipe(Tn(o=>null===o?be(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?un([i,this.loader.loadComponent(r)]).pipe(lu()):i})}static{this.\u0275fac=function(r){return new(r||t)(he(En),he(LE),he(Qn),he(FA),he(Py))}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Vy=new G("");let LA=(()=>{class t{constructor(n,r,s,i,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=s,this.zone=i,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=V(Qn),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Of?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ni?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof tc&&n.code===kf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof dA&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){var s=this;this.zone.runOutsideAngular(q(function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Xm(()=>{i()},{injector:s.environmentInjector})}),s.zone.run(()=>{s.transitions.events.next(new dA(n,"popstate"===s.lastSource?s.store[s.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function AD(){throw new Error("invalid")}()}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac})}}return t})();function Is(t,e){return{\u0275kind:t,\u0275providers:e}}function jA(){const t=V(Rn);return e=>{const n=t.get(Ti);if(e!==n.components[0])return;const r=t.get(En),s=t.get(UA);1===t.get(jy)&&r.initialNavigation(),t.get(BA,null,Pe.Optional)?.setUpPreloading(),t.get(Vy,null,Pe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const UA=new G("",{factory:()=>new yr}),jy=new G("",{providedIn:"root",factory:()=>1}),BA=new G("");function Oz(t){return Is(0,[{provide:BA,useExisting:xz},{provide:FA,useExisting:t}])}function Rz(t){return Is(9,[{provide:OA,useValue:pz},{provide:kA,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const $A=new G("ROUTER_FORROOT_GUARD"),Pz=[Xl,{provide:Ka,useClass:fy},En,_u,{provide:rc,useFactory:function VA(t){return t.routerState.root},deps:[En]},Py,[]];let HA=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Pz,[],{provide:cc,multi:!0,useValue:n},{provide:$A,useFactory:jz,deps:[[En,new ld,new ud]]},{provide:ac,useValue:r||{}},r?.useHash?{provide:Co,useClass:K3}:{provide:Co,useClass:MM},{provide:Vy,useFactory:()=>{const t=V(_H),e=V(nt),n=V(ac),r=V(jf),s=V(Ka);return n.scrollOffset&&t.setOffset(n.scrollOffset),new LA(s,r,t,e,n)}},r?.preloadingStrategy?Oz(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Uz(r):[],r?.bindToComponentInputs?Is(8,[vA,{provide:Pf,useExisting:vA}]).\u0275providers:[],r?.enableViewTransitions?Rz().\u0275providers:[],[{provide:qA,useFactory:jA},{provide:tv,multi:!0,useExisting:qA}]]}}static forChild(n){return{ngModule:t,providers:[{provide:cc,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(he($A,8))}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({})}}return t})();function jz(t){return"guarded"}function Uz(t){return["disabled"===t.initialNavigation?Is(3,[{provide:J_,multi:!0,useFactory:()=>{const e=V(En);return()=>{e.setUpLocationChangeListener()}}},{provide:jy,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Is(2,[{provide:jy,useValue:0},{provide:J_,multi:!0,deps:[Rn],useFactory:e=>{const n=e.get(Q3,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const s=e.get(En),i=e.get(UA);PA(s,()=>{r(!0)}),e.get(jf).afterPreactivation=()=>(r(!0),i.closed?be(void 0):i),s.initialNavigation()}))}}]).\u0275providers:[]]}const qA=new G("");var x=function(t){return t.EASY="easy",t.MEDIUM="medium",t.HARD="hard",t.MASTERY="mastery",t}(x||{});let lc=(()=>{class t{constructor(){this.users=new Gn([]),this.currentUser=new Gn(null),this.USERS_KEY="users",this.CURRENT_USER_KEY="currentUser",this.loadUsers()}getUsers(){return this.users.asObservable()}getCurrentUser(){return this.currentUser.asObservable()}createUser(n){const s=["Unison","Minor Second","Major Second","Minor Third","Major Third","Perfect Fourth","Tritone","Perfect Fifth","Minor Sixth","Major Sixth","Minor Seventh","Major Seventh","Octave"].map(a=>({interval:a,attempts:0,correctAttempts:0,lastPracticed:new Date})),i={id:this.generateUserId(),name:n,createdAt:new Date,lastActive:new Date,intervalTraining:{progress:s,totalExercisesCompleted:0,lastSessionDate:new Date,proficiencyLevel:x.EASY,easyIntervalAccuracy:0,mediumIntervalAccuracy:0,hardIntervalAccuracy:0}};return this.users.next([...this.users.value,i]),this.saveUsers(),i}setCurrentUser(n){this.currentUser.next(n),n&&(n.lastActive=new Date,this.saveUsers())}deleteUser(n){this.users.next(this.users.value.filter(s=>s.id!==n)),this.saveUsers(),this.currentUser.value?.id===n&&this.setCurrentUser(null)}updateUser(n){const r=this.users.value.findIndex(s=>s.id===n.id);if(-1!==r){const s=this.users.value,i=[...s.slice(0,r),{...n,lastActive:new Date},...s.slice(r+1)];this.users.next(i),this.saveUsers(),this.currentUser.value?.id===n.id&&(this.currentUser.next(i[r]),localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify(i[r])))}}loadUsers(){const n=localStorage.getItem(this.USERS_KEY);if(n){const s=JSON.parse(n).map(i=>({...i,createdAt:new Date(i.createdAt),lastActive:new Date(i.lastActive),intervalTraining:i.intervalTraining?{...i.intervalTraining,lastSessionDate:new Date(i.intervalTraining.lastSessionDate),progress:i.intervalTraining.progress.map(o=>({...o,lastPracticed:new Date(o.lastPracticed)})),proficiencyLevel:i.intervalTraining.proficiencyLevel||x.EASY,easyIntervalAccuracy:i.intervalTraining.easyIntervalAccuracy||0,mediumIntervalAccuracy:i.intervalTraining.mediumIntervalAccuracy||0,hardIntervalAccuracy:i.intervalTraining.hardIntervalAccuracy||0}:null}));this.users.next(s)}const r=localStorage.getItem(this.CURRENT_USER_KEY);if(r){const s=JSON.parse(r);this.currentUser.next({...s,createdAt:new Date(s.createdAt),lastActive:new Date(s.lastActive),intervalTraining:s.intervalTraining?{...s.intervalTraining,lastSessionDate:new Date(s.intervalTraining.lastSessionDate),progress:s.intervalTraining.progress.map(i=>({...i,lastPracticed:new Date(i.lastPracticed)})),proficiencyLevel:s.intervalTraining.proficiencyLevel||x.EASY,easyIntervalAccuracy:s.intervalTraining.easyIntervalAccuracy||0,mediumIntervalAccuracy:s.intervalTraining.mediumIntervalAccuracy||0,hardIntervalAccuracy:s.intervalTraining.hardIntervalAccuracy||0}:null})}}saveUsers(){localStorage.setItem(this.USERS_KEY,JSON.stringify(this.users.value))}generateUserId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function $z(t,e){1&t&&(D(0,"div",7)(1,"div",8),I(2," Please create or select a profile before accessing settings "),E()())}let Hz=(()=>{class t{constructor(n,r){this.userService=n,this.router=r,this.showError=!1}startTraining(){this.userService.getCurrentUser().pipe(ti(1)).subscribe(n=>{if(!n)return this.showError=!0,void setTimeout(()=>{this.showError=!1},3e3);this.router.navigate(["/training"])})}viewProgress(){this.userService.getCurrentUser().pipe(ti(1)).subscribe(n=>{if(!n)return this.showError=!0,void setTimeout(()=>{this.showError=!1},3e3);this.router.navigate(["/progress"])})}openSettings(){this.userService.getCurrentUser().pipe(ti(1)).subscribe(n=>{if(!n)return this.showError=!0,void setTimeout(()=>{this.showError=!1},3e3);this.router.navigate(["/settings"])})}static{this.\u0275fac=function(r){return new(r||t)(k(lc),k(En))}}static{this.\u0275cmp=Us({type:t,selectors:[["app-welcome"]],decls:20,vars:1,consts:[[1,"welcome-container"],["class","error-toast",4,"ngIf"],[1,"welcome-content"],[1,"subtitle"],[1,"menu-options"],[1,"menu-button",3,"click"],[1,"icon"],[1,"error-toast"],[1,"error-message"]],template:function(r,s){1&r&&(D(0,"div",0),Ot(1,$z,3,0,"div",1),D(2,"div",2)(3,"h1"),I(4,"Welcome to Ear Training Tutor"),E(),D(5,"p",3),I(6,"Your personal companion for developing perfect pitch and musical ear"),E(),D(7,"div",4)(8,"button",5),ue("click",function(){return s.startTraining()}),D(9,"span",6),I(10,"\u{1f3b5}"),E(),I(11," Start Training "),E(),D(12,"button",5),ue("click",function(){return s.viewProgress()}),D(13,"span",6),I(14,"\u{1f4ca}"),E(),I(15," View Progress "),E(),D(16,"button",5),ue("click",function(){return s.openSettings()}),D(17,"span",6),I(18,"\u2699\ufe0f"),E(),I(19," Settings "),E()()()()),2&r&&(P(),Oe("ngIf",s.showError))},dependencies:[Ga],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem;position:relative}.error-toast[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;pointer-events:none;z-index:100}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #ef4444;color:#b91c1c;padding:.75rem 1rem;border-radius:6px;font-size:.875rem;box-shadow:0 2px 4px #0000001a;opacity:0;animation:_ngcontent-%COMP%_slideIn .3s forwards;white-space:nowrap}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.welcome-content[_ngcontent-%COMP%]{text-align:center;max-width:600px;width:100%}h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:1rem}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#7f8c8d;margin-bottom:3rem}.menu-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-width:300px;margin:0 auto}.menu-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem 2rem;font-size:1.1rem;color:#fff;background-color:#3498db;border:none;border-radius:8px;cursor:pointer;transition:transform .2s,background-color .2s}.menu-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background-color:#2980b9}.icon[_ngcontent-%COMP%]{font-size:1.3rem}"]})}}return t})();function qz(t,e){1&t&&(D(0,"div",3)(1,"div",4),I(2," Please create or select a profile before accessing settings "),E()())}function zz(t,e){if(1&t){const n=Yr();D(0,"div",5)(1,"h2"),I(2,"User Settings"),E(),D(3,"div",6)(4,"div",7)(5,"label",8),I(6,"User Name"),E(),D(7,"input",9),Oh("ngModelChange",function(s){Le(n);const i=ge();return U_(i.editedName,s)||(i.editedName=s),Ve(s)}),E()(),D(8,"div",10)(9,"button",11),ue("click",function(){return Le(n),Ve(ge().saveChanges())}),I(10," Save Changes "),E(),D(11,"button",12),ue("click",function(){return Le(n),Ve(ge().goBack())}),I(12," Cancel "),E()()()()}if(2&t){const n=ge();P(7),Nh("ngModel",n.editedName),P(2),Oe("disabled",!n.editedName)}}let Gz=(()=>{class t{constructor(n,r){this.userService=n,this.router=r,this.currentUser=null,this.editedName="",this.showError=!1}ngOnInit(){this.userSubscription=this.userService.getCurrentUser().subscribe(n=>{if(!n)return this.showError=!0,void setTimeout(()=>{this.router.navigate(["/"])},3e3);this.currentUser=n,this.editedName=n.name})}ngOnDestroy(){this.userSubscription?.unsubscribe()}saveChanges(){if(!this.currentUser||!this.editedName.trim())return;const n={...this.currentUser,name:this.editedName.trim()};this.userService.updateUser(n),this.router.navigate(["/"])}goBack(){this.router.navigate(["/"])}static{this.\u0275fac=function(r){return new(r||t)(k(lc),k(En))}}static{this.\u0275cmp=Us({type:t,selectors:[["app-settings"]],decls:3,vars:2,consts:[[1,"settings-container"],["class","error-toast",4,"ngIf"],["class","settings-content",4,"ngIf"],[1,"error-toast"],[1,"error-message"],[1,"settings-content"],[1,"settings-form"],[1,"form-group"],["for","userName"],["type","text","id","userName","placeholder","Enter your name",1,"form-input",3,"ngModelChange","ngModel"],[1,"button-group"],[1,"save-button",3,"click","disabled"],[1,"cancel-button",3,"click"]],template:function(r,s){1&r&&(D(0,"div",0),Ot(1,qz,3,0,"div",1)(2,zz,13,2,"div",2),E()),2&r&&(P(),Oe("ngIf",s.showError),P(),Oe("ngIf",s.currentUser))},dependencies:[Ga,ru,ff,cu],styles:[".settings-container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto;position:relative}.error-toast[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;pointer-events:none;z-index:100}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #ef4444;color:#b91c1c;padding:.75rem 1rem;border-radius:6px;font-size:.875rem;box-shadow:0 2px 4px #0000001a;opacity:0;animation:_ngcontent-%COMP%_slideIn .3s forwards;white-space:nowrap}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.settings-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000001a}h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:2rem;text-align:center}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}label[_ngcontent-%COMP%]{font-weight:500;color:#2c3e50}.form-input[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e0e0e0;border-radius:6px;font-size:1rem;transition:border-color .2s}.form-input[_ngcontent-%COMP%]:focus{border-color:#3498db;outline:none}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:1rem}.save-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;font-size:1rem;cursor:pointer;transition:transform .2s,background-color .2s}.save-button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2980b9;transform:translateY(-2px)}.save-button[_ngcontent-%COMP%]:disabled{background-color:#95a5a6;cursor:not-allowed}.cancel-button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#c0392b;transform:translateY(-2px)}"]})}}return t})();function Wz(t,e){1&t&&(D(0,"div",4)(1,"div",5),I(2," Please create or select a profile before starting training "),E()())}function Yz(t,e){1&t&&(D(0,"div",6)(1,"h1"),I(2,"Select Training Type"),E(),D(3,"p",7),I(4,"Choose a training module to begin your ear training journey"),E()())}function Zz(t,e){1&t&&(D(0,"div",17),I(1,"Coming Soon"),E())}function Qz(t,e){if(1&t){const n=Yr();D(0,"div",11),ue("click",function(){const s=Le(n).$implicit;return Ve(ge(2).handleTrainingSelection(s))}),D(1,"div",12)(2,"div",13),I(3),E(),D(4,"h2",14),I(5),E(),D(6,"p",15),I(7),E(),Ot(8,Zz,2,0,"div",16),E()()}if(2&t){const n=e.$implicit;Et("disabled",n.disabled),P(3),Mt(n.icon),P(2),Mt(n.name),P(2),Mt(n.description),P(),Oe("ngIf",n.disabled)}}function Xz(t,e){if(1&t&&(D(0,"div",8)(1,"div",9),Ot(2,Qz,9,6,"div",10),E()()),2&t){const n=ge();P(2),Oe("ngForOf",n.trainingOptions)}}let Kz=(()=>{class t{constructor(n,r){this.router=n,this.userService=r,this.currentUser=null,this.showError=!1,this.trainingOptions=[{name:"Note Recognition",description:"Train your ability to identify individual musical notes by their sound. Perfect for developing absolute pitch.",icon:"\u{1f3b5}",disabled:!0},{name:"Interval Training",description:"Learn to recognize the distance between two notes. Essential for developing relative pitch and understanding melody.",icon:"\u{1f3bc}",disabled:!1},{name:"Chord Recognition",description:"Practice identifying different types of chords by ear. Great for understanding harmony and chord progressions.",icon:"\u{1f3b9}",disabled:!0},{name:"Return To Menu",description:"Return to the main menu",icon:"\u{1f519}",disabled:!1}]}ngOnInit(){this.userSubscription=this.userService.getCurrentUser().subscribe(n=>{if(!n)return this.showError=!0,void setTimeout(()=>{this.router.navigate(["/"])},3e3);this.currentUser=n})}ngOnDestroy(){this.userSubscription?.unsubscribe()}handleTrainingSelection(n){n.disabled||("Return To Menu"===n.name?this.router.navigate(["/"]):"Interval Training"===n.name?this.router.navigate(["/interval-training"]):console.log(`Selected training: ${n.name}`))}static{this.\u0275fac=function(r){return new(r||t)(k(En),k(lc))}}static{this.\u0275cmp=Us({type:t,selectors:[["app-training-selection"]],decls:4,vars:3,consts:[[1,"training-selection-container"],["class","error-toast",4,"ngIf"],["class","header",4,"ngIf"],["class","training-grid",4,"ngIf"],[1,"error-toast"],[1,"error-message"],[1,"header"],[1,"subtitle"],[1,"training-grid"],[1,"grid-container"],["class","training-card",3,"disabled","click",4,"ngFor","ngForOf"],[1,"training-card",3,"click"],[1,"card-content"],[1,"training-icon"],[1,"training-name"],[1,"training-description"],["class","coming-soon-badge",4,"ngIf"],[1,"coming-soon-badge"]],template:function(r,s){1&r&&(D(0,"div",0),Ot(1,Wz,3,0,"div",1)(2,Yz,5,0,"div",2)(3,Xz,3,1,"div",3),E()),2&r&&(P(),Oe("ngIf",s.showError),P(),Oe("ngIf",s.currentUser),P(),Oe("ngIf",s.currentUser))},dependencies:[sf,Ga],styles:[".training-selection-container[_ngcontent-%COMP%]{padding:2rem;max-width:1400px;margin:0 auto;display:flex;flex-direction:column;position:relative}.error-toast[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;pointer-events:none;z-index:100}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #ef4444;color:#b91c1c;padding:.75rem 1rem;border-radius:6px;font-size:.875rem;box-shadow:0 2px 4px #0000001a;opacity:0;animation:_ngcontent-%COMP%_slideIn .3s forwards;white-space:nowrap}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:1rem}.subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#7f8c8d}.training-grid[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:flex-start}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(300px,350px));gap:2rem;justify-content:center}@media (max-width: 1200px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(300px,350px))}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:minmax(300px,350px)}}.training-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;transition:transform .2s,box-shadow .2s;cursor:pointer;overflow:hidden;height:100%}.training-card[_ngcontent-%COMP%]:hover:not(.disabled){transform:translateY(-5px);box-shadow:0 6px 12px #00000026}.training-card.disabled[_ngcontent-%COMP%]{background:#f5f5f5;cursor:not-allowed;opacity:.7}.card-content[_ngcontent-%COMP%]{padding:2rem;text-align:center;height:100%;display:flex;flex-direction:column;justify-content:center;position:relative}.training-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.training-name[_ngcontent-%COMP%]{font-size:1.5rem;color:#2c3e50;margin-bottom:1rem;font-weight:600}.training-description[_ngcontent-%COMP%]{color:#7f8c8d;line-height:1.5;font-size:1rem}.coming-soon-badge[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background-color:#3498db;color:#fff;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500}"]})}}return t})();var Ri=je(582);const uc=new WeakSet,zA=new WeakMap,By=new WeakMap,GA=new WeakMap,$y=new WeakMap,Uf=new WeakMap,WA=new WeakMap,Hy=new WeakMap,qy=new WeakMap,zy=new WeakMap,YA={construct:()=>YA},ZA=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,QA=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),s=r.match(ZA);for(;null!==s;){const i=s[1].slice(1,-1),o=s[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),r=r.slice(s[0].length).replace(/^[\s]+/,""),s=r.match(ZA)}return[n.join(";"),r]},XA=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},KA=t=>{if(!(t=>{try{new new Proxy(t,YA)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Kr=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},Bf=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return t.delete(r),r},JA=(t,e,n,r)=>{const s=Kr(t,e),i=Bf(s,o=>o[0]===n&&o[1]===r);return 0===s.size&&t.delete(e),i},Su=t=>Kr(WA,t),dc=t=>{if(uc.has(t))throw new Error("The AudioNode is already stored.");uc.add(t),Su(t).forEach(e=>e(!0))},e1=t=>"port"in t,Tu=t=>{if(!uc.has(t))throw new Error("The AudioNode is not stored.");uc.delete(t),Su(t).forEach(e=>e(!1))},Gy=(t,e)=>{!e1(t)&&e.every(n=>0===n.size)&&Tu(t)},lG={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Mn=(t,e)=>t.context===e,$f=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},As=()=>new DOMException("","IndexSizeError"),Wy=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw 12===r.code?As():r}})(t.getChannelData)},hG={numberOfChannels:1},er=-34028234663852886e22,Un=-er,ri=t=>uc.has(t),pG={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Bn=t=>Kr(zA,t),Eu=t=>Kr(GA,t),Yy=(t,e)=>{const{activeInputs:n}=Bn(t);n.forEach(s=>s.forEach(([i])=>{e.includes(t)||Yy(i,[...e,t])}));const r=(t=>"playbackRate"in t)(t)?[t.playbackRate]:e1(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t&&!("gain"in t))(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const s of r){const i=Eu(s);void 0!==i&&i.activeInputs.forEach(([o])=>Yy(o,e))}ri(t)&&Tu(t)},Hf=t=>{Yy(t.destination,[])},qf=t=>"context"in t,Mu=t=>qf(t[0]),Mo=(t,e,n,r)=>{for(const s of t)if(n(s)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},n1=(t,e,[n,r],s)=>{Mo(t,[e,n,r],i=>i[0]===e&&i[1]===n,s)},r1=(t,[e,n,r],s)=>{const i=t.get(e);void 0===i?t.set(e,new Set([[n,r]])):Mo(i,[n,r],o=>o[0]===n,s)},hc=t=>"inputs"in t,zf=(t,e,n,r)=>{if(hc(e)){const s=e.inputs[r];return t.connect(s,n,0),[s,n,0]}return t.connect(e,n,r),[e,n,r]},s1=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},i1=(t,e)=>{if(!Su(t).delete(e))throw new Error("Missing the expected event listener.")},o1=(t,e,n)=>{const r=Kr(t,e),s=Bf(r,i=>i[0]===n);return 0===r.size&&t.delete(e),s},Gf=(t,e,n,r)=>{hc(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},wt=t=>Kr(By,t),xu=t=>Kr($y,t),xo=t=>Hy.has(t),Wf=t=>!uc.has(t),a1=(t,e)=>new Promise(n=>{if(null!==e)n(!0);else{const r=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(t.destination),a.connect(s),a.disconnect(s),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>1===u)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Zy=(t,e)=>{const n=new Map;for(const r of t)for(const s of r){const i=n.get(s);n.set(s,void 0===i?1:i+1)}n.forEach((r,s)=>e(s,r))},Yf=t=>"context"in t,Qy=(t,e,n,r,s)=>{const[i,o]=((t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Bn(e),o=s1(s[r],t,n);return null===o?[JA(i,t,n,r)[2],!1]:[o[2],!0]})(t,n,r,s);if(null!==i&&(i1(t,i),o&&!e&&!xo(t)&&Gf(wt(t),wt(n),r,s)),ri(n)){const{activeInputs:a}=Bn(n);Gy(n,a)}},Xy=(t,e,n,r)=>{const[s,i]=((t,e,n)=>{const{activeInputs:r,passiveInputs:s}=Eu(e),i=s1(r,t,n);return null===i?[o1(s,t,n)[1],!1]:[i[2],!0]})(t,n,r);null!==s&&(i1(t,s),i&&!e&&!xo(t)&&wt(t).disconnect(xu(n),r))};class c1{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,s)=>e.call(n,r,s,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const VG={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Zf(t,e,n,r,s){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,s);else{const i=t.getChannelData(r);if(0===e[n].byteLength)e[n]=i.slice(s,s+128);else{const o=new Float32Array(i.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const l1=(t,e,n,r,s)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],r,s):0!==e[n].byteLength&&t.getChannelData(r).set(e[n],s)},Qf=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const s=[],i="number"==typeof e?e:e[r];for(let o=0;o<i;o+=1)s.push(new Float32Array(128));n.push(s)}return n},BG=function(){var t=q(function*(e,n,r,s,i,o,a){const c=null===n?128*Math.ceil(e.context.length/128):n.length,l=s.channelCount*s.numberOfInputs,u=i.reduce((m,v)=>m+v,0),d=0===u?null:r.createBuffer(u,c,r.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const h=Bn(e),f=yield((t,e)=>{const n=Kr(zy,t),r=wt(e);return Kr(n,r)})(r,e),p=Qf(s.numberOfInputs,s.channelCount),g=Qf(s.numberOfOutputs,i),_=Array.from(e.parameters.keys()).reduce((m,v)=>({...m,[v]:new Float32Array(128)}),{});for(let m=0;m<c;m+=128){if(s.numberOfInputs>0&&null!==n)for(let v=0;v<s.numberOfInputs;v+=1)for(let w=0;w<s.channelCount;w+=1)Zf(n,p[v],w,w,m);void 0!==o.parameterDescriptors&&null!==n&&o.parameterDescriptors.forEach(({name:v},w)=>{Zf(n,_,v,l+w,m)});for(let v=0;v<s.numberOfInputs;v+=1)for(let w=0;w<i[v];w+=1)0===g[v][w].byteLength&&(g[v][w]=new Float32Array(128));try{const v=p.map((T,y)=>0===h.activeInputs[y].size?[]:T),w=a(m/r.sampleRate,r.sampleRate,()=>f.process(v,g,_));if(null!==d)for(let T=0,y=0;T<s.numberOfOutputs;T+=1){for(let S=0;S<i[T];S+=1)l1(d,g[T],S,y+S,m);y+=i[T]}if(!w)break}catch(v){e.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return d});return function(n,r,s,i,o,a,c){return t.apply(this,arguments)}}(),qG={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},YG={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},XG={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},rW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},aW={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},u1=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const s=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>s();try{e.postMessage(t,[t])}catch{}finally{s()}})},pW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Xf=(t,e,n)=>{const r=e[n];if(void 0===r)throw t();return r},CW={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},AW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Gt=()=>new DOMException("","InvalidStateError"),Kf=()=>new DOMException("","InvalidAccessError"),$W={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},d1=(t,e,n,r,s,i,o,a,c,l,u)=>{const d=l.length;let h=a;for(let f=0;f<d;f+=1){let p=n[0]*l[f];for(let g=1;g<s;g+=1){const _=h-g&c-1;p+=n[g]*i[_],p-=t[g]*o[_]}for(let g=s;g<r;g+=1)p+=n[g]*i[h-g&c-1];for(let g=s;g<e;g+=1)p-=t[g]*o[h-g&c-1];i[h]=l[f],o[h]=p,h=h+1&c-1,u[f]=p}return h},s6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Io=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch{}return!1},Dt=(t,e,n)=>{const r=e[n];void 0!==r&&r!==t[n]&&(t[n]=r)},tn=(t,e)=>{Dt(t,e,"channelCount"),Dt(t,e,"channelCountMode"),Dt(t,e,"channelInterpretation")},h1=t=>"function"==typeof t.getFloatTimeDomainData,kt=(t,e,n)=>{const r=e[n];void 0!==r&&r!==t[n].value&&(t[n].value=r)},Ky=t=>{t.start=(e=>(n=0,r=0,s)=>{if("number"==typeof s&&s<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,s)})(t.start)},Jy=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},f1=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),S6=function(){var t=q(function*(e,n){const r=yield(t=>new Promise((e,n)=>{const{port1:r,port2:s}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),s.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),s.close(),n(i)},s.postMessage(t)}))(n);return new e(r)});return function(n,r){return t.apply(this,arguments)}}(),p1=(t,e)=>{const n=t.createBiquadFilter();return tn(n,e),kt(n,e,"Q"),kt(n,e,"detune"),kt(n,e,"frequency"),kt(n,e,"gain"),Dt(n,e,"type"),n},Iu=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return tn(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Gt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if("explicit"!==n)throw Gt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if("discrete"!==n)throw Gt()}})})(n),n},fc=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),g1=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return tn(n,e),kt(n,e,"delayTime"),n},tr=(t,e)=>{const n=t.createGain();return tn(n,e),kt(n,e,"gain"),n};function R6(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function P6(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function m1(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=P6(n,e),n[0]+=t[r];return n}const Au=(t,e,n,r)=>t.createScriptProcessor(e,n,r),xn=()=>new DOMException("","NotSupportedError"),Q6={numberOfChannels:1},K6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},t9={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},s9={disableNormalization:!1},f9={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},_1=()=>new DOMException("","UnknownError"),y9={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},v1=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),y1=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},Nu=(t,e,n,r)=>{let s=t;for(;!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);const{get:i,set:o}=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,{get:n(i),set:r(o)})},w1=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(9!==r.code)throw r;w1(t,e,n+1e-7)}},ew=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},b1=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},tw=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},C1=(t,e)=>{const n=e.createGain();t.connect(n);const r=(s=>()=>{s.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),fc(t,n),t.stop=(s=>{let i=!1;return(o=0)=>{if(i)try{s.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else s.call(t,o),i=!0}})(t.stop)},pc=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},P9=(t=Mo,(e,n,[r,s,i],o)=>{t(e[s],[n,r,i],a=>a[0]===n&&a[1]===r,o)}),F9=(t=>(e,n,[r,s,i],o)=>{const a=e.get(r);void 0===a?e.set(r,new Set([[s,n,i]])):t(a,[s,n,i],c=>c[0]===s&&c[1]===n,o)})(Mo),L9=(t=>(e,n,r,s)=>t(e[s],i=>i[0]===n&&i[1]===r))(Bf),D1=new WeakMap,V9=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(D1),mr=((t,e)=>(n,r)=>{const s=e.get(n);if(void 0!==s)return s;const i=t.get(n);if(void 0!==i)return i;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}})(new Map,new WeakMap),Jr=typeof window>"u"?null:window,S1=((t,e)=>(n,r)=>{const s=n.createAnalyser();if(tn(s,r),!(r.maxDecibels>r.minDecibels))throw e();return Dt(s,r,"fftSize"),Dt(s,r,"maxDecibels"),Dt(s,r,"minDecibels"),Dt(s,r,"smoothingTimeConstant"),t(h1,()=>h1(s))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let s=0;s<r;s+=1)e[s]=.0078125*(n[s]-128);return e}})(s),s})(mr,As),nw=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(Bn),gn=((t,e,n)=>function(){var r=q(function*(s,i,o){const a=t(s);yield Promise.all(a.activeInputs.map((c,l)=>Array.from(c).map(function(){var u=q(function*([d,h]){const p=yield e(d).render(d,i),g=s.context.destination;!n(d)&&(s!==g||!n(s))&&p.connect(o,h,l)});return function(d){return u.apply(this,arguments)}}())).reduce((c,l)=>[...c,...l],[]))});return function(s,i,o){return r.apply(this,arguments)}}())(Bn,nw,xo),j9=((t,e,n)=>()=>{const r=new WeakMap,s=function(){var i=q(function*(o,a){let c=e(o);return Mn(c,a)||(c=t(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant})),r.set(a,c),yield n(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=r.get(o);return void 0!==a?Promise.resolve(a):s(i,o)}}})(S1,wt,gn),mt=(t=>e=>{const n=t.get(e);if(void 0===n)throw Gt();return n})(Uf),dn=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(Jr),at=(t=>e=>null!==t&&e instanceof t)(dn),T1=new WeakMap,E1=(t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,s){if(null!==r){let i=this._listeners.get(r);void 0===i&&(i=t(this,r),"function"==typeof r&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(n,i,s)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,s){const i=null===r?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,void 0===i?null:i,s)}})(pc),si=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Jr),rw=(t=>e=>null!==t&&e instanceof t)(si),sw=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Jr),M1=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Jr),gc=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Jr),$t=((t,e,n,r,s,i,o,a,c,l,u,d,h,f,p,g)=>class extends l{constructor(m,v,w,T){super(w),this._context=m,this._nativeAudioNode=w;const y=u(m);d(y)&&!0!==n(a1,()=>a1(y,g))&&(t=>{const e=new Map;t.connect=(n=>(r,s=0,i=0)=>{const o=Yf(r)?n(r,s,i):n(r,s),a=e.get(r);return void 0===a?e.set(r,[{input:i,output:s}]):a.every(c=>c.input!==i||c.output!==s)&&a.push({input:i,output:s}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,s,i)=>{if(n.apply(t),void 0===r)e.clear();else if("number"==typeof r)for(const[o,a]of e){const c=a.filter(l=>l.output!==r);0===c.length?e.delete(o):e.set(o,c)}else if(e.has(r))if(void 0===s)e.delete(r);else{const o=e.get(r);if(void 0!==o){const a=o.filter(c=>c.output!==s&&(c.input!==i||void 0===i));0===a.length?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(c=>{Yf(o)?t.connect(o,c.output,c.input):t.connect(o,c.output)})})(t.disconnect)})(w),By.set(this,w),WA.set(this,new Set),"closed"!==m.state&&v&&dc(this),t(this,T,w)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(m){this._nativeAudioNode.channelCount=m}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(m){this._nativeAudioNode.channelCountMode=m}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(m){this._nativeAudioNode.channelInterpretation=m}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(m,v=0,w=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw s();const T=u(this._context),y=p(T);if(h(m)||f(m))throw i();if(qf(m)){const b=wt(m);try{const F=zf(this._nativeAudioNode,b,v,w),U=Wf(this);(y||U)&&this._nativeAudioNode.disconnect(...F),"closed"!==this.context.state&&!U&&Wf(m)&&dc(m)}catch(F){throw 12===F.code?i():F}if(e(this,m,v,w,y)){const F=c([this],m);Zy(F,r(y))}return m}const S=xu(m);if("playbackRate"===S.name&&1024===S.maxValue)throw o();try{this._nativeAudioNode.connect(S,v),(y||Wf(this))&&this._nativeAudioNode.disconnect(S,v)}catch(b){throw 12===b.code?i():b}if(((t,e,n,r)=>{const{activeInputs:s,passiveInputs:i}=Eu(e),{outputs:o}=Bn(t),a=Su(t),c=l=>{const u=wt(t),d=xu(e);if(l){const h=o1(i,t,n);n1(s,t,h,!1),!r&&!xo(t)&&u.connect(d,n)}else{const h=((t,e,n)=>Bf(t,r=>r[0]===e&&r[1]===n))(s,t,n);r1(i,h,!1),!r&&!xo(t)&&u.disconnect(d,n)}};return!!Mo(o,[e,n],l=>l[0]===e&&l[1]===n,!0)&&(a.add(c),ri(t)?n1(s,t,[n,c],!0):r1(i,[t,n,c],!0),!0)})(this,m,v,y)){const b=c([this],m);Zy(b,r(y))}}disconnect(m,v,w){let T;const y=u(this._context),S=p(y);if(void 0===m)T=((t,e)=>{const n=Bn(t),r=[];for(const s of n.outputs)Mu(s)?Qy(t,e,...s):Xy(t,e,...s),r.push(s[0]);return n.outputs.clear(),r})(this,S);else if("number"==typeof m){if(m<0||m>=this.numberOfOutputs)throw s();T=((t,e,n)=>{const r=Bn(t),s=[];for(const i of r.outputs)i[1]===n&&(Mu(i)?Qy(t,e,...i):Xy(t,e,...i),s.push(i[0]),r.outputs.delete(i));return s})(this,S,m)}else{if(void 0!==v&&(v<0||v>=this.numberOfOutputs)||qf(m)&&void 0!==w&&(w<0||w>=m.numberOfInputs))throw s();if(T=((t,e,n,r,s)=>{const i=Bn(t);return Array.from(i.outputs).filter(o=>!(o[0]!==n||void 0!==r&&o[1]!==r||void 0!==s&&o[2]!==s)).map(o=>(Mu(o)?Qy(t,e,...o):Xy(t,e,...o),i.outputs.delete(o),o[0]))})(this,S,m,v,w),0===T.length)throw i()}for(const C of T){const b=c([this],C);Zy(b,a)}}})((t=>(e,n,r)=>{const s=[];for(let i=0;i<r.numberOfInputs;i+=1)s.push(new Set);t.set(e,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})})(zA),((t,e,n,r,s,i,o,a,c,l,u,d,h)=>{const f=new WeakMap;return(p,g,_,m,v)=>{const{activeInputs:w,passiveInputs:T}=i(g),{outputs:y}=i(p),S=a(p),C=b=>{const L=c(g),F=c(p);if(b){const U=JA(T,p,_,m);t(w,p,U,!1),!v&&!d(p)&&n(F,L,_,m),h(g)&&dc(g)}else{const U=r(w,p,_,m);e(T,m,U,!1),!v&&!d(p)&&s(F,L,_,m);const N=o(g);if(0===N)u(g)&&Gy(g,w);else{const W=f.get(g);void 0!==W&&clearTimeout(W),f.set(g,setTimeout(()=>{u(g)&&Gy(g,w)},1e3*N))}}};return!!l(y,[g,_,m],b=>b[0]===g&&b[1]===_&&b[2]===m,!0)&&(S.add(C),u(p)?t(w,p,[_,m,C],!0):e(T,m,[p,_,C],!0),!0)}})(P9,F9,zf,L9,Gf,Bn,V9,Su,wt,Mo,ri,xo,Wf),mr,((t,e,n,r,s,i)=>o=>(a,c)=>{const l=t.get(a);if(void 0===l){if(!o&&i(a)){const u=r(a),{outputs:d}=n(a);for(const h of d)if(Mu(h)){const f=r(h[0]);e(u,f,h[1],h[2])}else{const f=s(h[0]);u.disconnect(f,h[1])}}t.set(a,c)}else t.set(a,l+c)})(Hy,Gf,Bn,wt,xu,ri),As,Kf,xn,((t,e,n,r,s,i,o,a)=>(c,l)=>{const u=e.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");const d=i(c.context),h=a(d);if(u===l){if(e.delete(c),!h&&o(c)){const f=r(c),{outputs:p}=n(c);for(const g of p)if(Mu(g)){const _=r(g[0]);t(f,_,g[1],g[2])}else{const _=s(g[0]);f.connect(_,g[1])}}}else e.set(c,u-l)})(zf,Hy,Bn,wt,xu,mt,ri,at),((t,e,n)=>function r(s,i){const o=qf(i)?i:n(t,i);if((t=>"delayTime"in t)(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>r([...s,o],c[0])).reduce((c,l)=>c.concat(l),[])})(T1,Bn,Kr),E1,mt,rw,sw,M1,at,gc),U9=((t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=s(a),u={...lG,...c},d=r(l,u);super(a,!1,d,i(l)?e():null),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}})($t,j9,As,S1,mt,at),iw=new WeakSet,x1=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Jr),I1=(t=>e=>(t[0]=e,t[0]))(new Uint32Array(1)),ow=((t,e)=>n=>{n.copyFromChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<c&&d<u;d+=1)r[d]=l[d+o]},n.copyToChannel=(r,s,i=0)=>{const o=t(i),a=t(s);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<c&&d<u;d+=1)l[d+o]=r[d]}})(I1,As),aw=(t=>e=>{e.copyFromChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,s,i=0)=>{const o=t(i),a=t(s);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)})(I1),A1=((t,e,n,r,s,i,o,a)=>{let c=null;return class cO{constructor(u){if(null===s)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...hG,...u};null===c&&(c=new s(1,1,44100));const p=null!==r&&e(i,i)?new r({length:d,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,d,f);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(o(p),Wy(p)):e($f,()=>$f(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return null!==u&&"object"==typeof u&&Object.getPrototypeOf(u)===cO.prototype||t.has(u)}}})(iw,mr,xn,x1,dn,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(x1),ow,aw),Jf=(t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(r),r.disconnect()};n.addEventListener("ended",s)})(tr),N1=((t,e,n)=>function(){var r=q(function*(s,i,o){const a=e(s);yield Promise.all(Array.from(a.activeInputs).map(function(){var c=q(function*([l,u]){const h=yield t(l).render(l,i);n(l)||h.connect(o,u)});return function(l){return c.apply(this,arguments)}}()))});return function(s,i,o){return r.apply(this,arguments)}}())(nw,Eu,xo),Ns=(t=>(e,n,r)=>t(n,e,r))(N1),mc=((t,e,n,r,s,i,o,a,c,l,u)=>(d,h)=>{const f=d.createBufferSource();return tn(f,h),kt(f,h,"playbackRate"),Dt(f,h,"buffer"),Dt(f,h,"loop"),Dt(f,h,"loopEnd"),Dt(f,h,"loopStart"),e(n,()=>n(d))||(t=>{t.start=(e=>{let n=!1;return(r=0,s=0,i)=>{if(n)throw Gt();e.call(t,r,s,i),n=!0}})(t.start)})(f),e(r,()=>r(d))||(t=>{t.start=(e=>(n=0,r=0,s)=>{const i=t.buffer,o=null===i?r:Math.min(i.duration,r);null!==i&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,s)})(t.start)})(f),e(s,()=>s(d))||l(f,d),e(i,()=>i(d))||Ky(f),e(o,()=>o(d))||u(f,d),e(a,()=>a(d))||Jy(f),t(d,f),f})(Jf,mr,t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},ew,b1,tw,0,(t=>(e,n)=>{const r=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=r),t(e,"buffer",s=>()=>{const i=s.call(e);return i===r?null:i},s=>i=>s.call(e,null===i?r:i))})(Nu),C1),Os=((t,e)=>(n,r,s)=>(t(r).replay(s),e(r,n,s)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(Eu),N1),B9=((t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=function(){var l=q(function*(u,d){let h=n(u);const f=Mn(h,d);return f||(h=e(d,{buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value}),null!==o&&h.start(...o),null!==a&&h.stop(a)),i.set(d,h),f?yield t(d,u.playbackRate,h.playbackRate):yield r(d,u.playbackRate,h.playbackRate),yield s(u,d,h),h});return function(d,h){return l.apply(this,arguments)}}();return{set start(l){o=l},set stop(l){a=l},render(l,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):c(l,u)}}})(Ns,mc,wt,Os,gn),es=((t,e,n,r,s,i,o,a,c,l,u,d,h)=>(f,p,g,_=null,m=null)=>{const v=g.value,w=new Ri.AutomationEventList(v),T=p?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:r,value:s}=n;e.exponentialRampToValueAtTime(s,r)}else if("linearRampToValue"===n.type){const{endTime:r,value:s}=n;e.linearRampToValueAtTime(s,r)}else if("setTarget"===n.type){const{startTime:r,target:s,timeConstant:i}=n;e.setTargetAtTime(s,r,i)}else if("setValue"===n.type){const{startTime:r,value:s}=n;e.setValueAtTime(s,r)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:r,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,r)}}}}))(w):null,y={get defaultValue(){return v},get maxValue(){return null===_?g.maxValue:_},get minValue(){return null===m?g.minValue:m},get value(){return g.value},set value(S){g.value=S,y.setValueAtTime(S,f.context.currentTime)},cancelAndHoldAtTime(S){if("function"==typeof g.cancelAndHoldAtTime)null===T&&w.flush(f.context.currentTime),w.add(s(S)),g.cancelAndHoldAtTime(S);else{const C=Array.from(w).pop();null===T&&w.flush(f.context.currentTime),w.add(s(S));const b=Array.from(w).pop();g.cancelScheduledValues(S),C!==b&&void 0!==b&&("exponentialRampToValue"===b.type?g.exponentialRampToValueAtTime(b.value,b.endTime):"linearRampToValue"===b.type?g.linearRampToValueAtTime(b.value,b.endTime):"setValue"===b.type?g.setValueAtTime(b.value,b.startTime):"setValueCurve"===b.type&&g.setValueCurveAtTime(b.values,b.startTime,b.duration))}return y},cancelScheduledValues:S=>(null===T&&w.flush(f.context.currentTime),w.add(i(S)),g.cancelScheduledValues(S),y),exponentialRampToValueAtTime(S,C){if(0===S)throw new RangeError;if(!Number.isFinite(C)||C<0)throw new RangeError;const b=f.context.currentTime;return null===T&&w.flush(b),0===Array.from(w).length&&(w.add(l(v,b)),g.setValueAtTime(v,b)),w.add(o(S,C)),g.exponentialRampToValueAtTime(S,C),y},linearRampToValueAtTime(S,C){const b=f.context.currentTime;return null===T&&w.flush(b),0===Array.from(w).length&&(w.add(l(v,b)),g.setValueAtTime(v,b)),w.add(a(S,C)),g.linearRampToValueAtTime(S,C),y},setTargetAtTime:(S,C,b)=>(null===T&&w.flush(f.context.currentTime),w.add(c(S,C,b)),g.setTargetAtTime(S,C,b),y),setValueAtTime:(S,C)=>(null===T&&w.flush(f.context.currentTime),w.add(l(S,C)),g.setValueAtTime(S,C),y),setValueCurveAtTime(S,C,b){const L=S instanceof Float32Array?S:new Float32Array(S);if(null!==d&&"webkitAudioContext"===d.name){const F=C+b,U=f.context.sampleRate,N=Math.ceil(C*U),W=Math.floor(F*U),te=W-N,ee=new Float32Array(te);for(let ie=0;ie<te;ie+=1){const ye=(L.length-1)/b*((N+ie)/U-C),ae=Math.floor(ye),Me=Math.ceil(ye);ee[ie]=ae===Me?L[ae]:(1-(ye-ae))*L[ae]+(1-(Me-ye))*L[Me]}null===T&&w.flush(f.context.currentTime),w.add(u(ee,C,b)),g.setValueCurveAtTime(ee,C,b);const K=W/U;K<F&&h(y,ee[ee.length-1],K),h(y,L[L.length-1],F)}else null===T&&w.flush(f.context.currentTime),w.add(u(L,C,b)),g.setValueCurveAtTime(L,C,b);return y}};return n.set(y,g),e.set(y,f),t(y,T),y})((t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})})(GA),T1,$y,0,Ri.createCancelAndHoldAutomationEvent,Ri.createCancelScheduledValuesAutomationEvent,Ri.createExponentialRampToValueAutomationEvent,Ri.createLinearRampToValueAutomationEvent,Ri.createSetTargetAutomationEvent,Ri.createSetValueAutomationEvent,Ri.createSetValueCurveAutomationEvent,si,w1),$9=((t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const d=i(l),h={...pG,...u},f=s(d,h),p=o(d),g=p?e():null;super(l,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=null!==h.buffer,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,Un,er)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,null!==l){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u="function"==typeof l?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=null!==d&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===d?[l,u]:[l,u,d]),"closed"!==this.context.state){dc(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),ri(this)&&Tu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=l)}})($t,B9,es,Gt,mc,mt,at,pc),H9=((t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const d=i(l),h=o(d),f=s(d,u,h);super(l,!1,f,h?e(a):null),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})($t,t=>{const e=new WeakMap,n=function(){var r=q(function*(s,i){const o=i.destination;return e.set(i,o),yield t(s,i,o),o});return function(i,o){return r.apply(this,arguments)}}();return{render(r,s){const i=e.get(s);return void 0!==i?Promise.resolve(i):n(r,s)}}},As,Gt,((t,e)=>(n,r,s)=>{const i=n.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}s&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o})(tr,Nu),mt,at,gn),q9=((t,e,n,r,s)=>()=>{const i=new WeakMap,o=function(){var a=q(function*(c,l){let u=n(c);const d=Mn(u,l);return d||(u=e(l,{Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type})),i.set(l,u),d?(yield t(l,c.Q,u.Q),yield t(l,c.detune,u.detune),yield t(l,c.frequency,u.frequency),yield t(l,c.gain,u.gain)):(yield r(l,c.Q,u.Q),yield r(l,c.detune,u.detune),yield r(l,c.frequency,u.frequency),yield r(l,c.gain,u.gain)),yield s(c,l,u),u});return function(l,u){return a.apply(this,arguments)}}();return{render(a,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):o(a,c)}}})(Ns,p1,wt,Os,gn),Ao=(t=>(e,n)=>t.set(e,n))(D1),z9=((t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const d=i(l),h={...qG,...u},f=s(d,h),p=o(d);super(l,!1,f,p?n():null),this._Q=e(this,p,f.Q,Un,er),this._detune=e(this,p,f.detune,1200*Math.log2(Un),-1200*Math.log2(Un)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Un),er),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(h){throw 11===h.code?r():h}if(l.length!==u.length||u.length!==d.length)throw r()}})($t,es,q9,Kf,p1,mt,at,Ao),Pi=((t,e)=>(n,r,s)=>{const i=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=0===i.size;if(e(a))return o.call(n,a,c,l),t(i,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;o.call(n,a,c),t(i,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(void 0===a)o.apply(n),i.clear();else if("number"==typeof a){o.call(n,a);for(const h of i)h[1]===a&&i.delete(h)}else{e(a)?o.call(n,a,c,l):o.call(n,a,c);for(const h of i)h[0]===a&&(void 0===c||h[1]===c)&&(void 0===l||h[2]===l)&&i.delete(h)}u&&0===i.size&&s()})(n.disconnect),n})(Mo,sw),G9=((t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const s=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)s.connect(r,0,c)},()=>s.disconnect(r))})(Gt,Pi),Fi=((t,e)=>(n,r)=>{const s=n.createChannelMerger(r.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,s),tn(s,r),s})(si,G9),W9=((t,e,n)=>()=>{const r=new WeakMap,s=function(){var i=q(function*(o,a){let c=e(o);return Mn(c,a)||(c=t(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs})),r.set(a,c),yield n(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=r.get(o);return void 0!==a?Promise.resolve(a):s(i,o)}}})(Fi,wt,gn),Y9=((t,e,n,r,s)=>class extends t{constructor(o,a){const c=r(o),l={...YG,...a};super(o,!1,n(c,l),s(c)?e():null)}})($t,W9,Fi,mt,at),Z9=((t,e,n)=>()=>{const r=new WeakMap,s=function(){var i=q(function*(o,a){let c=e(o);return Mn(c,a)||(c=t(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs})),r.set(a,c),yield n(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=r.get(o);return void 0!==a?Promise.resolve(a):s(i,o)}}})(Iu,wt,gn),Q9=((t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u=(t=>({...t,channelCount:t.numberOfOutputs}))({...XG,...c});super(a,!1,n(l,u),s(l)?e():null)}})($t,Z9,Iu,mt,at),X9=((t,e,n,r)=>(s,{offset:i,...o})=>{const a=s.createBuffer(1,2,44100),c=e(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(s,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener:(...p)=>c.addEventListener(p[0],p[1],p[2]),dispatchEvent:(...p)=>c.dispatchEvent(p[0]),removeEventListener:(...p)=>c.removeEventListener(p[0],p[1],p[2]),start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}};return t(s,c),r(fc(d,l),()=>c.connect(l),()=>c.disconnect(l))})(Jf,mc,tr,Pi),_c=((t,e,n,r,s)=>(i,o)=>{if(void 0===i.createConstantSource)return n(i,o);const a=i.createConstantSource();return tn(a,o),kt(a,o,"offset"),e(r,()=>r(i))||Ky(a),e(s,()=>s(i))||Jy(a),t(i,a),a})(Jf,mr,X9,ew,tw),K9=((t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null;const c=function(){var l=q(function*(u,d){let h=n(u);const f=Mn(h,d);return f||(h=e(d,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value}),null!==o&&h.start(o),null!==a&&h.stop(a)),i.set(d,h),f?yield t(d,u.offset,h.offset):yield r(d,u.offset,h.offset),yield s(u,d,h),h});return function(d,h){return l.apply(this,arguments)}}();return{set start(l){o=l},set stop(l){a=l},render(l,u){const d=i.get(u);return void 0!==d?Promise.resolve(d):c(l,u)}}})(Ns,_c,wt,Os,gn),J9=((t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),d={...rW,...l},h=r(u,d),f=i(u),p=f?n():null;super(c,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Un,er),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l="function"==typeof c?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=null!==u&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=c),"closed"!==this.context.state){dc(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),ri(this)&&Tu(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=c)}})($t,es,K9,_c,mt,at,pc),O1=((t,e)=>(n,r)=>{const s=n.createConvolver();if(tn(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Dt(s,r,"buffer"),r.channelCount>2||(e(s,"channelCount",i=>()=>i.call(s),i=>o=>{if(o>2)throw t();return i.call(s,o)}),"max"===r.channelCountMode))throw t();return e(s,"channelCountMode",i=>()=>i.call(s),i=>o=>{if("max"===o)throw t();return i.call(s,o)}),s})(xn,Nu),e7=((t,e,n)=>()=>{const r=new WeakMap,s=function(){var i=q(function*(o,a){let c=e(o);return Mn(c,a)||(c=t(a,{buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize})),r.set(a,c),hc(c)?yield n(o,a,c.inputs[0]):yield n(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=r.get(o);return void 0!==a?Promise.resolve(a):s(i,o)}}})(O1,wt,gn),t7=((t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u={...aW,...c},d=n(l,u);super(a,!1,d,s(l)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=d,null!==u.buffer&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,null===a&&null!==this._nativeConvolverNode.buffer){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}})($t,e7,O1,mt,at,Ao),n7=((t,e,n,r,s)=>i=>{const o=new WeakMap,a=function(){var c=q(function*(l,u){let d=n(l);const h=Mn(d,u);return h||(d=e(u,{channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,delayTime:d.delayTime.value,maxDelayTime:i})),o.set(u,d),h?yield t(u,l.delayTime,d.delayTime):yield r(u,l.delayTime,d.delayTime),yield s(l,u,d),d});return function(u,d){return c.apply(this,arguments)}}();return{render(c,l){const u=o.get(l);return void 0!==u?Promise.resolve(u):a(c,l)}}})(Ns,g1,wt,Os,gn),r7=((t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),d={...pW,...l},h=r(u,d),f=i(u);super(c,!1,h,f?n(d.maxDelayTime):null),this._delayTime=e(this,f,h.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}})($t,es,n7,g1,mt,at,Ao),k1=(t=>(e,n)=>{const r=e.createDynamicsCompressor();if(tn(r,n),n.channelCount>2||"max"===n.channelCountMode)throw t();return kt(r,n,"attack"),kt(r,n,"knee"),kt(r,n,"ratio"),kt(r,n,"release"),kt(r,n,"threshold"),r})(xn),s7=((t,e,n,r,s)=>()=>{const i=new WeakMap,o=function(){var a=q(function*(c,l){let u=n(c);const d=Mn(u,l);return d||(u=e(l,{attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value})),i.set(l,u),d?(yield t(l,c.attack,u.attack),yield t(l,c.knee,u.knee),yield t(l,c.ratio,u.ratio),yield t(l,c.release,u.release),yield t(l,c.threshold,u.threshold)):(yield r(l,c.attack,u.attack),yield r(l,c.knee,u.knee),yield r(l,c.ratio,u.ratio),yield r(l,c.release,u.release),yield r(l,c.threshold,u.threshold)),yield s(c,l,u),u});return function(l,u){return a.apply(this,arguments)}}();return{render(a,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):o(a,c)}}})(Ns,k1,wt,Os,gn),i7=((t,e,n,r,s,i,o,a)=>class extends t{constructor(l,u){const d=i(l),h={...CW,...u},f=r(d,h),p=o(d);super(l,!1,f,p?n():null),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,"max"===l)throw this._nativeDynamicsCompressorNode.channelCountMode=u,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})($t,es,s7,k1,xn,mt,at,Ao),o7=((t,e,n,r,s)=>()=>{const i=new WeakMap,o=function(){var a=q(function*(c,l){let u=n(c);const d=Mn(u,l);return d||(u=e(l,{channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value})),i.set(l,u),d?yield t(l,c.gain,u.gain):yield r(l,c.gain,u.gain),yield s(c,l,u),u});return function(l,u){return a.apply(this,arguments)}}();return{render(a,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):o(a,c)}}})(Ns,tr,wt,Os,gn),a7=((t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=s(a),u={...AW,...c},d=r(l,u),h=i(l);super(a,!1,d,h?n():null),this._gain=e(this,h,d.gain,Un,er)}get gain(){return this._gain}})($t,es,o7,tr,mt,at),c7=((t,e,n,r)=>(s,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=f1(i,s.sampleRate),h=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=h.length,g=f.length,_=Math.min(p,g);if(0===p||p>20)throw r();if(0===h[0])throw e();if(0===g||g>20)throw r();if(0===f[0])throw e();if(1!==h[0]){for(let b=0;b<g;b+=1)f[b]/=h[0];for(let b=1;b<p;b+=1)h[b]/=h[0]}const m=n(s,d,o,o);m.channelCount=o,m.channelCountMode=a,m.channelInterpretation=c;const w=[],T=[],y=[];for(let b=0;b<o;b+=1){w.push(0);const L=new Float32Array(32),F=new Float32Array(32);L.fill(0),F.fill(0),T.push(L),y.push(F)}m.onaudioprocess=b=>{const L=b.inputBuffer,F=b.outputBuffer,U=L.numberOfChannels;for(let N=0;N<U;N+=1){const W=L.getChannelData(N),te=F.getChannelData(N);w[N]=d1(h,p,f,g,_,T[N],y[N],w[N],32,W,te)}};const S=s.sampleRate/2;return fc({get bufferSize(){return d},get channelCount(){return m.channelCount},set channelCount(b){m.channelCount=b},get channelCountMode(){return m.channelCountMode},set channelCountMode(b){m.channelCountMode=b},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(b){m.channelInterpretation=b},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener:(...b)=>m.addEventListener(b[0],b[1],b[2]),dispatchEvent:(...b)=>m.dispatchEvent(b[0]),getFrequencyResponse(b,L,F){if(b.length!==L.length||L.length!==F.length)throw t();const U=b.length;for(let N=0;N<U;N+=1){const W=-Math.PI*(b[N]/S),te=[Math.cos(W),Math.sin(W)],ie=R6(m1(f,te),m1(h,te));L[N]=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]),F[N]=Math.atan2(ie[1],ie[0])}},removeEventListener:(...b)=>m.removeEventListener(b[0],b[1],b[2])},m)})(Kf,Gt,Au,xn),ep=((t,e,n,r)=>s=>t(Io,()=>Io(s))?Promise.resolve(t(r,r)).then(i=>{if(!i){const o=n(s,512,0,1);s.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>s.currentTime,o.connect(s.destination)}return s.startRendering()}):new Promise(i=>{const o=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(s.destination),s.startRendering()}))(mr,tr,Au,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(s=>{n.oncomplete=()=>{r.disconnect(),s(0!==n.currentTime)},n.startRendering()})})(tr,dn)),l7=((t,e,n,r,s)=>(i,o)=>{const a=new WeakMap;let c=null;const l=function(){var u=q(function*(d,h){let f=null,p=e(d);const g=Mn(p,h);if(void 0===h.createIIRFilter?f=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(p=h.createIIRFilter(o,i)),a.set(h,null===f?p:f),null!==f){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const m=new n(d.context.destination.channelCount,d.context.length,h.sampleRate);c=q(function*(){return yield r(d,m,m.destination),((t,e,n,r)=>{const s=n instanceof Float64Array?n:new Float64Array(n),i=r instanceof Float64Array?r:new Float64Array(r),o=s.length,a=i.length,c=Math.min(o,a);if(1!==s[0]){for(let p=0;p<o;p+=1)i[p]/=s[0];for(let p=1;p<a;p+=1)s[p]/=s[0]}const u=new Float32Array(32),d=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){const g=t.getChannelData(p),_=h.getChannelData(p);u.fill(0),d.fill(0),d1(s,o,i,a,c,u,d,0,32,g,_)}return h})(yield s(m),h,i,o)})()}const _=yield c;return f.buffer=_,f.start(0),f}return yield r(d,h,p),p});return function(h,f){return u.apply(this,arguments)}}();return{render(u,d){const h=a.get(d);return void 0!==h?Promise.resolve(h):l(u,d)}}})(mc,wt,dn,gn,ep),u7=(t=>(e,n,r)=>{if(void 0===e.createIIRFilter)return t(e,n,r);const s=e.createIIRFilter(r.feedforward,r.feedback);return tn(s,r),s})(c7),d7=((t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=r(a),u=s(l),d={...$W,...c},h=e(l,u?null:a.baseLatency,d);super(a,!1,h,u?n(d.feedback,d.feedforward):null),(t=>{t.getFrequencyResponse=(e=>(n,r,s)=>{if(n.length!==r.length||r.length!==s.length)throw Kf();return e.call(t,n,r,s)})(t.getFrequencyResponse)})(h),this._nativeIIRFilterNode=h,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}})($t,u7,l7,mt,at,Ao),h7=((t,e,n,r,s,i,o,a)=>(c,l)=>{const u=l.listener,{forwardX:h,forwardY:f,forwardZ:p,positionX:g,positionY:_,positionZ:m,upX:v,upY:w,upZ:T}=void 0===u.forwardX?(()=>{const y=new Float32Array(1),S=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(l);let b=!1,L=[0,0,-1,0,1,0],F=[0,0,0];const U=()=>{if(b)return;b=!0;const ee=r(l,256,9,0);ee.onaudioprocess=({inputBuffer:K})=>{const ie=[i(K,y,0),i(K,y,1),i(K,y,2),i(K,y,3),i(K,y,4),i(K,y,5)];ie.some((ae,Me)=>ae!==L[Me])&&(u.setOrientation(...ie),L=ie);const ye=[i(K,y,6),i(K,y,7),i(K,y,8)];ye.some((ae,Me)=>ae!==F[Me])&&(u.setPosition(...ye),F=ye)},S.connect(ee)},N=ee=>K=>{K!==L[ee]&&(L[ee]=K,u.setOrientation(...L))},W=ee=>K=>{K!==F[ee]&&(F[ee]=K,u.setPosition(...F))},te=(ee,K,ie)=>{const ye=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K});ye.connect(S,0,ee),ye.start(),Object.defineProperty(ye.offset,"defaultValue",{get:()=>K});const ae=t({context:c},C,ye.offset,Un,er);return a(ae,"value",Me=>()=>Me.call(ae),Me=>Ne=>{try{Me.call(ae,Ne)}catch(_t){if(9!==_t.code)throw _t}U(),C&&ie(Ne)}),ae.cancelAndHoldAtTime=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.cancelAndHoldAtTime),ae.cancelScheduledValues=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.cancelScheduledValues),ae.exponentialRampToValueAtTime=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.exponentialRampToValueAtTime),ae.linearRampToValueAtTime=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.linearRampToValueAtTime),ae.setTargetAtTime=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.setTargetAtTime),ae.setValueAtTime=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.setValueAtTime),ae.setValueCurveAtTime=(Me=>C?()=>{throw s()}:(...Ne)=>{const _t=Me.apply(ae,Ne);return U(),_t})(ae.setValueCurveAtTime),ae};return{forwardX:te(0,0,N(0)),forwardY:te(1,0,N(1)),forwardZ:te(2,-1,N(2)),positionX:te(6,0,W(0)),positionY:te(7,0,W(1)),positionZ:te(8,0,W(2)),upX:te(3,0,N(3)),upY:te(4,1,N(4)),upZ:te(5,0,N(5))}})():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return _},get positionZ(){return m},get upX(){return v},get upY(){return w},get upZ(){return T}}})(es,Fi,_c,Au,xn,v1,at,Nu),R1=new WeakMap,cw=((t,e,n,r,s,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,Uf.set(this,a),r(a)&&s.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c="function"==typeof a?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=null!==l&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(H9,h7,E1,at,R1,pc),P1=((t,e,n,r,s,i)=>(o,a)=>{const c=o.createOscillator();return tn(c,a),kt(c,a,"detune"),kt(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):Dt(c,a,"type"),e(n,()=>n(o))||Ky(c),e(r,()=>r(o))||i(c,o),e(s,()=>s(o))||Jy(c),t(o,c),c})(Jf,mr,ew,b1,tw,C1),f7=((t,e,n,r,s)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=function(){var u=q(function*(d,h){let f=n(d);const p=Mn(f,h);return p||(f=e(h,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:null===o?void 0:o,type:f.type}),null!==a&&f.start(a),null!==c&&f.stop(c)),i.set(h,f),p?(yield t(h,d.detune,f.detune),yield t(h,d.frequency,f.frequency)):(yield r(h,d.detune,f.detune),yield r(h,d.frequency,f.frequency)),yield s(d,h,f),f});return function(h,f){return u.apply(this,arguments)}}();return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,d){const h=i.get(d);return void 0!==h?Promise.resolve(h):l(u,d)}}})(Ns,P1,wt,Os,gn),p7=((t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),d={...K6,...l},h=n(u,d),f=i(u),p=f?r():null,g=c.sampleRate/2;super(c,!1,h,p),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,null!==this._oscillatorNodeRenderer&&void 0!==d.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l="function"==typeof c?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=null!==u&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=c),"closed"!==this.context.state){dc(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),ri(this)&&Tu(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=c)}})($t,es,P1,f7,mt,at,pc),F1=(t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=e.createBuffer(1,2,44100);return r.buffer=s,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(mc),g7=((t,e,n,r,s)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();tn(l,c),tn(u,c);const d=n(i,{...c,gain:1}),h=n(i,{...c,gain:-1}),f=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let g=null,_=!1,m=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(y){d.channelCount=y,h.channelCount=y,l.channelCount=y,f.channelCount=y,u.channelCount=y,p.channelCount=y},get channelCountMode(){return l.channelCountMode},set channelCountMode(y){d.channelCountMode=y,h.channelCountMode=y,l.channelCountMode=y,f.channelCountMode=y,u.channelCountMode=y,p.channelCountMode=y},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(y){d.channelInterpretation=y,h.channelInterpretation=y,l.channelInterpretation=y,f.channelInterpretation=y,u.channelInterpretation=y,p.channelInterpretation=y},get context(){return l.context},get curve(){return m},set curve(y){if(null!==y&&y.length<2)throw e();if(null===y)l.curve=y,u.curve=y;else{const S=y.length,C=new Float32Array(S+2-S%2),b=new Float32Array(S+2-S%2);C[0]=y[0],b[0]=-y[S-1];const L=Math.ceil((S+1)/2),F=(S+1)/2-1;for(let U=1;U<L;U+=1){const N=U/L*F,W=Math.floor(N),te=Math.ceil(N);C[U]=W===te?y[W]:(1-(N-W))*y[W]+(1-(te-N))*y[te],b[U]=W===te?-y[S-1-W]:-(1-(N-W))*y[S-1-W]-(1-(te-N))*y[S-1-te]}C[L]=S%2==1?y[L-1]:(y[L-2]+y[L-1])/2,l.curve=C,u.curve=b}m=y,_&&(r(m)&&null===g?g=t(i,d):null!==g&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(y){l.oversample=y,u.oversample=y},addEventListener:(...y)=>d.addEventListener(y[0],y[1],y[2]),dispatchEvent:(...y)=>d.dispatchEvent(y[0]),removeEventListener:(...y)=>d.removeEventListener(y[0],y[1],y[2])};return null!==o&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a),s(fc(v,f),()=>{d.connect(l).connect(f),d.connect(h).connect(u).connect(p).connect(f),_=!0,r(m)&&(g=t(i,d))},()=>{d.disconnect(l),l.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(p),p.disconnect(f),_=!1,null!==g&&(g(),g=null)})})(F1,Gt,tr,y1,Pi),tp=((t,e,n,r,s,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(null!==i&&"webkitAudioContext"===i.name&&void 0===a.createGain().gain.automationRate)return n(a,c);tn(l,c);const u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw e();Dt(l,{curve:u},"curve"),Dt(l,c,"oversample");let d=null,h=!1;return o(l,"curve",g=>()=>g.call(l),g=>_=>(g.call(l,_),h&&(r(_)&&null===d?d=t(a,l):!r(_)&&null!==d&&(d(),d=null)),_)),s(l,()=>{h=!0,r(l.curve)&&(d=t(a,l))},()=>{h=!1,null!==d&&(d(),d=null)})})(F1,Gt,g7,y1,Pi,si,Nu),m7=((t,e,n,r,s,i,o,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:_,orientationY:m,orientationZ:v,panningModel:w,positionX:T,positionY:y,positionZ:S,refDistance:C,rolloffFactor:b,...L})=>{const F=u.createPanner();if(L.channelCount>2||"max"===L.channelCountMode)throw o();tn(F,L);const U={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},N=n(u,{...U,channelInterpretation:"speakers",numberOfInputs:6}),W=r(u,{...L,gain:1}),te=r(u,{...U,gain:1}),ee=r(u,{...U,gain:0}),K=r(u,{...U,gain:0}),ie=r(u,{...U,gain:0}),ye=r(u,{...U,gain:0}),ae=r(u,{...U,gain:0}),Me=s(u,256,6,1),Ne=i(u,{...U,curve:new Float32Array([1,1]),oversample:"none"});let _t=[_,m,v],sn=[T,y,S];const qn=new Float32Array(1);Me.onaudioprocess=({inputBuffer:$})=>{const on=[c($,qn,0),c($,qn,1),c($,qn,2)];on.some((xc,Ic)=>xc!==_t[Ic])&&(F.setOrientation(...on),_t=on);const Fs=[c($,qn,3),c($,qn,4),c($,qn,5)];Fs.some((xc,Ic)=>xc!==sn[Ic])&&(F.setPosition(...Fs),sn=Fs)},Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ye.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ae.gain,"defaultValue",{get:()=>0});const Ue={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount($){if($>2)throw o();W.channelCount=$,F.channelCount=$},get channelCountMode(){return F.channelCountMode},set channelCountMode($){if("max"===$)throw o();W.channelCountMode=$,F.channelCountMode=$},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation($){W.channelInterpretation=$,F.channelInterpretation=$},get coneInnerAngle(){return F.coneInnerAngle},set coneInnerAngle($){F.coneInnerAngle=$},get coneOuterAngle(){return F.coneOuterAngle},set coneOuterAngle($){F.coneOuterAngle=$},get coneOuterGain(){return F.coneOuterGain},set coneOuterGain($){if($<0||$>1)throw e();F.coneOuterGain=$},get context(){return F.context},get distanceModel(){return F.distanceModel},set distanceModel($){F.distanceModel=$},get inputs(){return[W]},get maxDistance(){return F.maxDistance},set maxDistance($){if($<0)throw new RangeError;F.maxDistance=$},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get orientationX(){return te.gain},get orientationY(){return ee.gain},get orientationZ(){return K.gain},get panningModel(){return F.panningModel},set panningModel($){F.panningModel=$},get positionX(){return ie.gain},get positionY(){return ye.gain},get positionZ(){return ae.gain},get refDistance(){return F.refDistance},set refDistance($){if($<0)throw new RangeError;F.refDistance=$},get rolloffFactor(){return F.rolloffFactor},set rolloffFactor($){if($<0)throw new RangeError;F.rolloffFactor=$},addEventListener:(...$)=>W.addEventListener($[0],$[1],$[2]),dispatchEvent:(...$)=>W.dispatchEvent($[0]),removeEventListener:(...$)=>W.removeEventListener($[0],$[1],$[2])};return d!==Ue.coneInnerAngle&&(Ue.coneInnerAngle=d),h!==Ue.coneOuterAngle&&(Ue.coneOuterAngle=h),f!==Ue.coneOuterGain&&(Ue.coneOuterGain=f),p!==Ue.distanceModel&&(Ue.distanceModel=p),g!==Ue.maxDistance&&(Ue.maxDistance=g),_!==Ue.orientationX.value&&(Ue.orientationX.value=_),m!==Ue.orientationY.value&&(Ue.orientationY.value=m),v!==Ue.orientationZ.value&&(Ue.orientationZ.value=v),w!==Ue.panningModel&&(Ue.panningModel=w),T!==Ue.positionX.value&&(Ue.positionX.value=T),y!==Ue.positionY.value&&(Ue.positionY.value=y),S!==Ue.positionZ.value&&(Ue.positionZ.value=S),C!==Ue.refDistance&&(Ue.refDistance=C),b!==Ue.rolloffFactor&&(Ue.rolloffFactor=b),(1!==_t[0]||0!==_t[1]||0!==_t[2])&&F.setOrientation(..._t),(0!==sn[0]||0!==sn[1]||0!==sn[2])&&F.setPosition(...sn),l(fc(Ue,F),()=>{W.connect(F),t(W,Ne,0,0),Ne.connect(te).connect(N,0,0),Ne.connect(ee).connect(N,0,1),Ne.connect(K).connect(N,0,2),Ne.connect(ie).connect(N,0,3),Ne.connect(ye).connect(N,0,4),Ne.connect(ae).connect(N,0,5),N.connect(Me).connect(u.destination)},()=>{W.disconnect(F),a(W,Ne,0,0),Ne.disconnect(te),te.disconnect(N),Ne.disconnect(ee),ee.disconnect(N),Ne.disconnect(K),K.disconnect(N),Ne.disconnect(ie),ie.disconnect(N),Ne.disconnect(ye),ye.disconnect(N),Ne.disconnect(ae),ae.disconnect(N),N.disconnect(Me),Me.disconnect(u.destination)})})(zf,Gt,Fi,tr,Au,tp,xn,Gf,v1,Pi),L1=(t=>(e,n)=>{const r=e.createPanner();return void 0===r.orientationX?t(e,n):(tn(r,n),kt(r,n,"orientationX"),kt(r,n,"orientationY"),kt(r,n,"orientationZ"),kt(r,n,"positionX"),kt(r,n,"positionY"),kt(r,n,"positionZ"),Dt(r,n,"coneInnerAngle"),Dt(r,n,"coneOuterAngle"),Dt(r,n,"coneOuterGain"),Dt(r,n,"distanceModel"),Dt(r,n,"maxDistance"),Dt(r,n,"panningModel"),Dt(r,n,"refDistance"),Dt(r,n,"rolloffFactor"),r)})(m7),_7=((t,e,n,r,s,i,o,a,c,l)=>()=>{const u=new WeakMap;let d=null;const h=function(){var f=q(function*(p,g){let _=null,m=i(p);const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},w={...v,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},T=Mn(m,g);if("bufferSize"in m)_=r(g,{...v,gain:1});else if(!T){const y={...w,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=s(g,y)}if(u.set(g,null===_?m:_),null!==_){if(null===d){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new o(6,p.context.length,g.sampleRate),W=e(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});W.connect(N.destination),d=q(function*(){const te=yield Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(function(){var ee=q(function*(K,ie){const ye=n(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===ie?1:0});return yield a(N,K,ye.offset),ye});return function(K,ie){return ee.apply(this,arguments)}}()));for(let ee=0;ee<6;ee+=1)te[ee].connect(W,0,ee),te[ee].start(0);return l(N)})()}const y=yield d,S=r(g,{...v,gain:1});yield c(p,g,S);const C=[];for(let N=0;N<y.numberOfChannels;N+=1)C.push(y.getChannelData(N));let b=[C[0][0],C[1][0],C[2][0]],L=[C[3][0],C[4][0],C[5][0]],F=r(g,{...v,gain:1}),U=s(g,{...w,orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:L[0],positionY:L[1],positionZ:L[2]});S.connect(F).connect(U.inputs[0]),U.connect(_);for(let N=128;N<y.length;N+=128){const W=[C[0][N],C[1][N],C[2][N]],te=[C[3][N],C[4][N],C[5][N]];if(W.some((ee,K)=>ee!==b[K])||te.some((ee,K)=>ee!==L[K])){b=W,L=te;const ee=N/g.sampleRate;F.gain.setValueAtTime(0,ee),F=r(g,{...v,gain:0}),U=s(g,{...w,orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:L[0],positionY:L[1],positionZ:L[2]}),F.gain.setValueAtTime(1,ee),S.connect(F).connect(U.inputs[0]),U.connect(_)}}return _}return T?(yield t(g,p.orientationX,m.orientationX),yield t(g,p.orientationY,m.orientationY),yield t(g,p.orientationZ,m.orientationZ),yield t(g,p.positionX,m.positionX),yield t(g,p.positionY,m.positionY),yield t(g,p.positionZ,m.positionZ)):(yield a(g,p.orientationX,m.orientationX),yield a(g,p.orientationY,m.orientationY),yield a(g,p.orientationZ,m.orientationZ),yield a(g,p.positionX,m.positionX),yield a(g,p.positionY,m.positionY),yield a(g,p.positionZ,m.positionZ)),hc(m)?yield c(p,g,m.inputs[0]):yield c(p,g,m),m});return function(g,_){return f.apply(this,arguments)}}();return{render(f,p){const g=u.get(p);return void 0!==g?Promise.resolve(g):h(f,p)}}})(Ns,Fi,_c,tr,L1,wt,dn,Os,gn,ep),v7=((t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),d={...t9,...l},h=n(u,d),f=i(u);super(c,!1,h,f?r():null),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Un,er),this._orientationY=e(this,f,h.orientationY,Un,er),this._orientationZ=e(this,f,h.orientationZ,Un,er),this._positionX=e(this,f,h.positionX,Un,er),this._positionY=e(this,f,h.positionY,Un,er),this._positionZ=e(this,f,h.positionZ,Un,er),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}})($t,es,L1,_7,mt,at,Ao),y7=(t=>(e,{disableNormalization:n,imag:r,real:s})=>{const i=r instanceof Float32Array?r:new Float32Array(r),o=s instanceof Float32Array?s:new Float32Array(s),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a})(As),w7=((t,e,n,r)=>class lO{constructor(i,o){const a=e(i),c=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}})({...s9,...o}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](i){return null!==i&&"object"==typeof i&&Object.getPrototypeOf(i)===lO.prototype||n.has(i)}})(y7,mt,new WeakSet),b7=((t,e,n,r,s,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},f=(p,g,_,m,v)=>{if(1===g)return((p,g,_,m)=>{const v=new Float32Array(16385),w=new Float32Array(16385);for(let L=0;L<16385;L+=1){const F=L/16384*c;v[L]=Math.cos(F),w[L]=Math.sin(F)}const T=n(p,{...l,gain:0}),y=r(p,{...u,curve:v}),S=r(p,{...u,curve:a}),C=n(p,{...l,gain:0}),b=r(p,{...u,curve:w});return{connectGraph(){g.connect(T),g.connect(void 0===S.inputs?S:S.inputs[0]),g.connect(C),S.connect(_),_.connect(void 0===y.inputs?y:y.inputs[0]),_.connect(void 0===b.inputs?b:b.inputs[0]),y.connect(T.gain),b.connect(C.gain),T.connect(m,0,0),C.connect(m,0,1)},disconnectGraph(){g.disconnect(T),g.disconnect(void 0===S.inputs?S:S.inputs[0]),g.disconnect(C),S.disconnect(_),_.disconnect(void 0===y.inputs?y:y.inputs[0]),_.disconnect(void 0===b.inputs?b:b.inputs[0]),y.disconnect(T.gain),b.disconnect(C.gain),T.disconnect(m,0,0),C.disconnect(m,0,1)}}})(p,_,m,v);if(2===g)return((p,g,_,m)=>{const v=new Float32Array(16385),w=new Float32Array(16385),T=new Float32Array(16385),y=new Float32Array(16385),S=Math.floor(8192.5);for(let ie=0;ie<16385;ie+=1)if(ie>S){const ye=(ie-S)/(16384-S)*c;v[ie]=Math.cos(ye),w[ie]=Math.sin(ye),T[ie]=0,y[ie]=1}else{const ye=ie/(16384-S)*c;v[ie]=1,w[ie]=0,T[ie]=Math.cos(ye),y[ie]=Math.sin(ye)}const C=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),b=n(p,{...l,gain:0}),L=r(p,{...u,curve:v}),F=n(p,{...l,gain:0}),U=r(p,{...u,curve:w}),N=r(p,{...u,curve:a}),W=n(p,{...l,gain:0}),te=r(p,{...u,curve:T}),ee=n(p,{...l,gain:0}),K=r(p,{...u,curve:y});return{connectGraph(){g.connect(C),g.connect(void 0===N.inputs?N:N.inputs[0]),C.connect(b,0),C.connect(F,0),C.connect(W,1),C.connect(ee,1),N.connect(_),_.connect(void 0===L.inputs?L:L.inputs[0]),_.connect(void 0===U.inputs?U:U.inputs[0]),_.connect(void 0===te.inputs?te:te.inputs[0]),_.connect(void 0===K.inputs?K:K.inputs[0]),L.connect(b.gain),U.connect(F.gain),te.connect(W.gain),K.connect(ee.gain),b.connect(m,0,0),W.connect(m,0,0),F.connect(m,0,1),ee.connect(m,0,1)},disconnectGraph(){g.disconnect(C),g.disconnect(void 0===N.inputs?N:N.inputs[0]),C.disconnect(b,0),C.disconnect(F,0),C.disconnect(W,1),C.disconnect(ee,1),N.disconnect(_),_.disconnect(void 0===L.inputs?L:L.inputs[0]),_.disconnect(void 0===U.inputs?U:U.inputs[0]),_.disconnect(void 0===te.inputs?te:te.inputs[0]),_.disconnect(void 0===K.inputs?K:K.inputs[0]),L.disconnect(b.gain),U.disconnect(F.gain),te.disconnect(W.gain),K.disconnect(ee.gain),b.disconnect(m,0,0),W.disconnect(m,0,0),F.disconnect(m,0,1),ee.disconnect(m,0,1)}}})(p,_,m,v);throw s()};return(p,{channelCount:g,channelCountMode:_,pan:m,...v})=>{if("max"===_)throw s();const w=t(p,{...v,channelCount:1,channelCountMode:_,numberOfInputs:2}),T=n(p,{...v,channelCount:g,channelCountMode:_,gain:1}),y=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:m});let{connectGraph:S,disconnectGraph:C}=f(p,g,T,y,w);Object.defineProperty(y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(y.gain,"maxValue",{get:()=>1}),Object.defineProperty(y.gain,"minValue",{get:()=>-1});const b={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(N){T.channelCount!==N&&(L&&C(),({connectGraph:S,disconnectGraph:C}=f(p,N,T,y,w)),L&&S()),T.channelCount=N},get channelCountMode(){return T.channelCountMode},set channelCountMode(N){if("clamped-max"===N||"max"===N)throw s();T.channelCountMode=N},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(N){T.channelInterpretation=N},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get pan(){return y.gain},addEventListener:(...N)=>T.addEventListener(N[0],N[1],N[2]),dispatchEvent:(...N)=>T.dispatchEvent(N[0]),removeEventListener:(...N)=>T.removeEventListener(N[0],N[1],N[2])};let L=!1;return i(fc(b,w),()=>{S(),L=!0},()=>{C(),L=!1})}})(Fi,Iu,tr,tp,xn,Pi),V1=((t,e)=>(n,r)=>{const s=r.channelCountMode;if("clamped-max"===s)throw e();if(void 0===n.createStereoPanner)return t(n,r);const i=n.createStereoPanner();return tn(i,r),kt(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>s,set:o=>{if(o!==s)throw e()}}),i})(b7,xn),C7=((t,e,n,r,s)=>()=>{const i=new WeakMap,o=function(){var a=q(function*(c,l){let u=n(c);const d=Mn(u,l);return d||(u=e(l,{channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value})),i.set(l,u),d?yield t(l,c.pan,u.pan):yield r(l,c.pan,u.pan),hc(u)?yield s(c,l,u.inputs[0]):yield s(c,l,u),u});return function(l,u){return a.apply(this,arguments)}}();return{render(a,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):o(a,c)}}})(Ns,V1,wt,Os,gn),D7=((t,e,n,r,s,i)=>class extends t{constructor(a,c){const l=s(a),u={...f9,...c},d=n(l,u),h=i(l);super(a,!1,d,h?r():null),this._pan=e(this,h,d.pan)}get pan(){return this._pan}})($t,es,V1,C7,mt,at),S7=((t,e,n)=>()=>{const r=new WeakMap,s=function(){var i=q(function*(o,a){let c=e(o);return Mn(c,a)||(c=t(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample})),r.set(a,c),hc(c)?yield n(o,a,c.inputs[0]):yield n(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=r.get(o);return void 0!==a?Promise.resolve(a):s(i,o)}}})(tp,wt,gn),T7=((t,e,n,r,s,i,o)=>class extends t{constructor(c,l){const u=s(c),d={...y9,...l},h=n(u,d);super(c,!0,h,i(u)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(null===c)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}})($t,Gt,tp,S7,mt,at,Ao),j1=(t=>null!==t&&t.isSecureContext)(Jr),lw=(t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return r()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Jr),U1=new WeakMap,E7=((t,e)=>n=>{let r=t.get(n);if(void 0!==r)return r;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r})(U1,dn),M7=j1?((t,e,n,r,s,i,o,a,c,l,u,d,h)=>{let f=0;return(p,g,_={credentials:"omit"})=>{const m=u.get(p);if(void 0!==m&&m.has(g))return Promise.resolve();const v=l.get(p);if(void 0!==v){const y=v.get(g);if(void 0!==y)return y}const w=i(p),T=void 0===w.audioWorklet?s(g).then(([y,S])=>{const[C,b]=QA(y,S);return n(`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${b}\n})})(window,'_AWGS')`)}).then(()=>{const y=h._AWGS.pop();if(void 0===y)throw new SyntaxError;r(w.currentTime,w.sampleRate,()=>y(class{},void 0,(S,C)=>{if(""===S.trim())throw e();const b=qy.get(w);if(void 0!==b){if(b.has(S))throw e();KA(C),XA(C.parameterDescriptors),b.set(S,C)}else KA(C),XA(C.parameterDescriptors),qy.set(w,new Map([[S,C]]))},w.sampleRate,void 0,void 0))}):Promise.all([s(g),Promise.resolve(t(d,d))]).then(([[y,S],C])=>{const b=f+1;f=b;const[L,F]=QA(y,S),ee=new Blob([`${L};((AudioWorkletProcessor,registerProcessor)=>{${F}\n})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${b}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),K=URL.createObjectURL(ee);return w.audioWorklet.addModule(K,_).then(()=>{if(a(w))return w;const ie=o(w);return ie.audioWorklet.addModule(K,_).then(()=>ie)}).then(ie=>{if(null===c)throw new SyntaxError;try{new c(ie,`__sac${b}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(K))});return void 0===v?l.set(p,new Map([[g,T]])):v.set(g,T),T.then(()=>{const y=u.get(p);void 0===y?u.set(p,new Set([g])):y.add(g)}).finally(()=>{const y=l.get(p);void 0!==y&&y.delete(g)}),T}})(mr,xn,(t=>e=>new Promise((n,r)=>{if(null===t)return void r(new SyntaxError);const s=t.document.head;if(null===s)r(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,d,h,f,p)=>d===a||d===t.location.href&&1===h&&1===f?(l(),r(p),!1):null!==c?c(u,d,h,f,p):void 0,i.onerror=()=>{l(),r(new SyntaxError)},i.onload=()=>{l(),n()},i.src=a,i.type="module",s.appendChild(i)}}))(Jr),lw,function(){var e=q(function*(n){try{const r=yield fetch(n);if(r.ok)return[yield r.text(),r.url]}catch{}throw new DOMException("","AbortError")});return function(n){return e.apply(this,arguments)}}(),mt,E7,at,gc,new WeakMap,new WeakMap,((t,e)=>q(function*(){if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),s=URL.createObjectURL(n);let i=!1,o=!1;try{yield r.audioWorklet.addModule(s);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),yield r.startRendering(),yield new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(s)}return i&&!o}))(gc,dn),Jr):void 0,x7=((t,e)=>n=>t(n)||e(n))(rw,at),I7=((t,e,n,r,s,i,o,a,c,l,u)=>(d,h)=>{const f=o(d)?d:i(d);if(s.has(h)){const p=new DOMException("","DataCloneError");return Promise.reject(p)}try{s.add(h)}catch{}return e(c,()=>c(f))?f.decodeAudioData(h).then(p=>(u1(h).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const _=function(){var v=q(function*(){try{yield u1(h)}catch{}});return function(){return v.apply(this,arguments)}}(),m=v=>{g(v),_()};try{f.decodeAudioData(h,v=>{"function"!=typeof v.copyFromChannel&&(l(v),Wy(v)),t.add(v),_().then(()=>p(v))},v=>{m(null===v?new DOMException("","EncodingError"):v)})}catch(v){m(v)}})})(iw,mr,0,0,new WeakSet,mt,x7,$f,Io,ow,aw),B1=((t,e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,_,m,v,w)=>class extends p{constructor(y,S){super(y,S),this._nativeContext=y,this._audioWorklet=void 0===t?void 0:{addModule:(C,b)=>t(this,C,b)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new s(this)}createBuffer(y,S,C){return new n({length:S,numberOfChannels:y,sampleRate:C})}createBufferSource(){return new r(this)}createChannelMerger(y=6){return new i(this,{numberOfInputs:y})}createChannelSplitter(y=6){return new o(this,{numberOfOutputs:y})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(y=1){return new u(this,{maxDelayTime:y})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(y,S){return new f(this,{feedback:S,feedforward:y})}createOscillator(){return new g(this)}createPanner(){return new _(this)}createPeriodicWave(y,S,C={disableNormalization:!1}){return new m(this,{...C,imag:S,real:y})}createStereoPanner(){return new v(this)}createWaveShaper(){return new w(this)}decodeAudioData(y,S,C){return l(this._nativeContext,y).then(b=>("function"==typeof S&&S(b),b),b=>{throw"function"==typeof C&&C(b),b})}})(M7,U9,A1,$9,z9,Y9,Q9,J9,t7,I7,r7,i7,a7,d7,cw,p7,v7,w7,D7,T7),A7=((t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),c=((t,e)=>t.createMediaElementSource(e.mediaElement))(a,o);if(r(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})($t,0,mt,at),N7=((t,e,n,r)=>class extends t{constructor(i,o){const a=n(i);if(r(a))throw new TypeError;const l=((t,e)=>{const n=t.createMediaStreamDestination();return tn(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(a,{...s6,...o});super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})($t,0,mt,at),O7=((t,e,n,r)=>class extends t{constructor(i,o){const a=n(i),c=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const r=n.slice(0,1),s=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(s,"mediaStream",{value:e}),s})(a,o);if(r(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})($t,0,mt,at),k7=((t,e)=>(n,{mediaStreamTrack:r})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const s=new MediaStream([r]),i=n.createMediaStreamSource(s);if("audio"!==r.kind)throw t();if(e(n))throw new TypeError;return i})(Gt,at),R7=((t,e,n)=>class extends t{constructor(s,i){const o=n(s);super(s,!0,e(o,i),null)}})($t,k7,mt),P7=((t,e,n,r,s,i,o,a,c)=>class extends t{constructor(u={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw 12===p.code&&"sampleRate is not in range"===p.message?n():p}if(null===d)throw r();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==u.sampleRate&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency="number"==typeof d.baseLatency?d.baseLatency:"balanced"===h?512/f:"interactive"===h||void 0===h?256/f:"playback"===h?1024/f:128*Math.max(2,Math.min(128,Math.round(h*f/128)))/f,this._nativeAudioContext=d,"webkitAudioContext"===c.name?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===d.state){this._state="suspended";const p=()=>{"suspended"===this._state&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Hf(this)}))}createMediaElementSource(u){return new s(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return"suspended"===this._state?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),"running"===this._nativeAudioContext.state?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw void 0===u||15===u.code?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw void 0===u?e():u})}})(B1,Gt,xn,_1,A7,N7,O7,R7,si),uw=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(R1),F7=(t=>(e,n)=>{t(e).add(n)})(uw),$1=(t=>(e,n,r=0,s=0)=>{const i=e[r];if(void 0===i)throw t();return Yf(n)?i.connect(n,0,s):i.connect(n,0)})(As),L7=(t=>(e,n)=>{t(e).delete(n)})(uw),H1=(t=>(e,n=void 0,r=void 0,s=0)=>void 0===n?e.forEach(i=>i.disconnect()):"number"==typeof n?Xf(t,e,n).disconnect():Yf(n)?void 0===r?e.forEach(i=>i.disconnect(n)):void 0===s?Xf(t,e,r).disconnect(n,0):Xf(t,e,r).disconnect(n,0,s):void 0===r?e.forEach(i=>i.disconnect(n)):Xf(t,e,r).disconnect(n,0))(As),q1=new WeakMap,V7=((t,e)=>n=>e(t,n))(q1,Kr),j7=((t,e,n,r,s,i,o,a,c,l,u,d,h)=>(f,p,g,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw c();const m=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(m.some(H=>H<1))throw c();if(m.length!==_.numberOfOutputs)throw e();if("explicit"!==_.channelCountMode)throw c();const v=_.channelCount*_.numberOfInputs,w=m.reduce((H,we)=>H+we,0),T=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(v+T>6||w>6)throw c();const y=new MessageChannel,S=[],C=[];for(let H=0;H<_.numberOfInputs;H+=1)S.push(o(f,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),C.push(s(f,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const b=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:H,maxValue:we,minValue:an,name:At}of g.parameterDescriptors){const Ze=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[At]?_.parameterData[At]:void 0===H?0:H});Object.defineProperties(Ze.offset,{defaultValue:{get:()=>void 0===H?0:H},maxValue:{get:()=>void 0===we?Un:we},minValue:{get:()=>void 0===an?er:an}}),b.push(Ze)}const L=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+T)}),F=f1(p,f.sampleRate),U=a(f,F,v+T,Math.max(1,w)),N=s(f,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),W=[];for(let H=0;H<_.numberOfOutputs;H+=1)W.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[H]}));for(let H=0;H<_.numberOfInputs;H+=1){S[H].connect(C[H]);for(let we=0;we<_.channelCount;we+=1)C[H].connect(L,we,H*_.channelCount+we)}const te=new c1(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map(({name:H},we)=>{const an=b[we];return an.connect(L,0,v+we),an.start(0),[H,an.offset]}));L.connect(U);let ee=_.channelInterpretation,K=null;const ie=0===_.numberOfOutputs?[U]:W,ye={get bufferSize(){return F},get channelCount(){return _.channelCount},set channelCount(H){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(H){throw n()},get channelInterpretation(){return ee},set channelInterpretation(H){for(const we of S)we.channelInterpretation=H;ee=H},get context(){return U.context},get inputs(){return S},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return K},set onprocessorerror(H){"function"==typeof K&&ye.removeEventListener("processorerror",K),K="function"==typeof H?H:null,"function"==typeof K&&ye.addEventListener("processorerror",K)},get parameters(){return te},get port(){return y.port2},addEventListener:(...H)=>U.addEventListener(H[0],H[1],H[2]),connect:t.bind(null,ie),disconnect:l.bind(null,ie),dispatchEvent:(...H)=>U.dispatchEvent(H[0]),removeEventListener:(...H)=>U.removeEventListener(H[0],H[1],H[2])},ae=new Map;y.port1.addEventListener=(H=>(...we)=>{if("message"===we[0]){const an="function"==typeof we[1]?we[1]:"object"==typeof we[1]&&null!==we[1]&&"function"==typeof we[1].handleEvent?we[1].handleEvent:null;if(null!==an){const At=ae.get(we[1]);void 0!==At?we[1]=At:(we[1]=Ze=>{u(f.currentTime,f.sampleRate,()=>an(Ze))},ae.set(an,we[1]))}}return H.call(y.port1,we[0],we[1],we[2])})(y.port1.addEventListener),y.port1.removeEventListener=(H=>(...we)=>{if("message"===we[0]){const an=ae.get(we[1]);void 0!==an&&(ae.delete(we[1]),we[1]=an)}return H.call(y.port1,we[0],we[1],we[2])})(y.port1.removeEventListener);let Me=null;Object.defineProperty(y.port1,"onmessage",{get:()=>Me,set:H=>{"function"==typeof Me&&y.port1.removeEventListener("message",Me),Me="function"==typeof H?H:null,"function"==typeof Me&&(y.port1.addEventListener("message",Me),y.port1.start())}}),g.prototype.port=y.port1;let Ne=null;((t,e,n,r)=>{let s=zy.get(t);void 0===s&&(s=new WeakMap,zy.set(t,s));const i=S6(n,r);return s.set(e,i),i})(f,ye,g,_).then(H=>Ne=H);const sn=Qf(_.numberOfInputs,_.channelCount),qn=Qf(_.numberOfOutputs,m),Ue=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce((H,{name:we})=>({...H,[we]:new Float32Array(128)}),{});let ci=!0;const Gi=()=>{_.numberOfOutputs>0&&U.disconnect(N);for(let H=0,we=0;H<_.numberOfOutputs;H+=1){const an=W[H];for(let At=0;At<m[H];At+=1)N.disconnect(an,we+At,At);we+=m[H]}},$=new Map;U.onaudioprocess=({inputBuffer:H,outputBuffer:we})=>{if(null!==Ne){const an=d(ye);for(let At=0;At<F;At+=128){for(let Ze=0;Ze<_.numberOfInputs;Ze+=1)for(let Ft=0;Ft<_.channelCount;Ft+=1)Zf(H,sn[Ze],Ft,Ft,At);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach(({name:Ze},Ft)=>{Zf(H,Ue,Ze,v+Ft,At)});for(let Ze=0;Ze<_.numberOfInputs;Ze+=1)for(let Ft=0;Ft<m[Ze];Ft+=1)0===qn[Ze][Ft].byteLength&&(qn[Ze][Ft]=new Float32Array(128));try{const Ze=sn.map((Rr,Wi)=>{if(an[Wi].size>0)return $.set(Wi,F/128),Rr;const kw=$.get(Wi);return void 0===kw?[]:(Rr.every(cZ=>cZ.every(lZ=>0===lZ))&&(1===kw?$.delete(Wi):$.set(Wi,kw-1)),Rr)});ci=u(f.currentTime+At/f.sampleRate,f.sampleRate,()=>Ne.process(Ze,qn,Ue));for(let Rr=0,Wi=0;Rr<_.numberOfOutputs;Rr+=1){for(let Zu=0;Zu<m[Rr];Zu+=1)l1(we,qn[Rr],Zu,Wi+Zu,At);Wi+=m[Rr]}}catch(Ze){ci=!1,ye.dispatchEvent(new ErrorEvent("processorerror",{colno:Ze.colno,filename:Ze.filename,lineno:Ze.lineno,message:Ze.message}))}if(!ci){for(let Ze=0;Ze<_.numberOfInputs;Ze+=1){S[Ze].disconnect(C[Ze]);for(let Ft=0;Ft<_.channelCount;Ft+=1)C[At].disconnect(L,Ft,Ze*_.channelCount+Ft)}if(void 0!==g.parameterDescriptors){const Ze=g.parameterDescriptors.length;for(let Ft=0;Ft<Ze;Ft+=1){const Rr=b[Ft];Rr.disconnect(L,0,v+Ft),Rr.stop()}}L.disconnect(U),U.onaudioprocess=null,on?Gi():Ic();break}}}};let on=!1;const Fs=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),xc=()=>U.connect(Fs).connect(f.destination),Ic=()=>{U.disconnect(Fs),Fs.disconnect()};return xc(),h(ye,()=>{if(ci){Ic(),_.numberOfOutputs>0&&U.connect(N);for(let H=0,we=0;H<_.numberOfOutputs;H+=1){const an=W[H];for(let At=0;At<m[H];At+=1)N.connect(an,we+At,At);we+=m[H]}}on=!0},()=>{ci&&(xc(),Gi()),on=!1})})($1,As,Gt,Fi,Iu,_c,tr,Au,xn,H1,lw,V7,Pi),U7=((t,e,n,r,s)=>(i,o,a,c,l,u)=>{if(null!==a)try{const d=new a(i,c,u),h=new Map;let f=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{"function"==typeof f&&d.removeEventListener("processorerror",f),f="function"==typeof p?p:null,"function"==typeof f&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(p=>(...g)=>{if("processorerror"===g[0]){const _="function"==typeof g[1]?g[1]:"object"==typeof g[1]&&null!==g[1]&&"function"==typeof g[1].handleEvent?g[1].handleEvent:null;if(null!==_){const m=h.get(g[1]);void 0!==m?g[1]=m:(g[1]=v=>{"error"===v.type?(Object.defineProperties(v,{type:{value:"processorerror"}}),_(v)):_(new ErrorEvent(g[0],{...v}))},h.set(_,g[1]))}}return p.call(d,"error",g[1],g[2]),p.call(d,...g)})(d.addEventListener),d.removeEventListener=(p=>(...g)=>{if("processorerror"===g[0]){const _=h.get(g[1]);void 0!==_&&(h.delete(g[1]),g[1]=_)}return p.call(d,"error",g[1],g[2]),p.call(d,g[0],g[1],g[2])})(d.removeEventListener),0!==u.numberOfOutputs){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(i.destination),s(d,()=>p.disconnect(),()=>p.connect(i.destination))}return d}catch(d){throw 11===d.code?r():d}if(void 0===l)throw r();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(u),e(i,o,l,u)})(Gt,j7,tr,xn,Pi),B7=((t,e,n,r,s,i,o,a,c,l,u,d,h,f,p,g)=>(_,m,v)=>{const w=new WeakMap;let T=null;const y=function(){var S=q(function*(C,b){let L=u(C),F=null;const U=Mn(L,b),N=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(null===d){const W=N.reduce((ie,ye)=>ie+ye,0),te=s(b,{channelCount:Math.max(1,W),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,W)}),ee=[];for(let ie=0;ie<C.numberOfOutputs;ie+=1)ee.push(r(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[ie]}));const K=o(b,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1});K.connect=e.bind(null,ee),K.disconnect=c.bind(null,ee),F=[te,ee,K]}else U||(L=new d(b,_));if(w.set(b,null===F?L:F[2]),null!==F){if(null===T){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===h)throw new Error("Missing the native OfflineAudioContext constructor.");const ye=C.channelCount*C.numberOfInputs,ae=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,Me=ye+ae;T=BG(C,0===Me?null:yield function(){var _t=q(function*(){const sn=new h(Me,128*Math.ceil(C.context.length/128),b.sampleRate),qn=[],Ue=[];for(let $=0;$<m.numberOfInputs;$+=1)qn.push(o(sn,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),Ue.push(s(sn,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const ci=yield Promise.all(Array.from(C.parameters.values()).map(function(){var $=q(function*(on){const Fs=i(sn,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:on.value});return yield f(sn,on,Fs.offset),Fs});return function(on){return $.apply(this,arguments)}}())),Gi=r(sn,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ye+ae)});for(let $=0;$<m.numberOfInputs;$+=1){qn[$].connect(Ue[$]);for(let on=0;on<m.channelCount;on+=1)Ue[$].connect(Gi,on,$*m.channelCount+on)}for(const[$,on]of ci.entries())on.connect(Gi,0,ye+$),on.start(0);return Gi.connect(sn.destination),yield Promise.all(qn.map($=>p(C,sn,$))),g(sn)});return function(){return _t.apply(this,arguments)}}()(),b,m,N,v,l)}const W=yield T,te=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ee,K,ie]=F;null!==W&&(te.buffer=W,te.start(0)),te.connect(ee);for(let ye=0,ae=0;ye<C.numberOfOutputs;ye+=1){const Me=K[ye];for(let Ne=0;Ne<N[ye];Ne+=1)ee.connect(Me,ae+Ne,Ne);ae+=N[ye]}return ie}if(U)for(const[W,te]of C.parameters.entries())yield t(b,te,L.parameters.get(W));else for(const[W,te]of C.parameters.entries())yield f(b,te,L.parameters.get(W));return yield p(C,b,L),L});return function(b,L){return S.apply(this,arguments)}}();return{render(S,C){a(C,S);const b=w.get(C);return void 0!==b?Promise.resolve(b):y(S,C)}}})(Ns,$1,mc,Fi,Iu,_c,tr,L7,H1,lw,wt,gc,dn,Os,gn,ep),$7=(t=>e=>t.get(e))(U1),H7=(t=>(e,n)=>{t.set(e,n)})(q1),z1=j1?((t,e,n,r,s,i,o,a,c,l,u,d,h,f)=>class extends e{constructor(g,_,m){var v;const w=a(g),T=c(w),y=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}))({...VG,...m});(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(y);const S=qy.get(w),C=S?.get(_),b=T||"closed"!==w.state?w:null!==(v=o(w))&&void 0!==v?v:w,L=s(b,T?null:g.baseLatency,l,_,C,y);super(g,!0,L,T?r(_,y,C):null);const U=[];L.parameters.forEach((W,te)=>{const ee=n(this,T,W);U.push([te,ee])}),this._nativeAudioWorkletNode=L,this._onprocessorerror=null,this._parameters=new c1(U),T&&t(w,this);const{activeInputs:N}=i(this);d(L,N)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const _="function"==typeof g?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=_;const m=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==m&&m===_?g:m}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(F7,$t,es,B7,U7,Bn,$7,mt,at,gc,0,H7,0,pc):void 0,G1=((t,e)=>(n,r,s)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,s)}catch(i){throw"SyntaxError"===i.name?t():i}})(xn,dn),W1=((t,e,n,r,s,i,o,a)=>(c,l)=>n(c).render(c,l).then(()=>Promise.all(Array.from(r(l)).map(u=>n(u).render(u,l)))).then(()=>s(l)).then(u=>("function"!=typeof u.copyFromChannel?(o(u),Wy(u)):e(i,()=>i(u))||a(u),t.add(u),u)))(iw,mr,nw,uw,ep,$f,ow,aw),q7=((t,e,n,r,s)=>class extends t{constructor(o,a,c){let l;if("number"==typeof o&&void 0!==a&&void 0!==c)l={length:a,numberOfChannels:o,sampleRate:c};else{if("object"!=typeof o)throw new Error("The given parameters are not valid.");l=o}const{length:u,numberOfChannels:d,sampleRate:h}={...Q6,...l},f=r(d,u,h);e(Io,()=>Io(f))||f.addEventListener("statechange",(()=>{let p=0;const g=_=>{"running"===this._state&&(p>0?(f.removeEventListener("statechange",g),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):p+=1)};return g})()),super(f,d),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Hf(this)}))}_waitForThePromiseToSettle(o){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}})(B1,mr,Gt,G1,W1),z7=((t,e)=>n=>{const r=t.get(n);return e(r)||e(n)})(Uf,rw),G7=((t,e)=>n=>t.has(n)||e(n))(By,sw),W7=((t,e)=>n=>t.has(n)||e(n))($y,M1),Y7=((t,e)=>n=>{const r=t.get(n);return e(r)||e(n)})(Uf,at);var t;function _r(t){return void 0===t}function Ee(t){return void 0!==t}function Er(t){return"number"==typeof t}function Li(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function In(t){return Array.isArray(t)}function ks(t){return"string"==typeof t}function np(t){return ks(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function X(t,e){if(!t)throw new Error(e)}function An(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Z1(t){!t.isOffline&&"running"!==t.state&&Ou('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Q1=!1,X1=!1;function K1(t){Q1=t}let dw=console;function Ou(...t){dw.warn(...t)}function J7(t,e,n){return new q7(t,e,n)}const $n="object"==typeof self?self:null,eY=$n&&($n.hasOwnProperty("AudioContext")||$n.hasOwnProperty("webkitAudioContext"));class nY{constructor(e,n,r,s){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(s||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(n=this._worker)||void 0===n||n.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function No(t){return W7(t)}function Vi(t){return G7(t)}function rp(t){return Y7(t)}function vc(t){return z7(t)}function sY(t,e){return"value"===t||No(e)||Vi(e)||function rY(t){return t instanceof A1}(e)}function Mr(t,...e){if(!e.length)return t;const n=e.shift();if(Li(t)&&Li(n))for(const r in n)sY(r,n[r])?t[r]=n[r]:Li(n[r])?(t[r]||Object.assign(t,{[r]:{}}),Mr(t[r],n[r])):Object.assign(t,{[r]:n[r]});return Mr(t,...e)}function A(t,e,n=[],r){const s={},i=Array.from(e);if(Li(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(Mr(s,{[r]:i[0]}),n.splice(n.indexOf(r),1),i.shift())),1===i.length&&Li(i[0]))Mr(s,i[0]);else for(let o=0;o<n.length;o++)Ee(i[o])&&(s[n[o]]=i[o]);return Mr(t,s)}function ts(t,e){return _r(t)?e:t}function mn(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}let ji=(()=>{class t{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...n){(this.debug||$n&&this.toString()===$n.TONE_DEBUG_CLASS)&&function X7(...t){dw.log(...t)}(this,...n)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return t.version="15.0.4",t})();const hw=1e-6;function yc(t,e){return t>e+hw}function fw(t,e){return yc(t,e)||ns(t,e)}function sp(t,e){return t+hw<e}function ns(t,e){return Math.abs(t-e)<hw}class xr extends ji{constructor(){super(),this.name="Timeline",this._timeline=[];const e=A(xr.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(X(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length)X(fw(e.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e);else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(e){const n=this._timeline.indexOf(e);return-1!==n&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return-1!==r?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(ns(this._timeline[n].time,e)){for(let r=n;r>=0&&ns(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else 1===this._timeline.length&&fw(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(0===this._timeline.length)return-1;let r=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][n]<=e)return s-1;for(;r<i;){let o=Math.floor(r+(i-r)/2);const a=this._timeline[o],c=this._timeline[o+1];if(ns(a[n],e)){for(let l=o;l<this._timeline.length&&ns(this._timeline[l][n],e);l++)o=l;return o}if(sp(a[n],e)&&yc(c[n],e))return o;yc(a[n],e)?i=o:r=o+1}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return-1!==r&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let s=this._search(e),i=this._search(n);return-1!==s&&-1!==i?(this._timeline[s].time!==e&&(s+=1),this._timeline[i].time===n&&(i-=1),this._iterate(r,s,i)):-1===s&&this._iterate(r,0,i),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(-1!==r&&ns(this._timeline[r].time,e)){let s=r;for(let i=r;i>=0&&ns(this._timeline[i].time,e);i--)s=i;this._iterate(i=>{n(i)},s,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const J1=[];function ip(t){J1.push(t)}const eN=[];function op(t){eN.push(t)}class ku extends ji{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(s=>{_r(this._events)&&(this._events={}),this._events.hasOwnProperty(s)||(this._events[s]=[]),this._events[s].push(n)}),this}once(e,n){const r=(...s)=>{n(...s),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(s=>{if(_r(this._events)&&(this._events={}),this._events.hasOwnProperty(s))if(_r(n))this._events[s]=[];else{const i=this._events[s];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let s=0,i=r.length;s<i;s++)r[s].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(ku.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class tN extends ku{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ru extends tN{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new xr,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=A(Ru.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=function K7(t){return new P7(t)}({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new nY(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[null!==(n=arguments[0])&&void 0!==n&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function aY(t){J1.forEach(e=>e(t))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return X(vc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return X(vc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return X(vc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){X(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){X(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){X(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){X(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return function tY(t,e,n){return X(Ee(z1),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof $n?.BaseAudioContext?$n?.AudioWorkletNode:z1)(t,e,n)}(this.rawContext,e,n)}addAudioWorkletModule(e){return it(this,void 0,void 0,function*(){X(Ee(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return it(this,void 0,void 0,function*(){(yield this._workletPromise)||Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return vc(this._context)?this._context.resume():Promise.resolve()}close(){return it(this,void 0,void 0,function*(){vc(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&function cY(t){eN.forEach(e=>e(t))}(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=n,s.loop=!0,s.start(0),this._constants.set(e,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),s()},id:r,time:i+n})};return s(),r}}function se(t,e){In(e)?e.forEach(n=>se(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Pu(t,e){In(e)?e.forEach(n=>Pu(t,n)):Object.defineProperty(t,e,{writable:!0})}const Re=()=>{};let rs=(()=>{class t extends ji{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Re;const n=A(t.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=n.reverse,this.onload=n.onload,ks(n.url)?this.load(n.url).catch(n.onerror):n.url&&this.set(n.url)}static getDefaults(){return{onerror:Re,onload:Re,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ss().sampleRate}set(n){return n instanceof t?n.loaded?this._buffer=n.get():n.onload=()=>{this.set(n),this.onload(this)}:this._buffer=n,this._reversed&&this._reverse(),this}get(){return this._buffer}load(n){return it(this,void 0,void 0,function*(){const r=t.load(n).then(s=>{this.set(s),this.onload(this)});t.downloads.push(r);try{yield r}finally{const s=t.downloads.indexOf(r);t.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(n){const r=In(n)&&n[0].length>0,s=r?n.length:1,i=r?n[0].length:n.length,o=ss(),a=o.createBuffer(s,i,o.sampleRate),c=r||1!==s?n:[n];for(let l=0;l<s;l++)a.copyToChannel(c[l],l);return this._buffer=a,this}toMono(n){if(Er(n))this.fromArray(this.toArray(n));else{let r=new Float32Array(this.length);const s=this.numberOfChannels;for(let i=0;i<s;i++){const o=this.toArray(i);for(let a=0;a<o.length;a++)r[a]+=o[a]}r=r.map(i=>i/s),this.fromArray(r)}return this}toArray(n){if(Er(n))return this.getChannelData(n);if(1===this.numberOfChannels)return this.toArray(0);{const r=[];for(let s=0;s<this.numberOfChannels;s++)r[s]=this.getChannelData(s);return r}}getChannelData(n){return this._buffer?this._buffer.getChannelData(n):new Float32Array(0)}slice(n,r=this.duration){X(this.loaded,"Buffer is not loaded");const s=Math.floor(n*this.sampleRate),i=Math.floor(r*this.sampleRate);X(s<i,"The start time must be less than the end time");const o=i-s,a=ss().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(s,i),c);return new t(a)}_reverse(){if(this.loaded)for(let n=0;n<this.numberOfChannels;n++)this.getChannelData(n).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(n){this._reversed!==n&&(this._reversed=n,this._reverse())}static fromArray(n){return(new t).fromArray(n)}static fromUrl(n){return it(this,void 0,void 0,function*(){return yield(new t).load(n)})}static load(n){return it(this,void 0,void 0,function*(){const r=n.match(/\[([^\]\[]+\|.+)\]$/);if(r){const l=r[1].split("|");let u=l[0];for(const d of l)if(t.supportsType(d)){u=d;break}n=n.replace(r[0],u)}const s=""===t.baseUrl||t.baseUrl.endsWith("/")?t.baseUrl:t.baseUrl+"/",i=document.createElement("a");i.href=s+n,i.pathname=(i.pathname+i.hash).split("/").map(encodeURIComponent).join("/");const o=yield fetch(i.href);if(!o.ok)throw new Error(`could not load url: ${n}`);const a=yield o.arrayBuffer();return yield ss().decodeAudioData(a)})}static supportsType(n){const r=n.split("."),s=r[r.length-1];return""!==document.createElement("audio").canPlayType("audio/"+s)}static loaded(){return it(this,void 0,void 0,function*(){for(yield Promise.resolve();t.downloads.length;)yield t.downloads[0]})}}return t.baseUrl="",t.downloads=[],t})();class ap extends Ru{constructor(){super({clockSource:"offline",context:rp(arguments[0])?arguments[0]:J7(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:rp(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=rp(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return it(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r==0&&(yield new Promise(s=>setTimeout(s,1)))}})}render(){return it(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new rs(n)})}close(){return Promise.resolve()}}const nN=new class lY extends tN{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return it(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let ko=nN;function ss(){return ko===nN&&eY&&function uY(t,e=!1){e&&ko.dispose(),ko=vc(t)?new Ru(t):rp(t)?new ap(t):t}(new Ru),ko}if($n&&!$n.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}15.0.4 * `,"background: #000; color: #fff")}function Lu(t){return Math.pow(2,t/12)}let lp=440;function Ro(t){return Math.round(rN(t))}function rN(t){return 69+12*Math.log2(t/lp)}class pw extends ji{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),s="."===n?1.5:1;return 1===r?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/r)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let s=0;return e&&"0"!==e&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n))),r&&"0"!==r&&(s+=this._beatsToUnits(parseFloat(r)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof pw&&this.fromType(this._val),_r(this._val))return this._noArg();if(ks(this._val)&&_r(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Li(this._val)){let e=0;for(const n in this._val)if(Ee(this._val[n])){const r=this._val[n];e+=new this.constructor(this.context,n).valueOf()*r}return e}if(Ee(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}return ks(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Ir extends pw{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Ir(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),s=this.valueOf();return s+(Math.round(s/r)*r-s)*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let r=n[0],s=new Ir(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Ir(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(s-e)&&(r=i,s=o)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let s=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=s.toString();return i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3))),[r,n,s].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ro(this.toFrequency())}_now(){return this.context.now()}}class nr extends Ir{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function hY(){return lp}()}static set A4(e){!function fY(t){lp=t}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:nr.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const s=pY[e.toLowerCase()]+12*(parseInt(n,10)+1);return"midi"===this.defaultUnits?s:nr.mtof(s)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let s=1;return e&&"0"!==e&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n))),r&&"0"!==r&&(s*=this._beatsToUnits(parseFloat(r)/4)),s}}})}transpose(e){return new nr(this.context,this.valueOf()*Lu(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Ro(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/nr.A4);let r=Math.round(12*n)+57;const s=Math.floor(r/12);return s<0&&(r+=-12*s),gY[r%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return function sN(t){return lp*Math.pow(2,(t-69)/12)}(e)}static ftom(e){return Ro(e)}}const pY={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},gY=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class nn extends Ir{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class hn extends ji{constructor(){super();const e=A(hn.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:e.context}static getDefaults(){return{context:ss()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return function Q7(t){_r(t)&&Q1&&!X1&&(X1=!0,Ou("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}(e),new Ir(this.context,e).toSeconds()}toFrequency(e){return new nr(this.context,e).toFrequency()}toTicks(e){return new nn(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{_r(e[r])&&delete n[r]}),n}get(){const e=function oY(t){return t.constructor.getDefaults()}(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];Ee(r)&&Ee(r.value)&&Ee(r.setValueAtTime)?e[n]=r.value:r instanceof hn?e[n]=r._getPartialProperties(e[n]):In(r)||Er(r)||ks(r)||function Y1(t){return"boolean"==typeof t}(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Ee(this[n])&&(this[n]&&Ee(this[n].value)&&Ee(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof hn?this[n].set(e[n]):this[n]=e[n])}),this}}class Vu extends xr{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return null!==n?n.state:this._initial}setStateAtTime(e,n,r){return An(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){for(let s=this._search(n);s>=0;s--){const i=this._timeline[s];if(i.state===e)return i}}getNextState(e,n){const r=this._search(n);if(-1!==r)for(let s=r;s<this._timeline.length;s++){const i=this._timeline[s];if(i.state===e)return i}}}class ve extends hn{constructor(){const e=A(ve.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,X(Ee(e.param)&&(No(e.param)||e.param instanceof ve),"param must be an AudioParam");!No(e.param);)e.param=e.param._param;this._swappable=!!Ee(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new xr(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ee(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(hn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ee(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Ee(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Ee(this.maxValue)&&Ee(this.minValue)&&An(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?function Fu(t){return Math.pow(10,t/20)}(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?function cp(t){return Math.log(t)/Math.LN10*20}(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),s=this._fromType(e);return X(isFinite(s)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),s=this._events.get(n);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==r&&"setValueAtTime"!==r.type)if(null===r)i=s.value;else if("linearRampToValueAtTime"===r.type||"exponentialRampToValueAtTime"===r.type){let o=s.value;if("setTargetAtTime"===s.type){const a=this._events.getBefore(s.time);o=null===a?this._initialValue:a.value}i="linearRampToValueAtTime"===r.type?this._linearInterpolate(s.time,o,r.time,r.value,n):this._exponentialInterpolate(s.time,o,r.time,r.value,n)}else i=s.value;else{const o=this._events.getBefore(s.time);let a;a=null===o?this._initialValue:o.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,a,s.value,s.constant,n))}return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(n)&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),s=this.toSeconds(n);return X(isFinite(r)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:s,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,s),this._param.linearRampToValueAtTime(r,s),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=ns(r,0)?this._minOutput:r,this._assertRange(r);const s=this.toSeconds(n);return X(isFinite(r)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,s),this._param.exponentialRampToValueAtTime(r,s),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const s=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,s),this.cancelAndHoldAtTime(n+.9*r),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const s=this._fromType(e);X(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(s),X(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(s,i,r),this}setValueCurveAtTime(e,n,r,s=1){r=this.toSeconds(r),n=this.toSeconds(n);const i=this._fromType(e[0])*s;this.setValueAtTime(this._toType(i),n);const o=r/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*s;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return X(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));X(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const s=this._events.get(n),i=this._events.getAfter(n);return s&&ns(s.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(r),n):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&"setTargetAtTime"===r.type){const s=this._events.getAfter(r.time),i=s?s.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,s=>{"cancelScheduledValues"===s.type?e.cancelScheduledValues(s.time):"setTargetAtTime"===s.type?e.setTargetAtTime(s.value,s.time,s.constant):e[s.type](s.value,s.time)}),this}setParam(e){X(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,s,i){return r+(n-r)*Math.exp(-(i-e)/s)}_linearInterpolate(e,n,r,s,i){return n+(i-e)/(r-e)*(s-n)}_exponentialInterpolate(e,n,r,s,i){return n*Math.pow(s/n,(i-e)/(r-e))}}class R extends hn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ee(this.input)?No(this.input)||this.input instanceof ve?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ee(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ee(e)&&(e instanceof R||Vi(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();X(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return rr(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ou("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return function iN(t,e,n=0,r=0){if(Ee(e))for(;e instanceof R;)e=e.input;for(;!Vi(t);)Ee(t.output)&&(t=t.output);No(e)?t.disconnect(e,n):Vi(e)?t.disconnect(e,n,r):t.disconnect()}(this,e,n,r),this}chain(...e){return Ar(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Ee(this.input)&&(this.input instanceof R?this.input.dispose():Vi(this.input)&&this.input.disconnect()),Ee(this.output)&&(this.output instanceof R?this.output.dispose():Vi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Ar(...t){const e=t.shift();t.reduce((n,r)=>(n instanceof R?n.connect(r):Vi(n)&&rr(n,r),r),e)}function rr(t,e,n=0,r=0){for(X(Ee(t),"Cannot connect from undefined node"),X(Ee(e),"Cannot connect to undefined node"),(e instanceof R||Vi(e))&&X(e.numberOfInputs>0,"Cannot connect to node with no inputs"),X(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof R||e instanceof ve;)Ee(e.input)&&(e=e.input);for(;t instanceof R;)Ee(t.output)&&(t=t.output);No(e)?t.connect(e,n):t.connect(e,n,r)}class Q extends R{constructor(){const e=A(Q.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new ve({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),se(this,"gain")}static getDefaults(){return Object.assign(R.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class wc extends R{constructor(e){super(e),this.onended=Re,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Q({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return-1!==this._startTime&&r>=this._startTime&&(-1===this._stopTime||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(R.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Re})}_startGain(e,n=1){X(-1===this._startTime,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){X(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r="exponential"===this._curve?2*n:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Re&&(this.onended(this),this.onended=Re,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),X(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Re,this}}class up extends wc{constructor(){const e=A(up.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),rr(this._source,this._gainNode),this.offset=new ve({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(wc.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class oe extends R{constructor(){const e=A(oe.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new up({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(R.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return dp(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,s){return this._param.setValueCurveAtTime(e,n,r,s),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function dp(t,e,n,r){(e instanceof ve||No(e)||e instanceof oe&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof oe&&(e.overridden=!0)),rr(t,e,n,r)}class gw extends ve{constructor(){const e=A(gw.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new xr(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ve.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const s=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/r,1));for(let a=0;a<=o;a++){const c=r*a+n,l=this._exponentialApproach(i.time,i.value,s,r,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const s=this._events.get(r),i=this._events.previousEvent(s),o=this._getTicksUntilEvent(i,r);return s.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),s=this._events.get(n),i=Math.round(Math.max(10*(n-s.time),1)),o=(n-s.time)/i;for(let a=0;a<=i;a++){const c=o*a+s.time,l=this._exponentialInterpolate(s.time,s.value,n,r,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,n){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(_r(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let s=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+s)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(n);return this.getTimeOfTick(s+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&"linearRampToValueAtTime"===r.type&&n.value!==r.value){const s=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(r.time))-s)/(r.time-n.time),a=Math.sqrt(Math.pow(s,2)-2*o*(n.ticks-e)),c=(-s+a)/o;return(c>0?c:(-s-a)/o)+n.time}return n?0===n.value?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),s=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+s)-i}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class mw extends oe{constructor(){const e=A(mw.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new gw({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class _w extends hn{constructor(){const e=A(_w.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Vu,this._tickOffset=new xr,this._ticksAtTime=new xr,this._secondsAtTime=new xr,this.frequency=new mw({context:this.context,units:e.units,value:e.frequency}),se(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},hn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return"started"!==this._state.getValueAtTime(r)&&(this._state.setStateAtTime("started",r),Ee(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(n)){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return"started"===this._state.getValueAtTime(n)&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),s=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=s||r,a=s?s.ticks:0,c=null;return this._state.forEachBetween(o.time,n+this.sampleTime,l=>{let u=o.time;const d=this._tickOffset.get(l.time);d&&d.time>=o.time&&(a=d.ticks,u=d.time),"started"===o.state&&"started"!==l.state&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const s=this._secondsAtTime.get(e);let i=s||n,o=s?s.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),"started"===i.state&&"started"!==c.state&&(o+=c.time-l,c.time!==r.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(r),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),s=this._state.get(n),i=Math.max(r.time,s.time),o=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,r){let s=this._state.get(e);this._state.forEachBetween(e,n,o=>{s&&"started"===s.state&&"started"!==o.state&&this.forEachTickBetween(Math.max(s.time,e),o.time-this.sampleTime,r),s=o});let i=null;if(s&&"started"===s.state){const o=Math.max(s.time,e),a=this.frequency.getTicksAtTime(o),l=a-this.frequency.getTicksAtTime(s.time);let u=Math.ceil(l)-l;u=ns(u,1)?0:u;let d=this.frequency.getTimeOfTick(a+u);for(;d<n;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(h){i=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class ju extends hn{constructor(){const e=A(ju.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Re,this._lastUpdate=0,this._state=new Vu("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new _w({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,se(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(hn.getDefaults(),{callback:Re,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Z1(this.context);const r=this.toSeconds(e);return this.log("start",r),"started"!==this._state.getValueAtTime(r)&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return"started"===this._state.getValueAtTime(n)&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),s=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(s+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const s=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,s);break;case"stopped":0!==r.time&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time)}}),this._tickSource.forEachTickBetween(e,n,(r,s)=>{this.callback(r,s)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ku.mixin(ju);class Ui extends R{constructor(){const e=A(Ui.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Q({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,se(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(R.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class vw extends R{constructor(){const e=A(vw.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ui({context:this.context}),this.output=new Q({context:this.context}),this.volume=this.input.volume,Ar(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(R.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Ar(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ip(t=>{t.destination=new vw({context:t})}),op(t=>{t.destination.dispose()});class mY extends R{constructor(){super(...arguments),this.name="Listener",this.positionX=new ve({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ve({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ve({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ve({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ve({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ve({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ve({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ve({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ve({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(R.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ip(t=>{t.listener=new mY({context:t})}),op(t=>{t.listener.dispose()});class hp extends ji{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=A(hp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++,this.add(n,e.urls[n],this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Re,onload:Re,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return X(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=Re,s=Re){return ks(n)?(this.baseUrl&&"data:audio/"===n.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new rs(this.baseUrl+n,r,s))):this._buffers.set(e.toString(),new rs(n,r,s)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class xt extends nn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class _Y extends hn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new xr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ip(t=>{t.draw=new _Y({context:t})}),op(t=>{t.draw.dispose()});class vY extends ji{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){X(Ee(e.time),"Events must have a time property"),X(Ee(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new yY(e.time,e.time+e.duration,e);for(null===this._root?this._root=n:this._root.insert(n),this._length++;null!==n;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(null!==this._root){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,n){null!==e.parent?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let r,s=null;if(e.getBalance()>0)if(null===e.left.right)r=e.left,r.right=e.right,s=r;else{for(r=e.left.right;null!==r.right;)r=r.right;r.parent&&(r.parent.right=r.left,s=r.parent,r.left=e.left,r.right=e.right)}else if(null===e.right.left)r=e.right,r.left=e.left,s=r;else{for(r=e.right.left;null!==r.left;)r=r.left;r.parent&&(r.parent.left=r.right,s=r.parent,r.left=e.left,r.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),s&&this._rebalance(s)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),s=e.right;s&&(e.right=s.left,s.left=e),null!==n?r?n.left=s:n.right=s:this._setRoot(s)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),s=e.left;s&&(e.left=s.right,s.right=e),null!==n?r?n.left=s:n.right=s:this._setRoot(s)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let s=1;s<n.length;s++)n[s].low>r.low&&(r=n[s]);return r.event}}return null}forEach(e){if(null!==this._root){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(null!==this._root){const r=[];this._root.search(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}forEachFrom(e,n){if(null!==this._root){const r=[];this._root.searchAfter(e,r),r.forEach(s=>{s.event&&n(s.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class yY{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(null!==this.left&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&null!==this.right&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),null!==this.left&&this.left.searchAfter(e,n)),null!==this.right&&this.right.searchAfter(e,n)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class wY extends ji{constructor(e){super(),this.name="TimelineValue",this._timeline=new xr({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class vr extends R{constructor(){super(A(vr.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return dp(this,e,n,r),this}}class Rs extends vr{constructor(){const e=A(Rs.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,In(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):function Z7(t){return"function"==typeof t}(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(oe.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let s=0,i=n;s<i;s++)r[s]=e(s/(i-1)*2-1,s);return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){X(["none","2x","4x"].some(r=>r.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Bu extends vr{constructor(){const e=A(Bu.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Rs({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(vr.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}let fp=(()=>{class t{constructor(n,r){this.id=t._eventId++,this._remainderTime=0;const s=Object.assign(t.getDefaults(),r);this.transport=n,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Re,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(n){if(this.callback){const r=this.transport.bpm.getDurationOfTicks(1,n);this.callback(n+this._remainderTime*r),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}return t._eventId=0,t})();class yw extends fp{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(yw.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},fp.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return sp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new xt(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){sp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new xt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);yc(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class pp extends hn{constructor(){const e=A(pp.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new wY(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new xr,this._repeatedEvents=new vY,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new ju({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),se(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(hn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!=0&&n%(2*this._swingTicks)!=0){const s=Math.sin(n%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;e+=new xt(this.context,2*this._swingTicks/3).toSeconds()*s}K1(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),K1(!1)}schedule(e,n){const r=new fp(this,{callback:e,time:new nn(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,s=1/0){const i=new yw(this,{callback:e,duration:new Ir(this.context,s).toTicks(),interval:new Ir(this.context,n).toTicks(),time:new nn(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const r=new fp(this,{callback:e,once:!0,time:new nn(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new xt(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){let r;return this.context.resume(),Ee(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){In(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Ir(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Ir(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new xt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new xt(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if("started"===this.state){const r=this._clock.getTicksAtTime(n),i=n+this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n);this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const n=this.now(),r=this.getTicksAtTime(n);return this._clock.nextTickTime(e-r%e,n)}}syncSignal(e,n){const r=this.now();let s=this.bpm,i=1/(60/s.getValueAtTime(r)/this.PPQ),o=[];if("time"===e.units){const c=.015625/i,l=new Q(c),u=new Bu(-1),d=new Q(c);s.chain(l,u,d),s=d,i=1/i,o=[l,u,d]}n||(n=0!==e.getValueAtTime(r)?e.getValueAtTime(r)/i:0);const a=new Q(n);return s.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(s=>s.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Pu(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ku.mixin(pp),ip(t=>{t.transport=new pp({context:t})}),op(t=>{t.transport.dispose()});class Rt extends R{constructor(e){super(e),this.input=void 0,this._state=new Vu("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Re,this._syncedStop=Re,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ui({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,se(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(R.getDefaults(),{mute:!1,onstop:Re,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let s=_r(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const i=this._state.get(s);i&&(i.offset=this.toSeconds(ts(n,0)),i.duration=r?this.toSeconds(r):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,r)},s);this._scheduled.push(o),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Z1(this.context),this._start(s,n,r);else X(yc(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,n,r);return this}stop(e){let n=_r(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),"started"===this._state.getValueAtTime(n)||Ee(this._state.getNextState("started",n))){if(this.log("stop",n),this._synced){const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}else this._stop(n);this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(yc(n,0)){const r=this._state.get(n);if(r&&"started"===r.state&&r.time!==n){const s=n-this.toSeconds(r.time);let i;r.duration&&(i=this.toSeconds(r.duration)-s),this._start(e,this.toSeconds(r.offset)+s,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(n)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Re,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class bc extends wc{constructor(){const e=A(bc.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,rr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ve({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new rs(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(wc.getDefaults(),{url:new rs,loop:!1,loopEnd:0,loopStart:0,onload:Re,onerror:Re,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,s=1){X(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,s),n=ts(n,this.loop?this.loopStart:0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;fw(o,a)&&(o=(o-c)%l+c),ns(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,sp(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Ee(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Fo(t,e){return it(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,r=new ap(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class mp extends wc{constructor(){const e=A(mp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],rr(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new ve({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new ve({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),se(this,["frequency","detune"])}static getDefaults(){return Object.assign(wc.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let Hn=(()=>{class t extends Rt{constructor(){const n=A(t.getDefaults(),arguments,["frequency","type"]);super(n),this.name="Oscillator",this._oscillator=null,this.frequency=new oe({context:this.context,units:"frequency",value:n.frequency}),se(this,"frequency"),this.detune=new oe({context:this.context,units:"cents",value:n.detune}),se(this,"detune"),this._partials=n.partials,this._partialCount=n.partialCount,this._type=n.type,n.partialCount&&"custom"!==n.type&&(this._type=this.baseType+n.partialCount.toString()),this.phase=n.phase}static getDefaults(){return Object.assign(Rt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(n){const r=this.toSeconds(n),s=new mp({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(r)}_stop(n){const r=this.toSeconds(n);this._oscillator&&this._oscillator.stop(r)}_restart(n){const r=this.toSeconds(n);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return t._periodicWaveCache.find(r=>r.phase===this._phase&&function iY(t,e){return t.length===e.length&&t.every((n,r)=>e[r]===n)}(r.partials,this._partials));{const n=t._periodicWaveCache.find(r=>r.type===this._type&&r.phase===this._phase);return this._partialCount=n?n.partialCount:this._partialCount,n}}get type(){return this._type}set type(n){this._type=n;const r=-1!==["sine","square","sawtooth","triangle"].indexOf(n);if(0===this._phase&&r)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=n);else{const s=this._getCachedPeriodicWave();if(Ee(s)){const{partials:i,wave:o}=s;this._wave=o,this._partials=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,o]=this._getRealImaginary(n,this._phase),a=this.context.createPeriodicWave(i,o);this._wave=a,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),t._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),t._periodicWaveCache.length>100&&t._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(n){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==n?n+this.partialCount:n}get partialCount(){return this._partialCount}set partialCount(n){An(n,0);let r=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(r=s[1]),"custom"!==this._type)this.type=0===n?r:r+n.toString();else{const i=new Float32Array(n);this._partials.forEach((o,a)=>i[a]=o),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(n,r){let i=2048;const o=new Float32Array(i),a=new Float32Array(i);let c=1;if("custom"===n){if(c=this._partials.length+1,this._partialCount=this._partials.length,i=c,0===this._partials.length)return[o,a]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(n);l?(c=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),n=l[1],c=Math.max(c,2),i=c):this._partialCount=0,this._partials=[]}for(let l=1;l<i;++l){const u=2/(l*Math.PI);let d;switch(n){case"sine":d=l<=c?1:0,this._partials[l-1]=d;break;case"square":d=1&l?2*u:0,this._partials[l-1]=d;break;case"sawtooth":d=u*(1&l?1:-1),this._partials[l-1]=d;break;case"triangle":d=1&l?u*u*2*(l-1>>1&1?-1:1):0,this._partials[l-1]=d;break;case"custom":d=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+n)}0!==d?(o[l]=-d*Math.sin(r*l),a[l]=d*Math.cos(r*l)):(o[l]=0,a[l]=0)}return[o,a]}_inverseFFT(n,r,s){let i=0;const o=n.length;for(let a=0;a<o;a++)i+=n[a]*Math.cos(a*s)+r[a]*Math.sin(a*s);return i}getInitialValue(){const[n,r]=this._getRealImaginary(this._type,0);let s=0;const i=2*Math.PI;for(let a=0;a<32;a++)s=Math.max(this._inverseFFT(n,r,a/32*i),s);return function Oo(t,e,n){return Math.max(Math.min(t,n),e)}(-this._inverseFFT(n,r,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(n){this._partials=n,this._partialCount=this._partials.length,n.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(n){this._phase=n*Math.PI/180,this.type=this._type}asArray(){return it(this,arguments,void 0,function*(n=1024){return Fo(this,n)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return t._periodicWaveCache=[],t})();class bw extends vr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Rs({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class It extends oe{constructor(){const e=A(It.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Q({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(oe.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class _p extends Rt{constructor(){const e=A(_p.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new bw({context:this.context}),this._modulationNode=new Q({context:this.context}),this._carrier=new Hn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Hn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new It({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),se(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Hn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return it(this,arguments,void 0,function*(e=1024){return Fo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class $u extends Rt{constructor(){const e=A($u.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Q({context:this.context,gain:0}),this._carrier=new Hn({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new oe({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Hn({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new It({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new It({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),se(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Hn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return it(this,arguments,void 0,function*(e=1024){return Fo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Hu extends Rt{constructor(){const e=A(Hu.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Q({context:this.context,gain:0}),this._thresh=new Rs({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new oe({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Hn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),se(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Rt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return it(this,arguments,void 0,function*(e=1024){return Fo(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class vp extends Rt{constructor(){const e=A(vp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new oe({context:this.context,units:"frequency",value:e.frequency}),this.detune=new oe({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,se(this,["frequency","detune"])}static getDefaults(){return Object.assign(Hn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((s,i)=>s.detune.value=n+r*i)}}get count(){return this._oscillators.length}set count(e){if(An(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new Hn({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:0===n?()=>this.onstop(this):Re});"custom"===this.type&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,"started"===this.state&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return it(this,arguments,void 0,function*(e=1024){return Fo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class yp extends Rt{constructor(){const e=A(yp.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new It({context:this.context,value:2}),this._pulse=new Hu({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Hn({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),se(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Rt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return it(this,arguments,void 0,function*(e=1024){return Fo(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const aN={am:_p,fat:vp,fm:$u,oscillator:Hn,pulse:Hu,pwm:yp};class Bi extends Rt{constructor(){const e=A(Bi.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new oe({context:this.context,units:"frequency",value:e.frequency}),this.detune=new oe({context:this.context,units:"cents",value:e.detune}),se(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Hn.getDefaults(),$u.getDefaults(),_p.getDefaults(),vp.getDefaults(),Hu.getDefaults(),yp.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=aN[e],r=this.now();if(this._oscillator){const s=this._oscillator;s.stop(r),this.context.setTimeout(()=>s.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(n=this._oscillator.type),"fm"===e?this.type="fm"+n:"am"===e?this.type="am"+n:"fat"===e?this.type="fat"+n:"oscillator"===e?this.type=n:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,n){return e instanceof aN[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==e&&"pwm"!==e&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Er(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Er(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ks(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return it(this,arguments,void 0,function*(e=1024){return Fo(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function cN(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){An(i,t,e),n.set(this,i)}})}}function oi(t,e=1/0){const n=new WeakMap;return function(r,s){Reflect.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){An(this.toSeconds(i),t,e),n.set(this,i)}})}}class qu extends Rt{constructor(){const e=A(qu.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new rs({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Rt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Re,onerror:Re,playbackRate:1,reverse:!1})}load(e){return it(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Re){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){n=ts(n,this._loop?this._loopStart:0);const s=this.toSeconds(n),i=r;r=ts(r,Math.max(this._buffer.duration-s,0));let o=this.toSeconds(r);o/=this._playbackRate,e=this.toSeconds(e);const a=new bc({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&_r(i)?a.start(e,s):a.start(e,s,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var s;null===(s=[...this._activeSources].pop())||void 0===s||s.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if("started"===this._state.getValueAtTime(r)){const s=this.toSeconds(e);this._stop(r),this._start(r,s)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&An(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&An(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(s=>s.cancelStop())),this._activeSources.forEach(s=>{s.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Tr([oi(0)],qu.prototype,"fadeIn",void 0),Tr([oi(0)],qu.prototype,"fadeOut",void 0);class Nn extends R{constructor(){const e=A(Nn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new oe({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(R.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ks(e))return e;{let r;for(r in wp)if(wp[r][n]===e)return r;return e}}_setCurve(e,n,r){if(ks(r)&&Reflect.has(wp,r)){const s=wp[r];Li(s)?"_decayCurve"!==e&&(this[e]=s[n]):this[e]=s}else{if(!In(r)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+r);this[e]=r}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let s=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0&&(s=(1-o)/(1/s)),s<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(n,s,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(n,s,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,s,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=e+s;this.log("decay",c),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,r,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,r,e):(X(In(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return dp(this,e,n,r),this}asArray(){return it(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,r=new ap(1,n,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),o=.1*i,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(n*(s+o)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Tr([oi(0)],Nn.prototype,"attack",void 0),Tr([oi(0)],Nn.prototype,"decay",void 0),Tr([cN(0,1)],Nn.prototype,"sustain",void 0),Tr([oi(0)],Nn.prototype,"release",void 0);const wp=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const s=[];for(e=0;e<127;e++){n=e/127;const h=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;s[e]=h/10+.83*n}s[127]=1;const o=[];for(e=0;e<128;e++)o[e]=Math.ceil(e/127*5)/5;const c=[];for(e=0;e<128;e++)n=e/127,c[e]=.5*(1-Math.cos(Math.PI*n));const l=[];for(e=0;e<128;e++){n=e/127;const h=4*Math.pow(n,3)+.2,f=Math.cos(h*Math.PI*2*n);l[e]=Math.abs(f*(1-n))}function u(h){const f=new Array(h.length);for(let p=0;p<h.length;p++)f[p]=1-h[p];return f}return{bounce:{In:u(l),Out:l},cosine:{In:r,Out:function d(h){return h.slice(0).reverse()}(r)},exponential:"exponential",linear:"linear",ripple:{In:s,Out:u(s)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class Or extends R{constructor(){const e=A(Or.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Ui({context:this.context,volume:e.volume}),this.volume=this._volume.volume,se(this,"volume")}static getDefaults(){return Object.assign(R.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...s)=>{const o=this.context.transport.schedule(a=>{s[n]=a,r.apply(this,s)},s[n]);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,s){const i=this.toSeconds(r),o=this.toSeconds(n);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class _n extends Or{constructor(){const e=A(_n.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Or.getDefaults(),{detune:0,onsilence:Re,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const s=this.toSeconds(n);return this._triggerEnvelopeAttack(s,r),this.setNote(e,s),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),s=e instanceof nr?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,i,r)}else this.frequency.setValueAtTime(s,r);return this}}Tr([oi(0)],_n.prototype,"portamento",void 0);class zu extends Nn{constructor(){super(A(zu.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Q({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Hi extends _n{constructor(){const e=A(Hi.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Bi(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new zu(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),se(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(_n.getDefaults(),{envelope:Object.assign(mn(Nn.getDefaults(),Object.keys(R.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(mn(Bi.getDefaults(),[...Object.keys(Rt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),0===this.envelope.sustain){const r=this.toSeconds(this.envelope.attack),s=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+s)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Dp extends Hi{constructor(){const e=A(Dp.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,se(this,["oscillator","envelope"])}static getDefaults(){return Mr(_n.getDefaults(),Hi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),s=this.toFrequency(e instanceof nr?e.toFrequency():e);return this.oscillator.frequency.setValueAtTime(s*this.octaves,r),this.oscillator.frequency.exponentialRampToValueAtTime(s,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Tr([cN(0)],Dp.prototype,"octaves",void 0),Tr([oi(0)],Dp.prototype,"pitchDecay",void 0);const Ew=new Set;function Mw(t){Ew.add(t)}function vN(t,e){Ew.add(`registerProcessor("${t}", ${e})`)}Mw('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Mw("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Mw("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");vN("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Mp extends Or{constructor(){const e=A(Mp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(r=>{const s=parseInt(r,10);if(X(np(r)||Er(s)&&isFinite(s),`url key is neither a note or midi pitch: ${r}`),np(r)){const i=new nr(this.context,r).toMidi();n[i]=e.urls[r]}else Er(s)&&isFinite(s)&&(n[s]=e.urls[s])}),this._buffers=new hp({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Or.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Re,onerror:Re,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=rN(new nr(this.context,s).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),u=this._buffers.get(o-c),d=Lu(c+a),h=new bc({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,u.duration/d,r),In(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(h);-1!==p&&f.splice(p,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const s=new nr(this.context,r).toMidi();if(this._activeSources.has(s)&&this._activeSources.get(s).length){const i=this._activeSources.get(s);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(s,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,s=1){const i=this.toSeconds(r);return this.triggerAttack(e,i,s),In(n)?(X(In(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,r){if(X(np(e)||isFinite(e),`note must be a pitch or midi: ${e}`),np(e)){const s=new nr(this.context,e).toMidi();this._buffers.add(s,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Tr([oi(0)],Mp.prototype,"attack",void 0),Tr([oi(0)],Mp.prototype,"release",void 0);class Np extends R{constructor(){const e=A(Np.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new ve({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",se(this,"pan")}static getDefaults(){return Object.assign(R.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}vN("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Wt extends R{constructor(){const e=A(Wt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Q({context:this.context}),Wt._allSolos.has(this.context)||Wt._allSolos.set(this.context,new Set),Wt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(R.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Wt._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Wt._soloed.has(this.context)||Wt._soloed.set(this.context,new Set),Wt._soloed.get(this.context).add(this)}_removeSolo(){Wt._soloed.has(this.context)&&Wt._soloed.get(this.context).delete(this)}_isSoloed(){return Wt._soloed.has(this.context)&&Wt._soloed.get(this.context).has(this)}_noSolos(){return!Wt._soloed.has(this.context)||Wt._soloed.has(this.context)&&0===Wt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Wt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Wt._allSolos=new Map,Wt._soloed=new Map;class Nw extends R{constructor(){const e=A(Nw.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Np({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ui({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,se(this,["pan","volume"])}static getDefaults(){return Object.assign(R.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Mc extends R{constructor(){const e=A(Mc.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Wt({solo:e.solo,context:this.context}),this._panVol=this.output=new Nw({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),se(this,["pan","volume"])}static getDefaults(){return Object.assign(R.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Mc.buses.has(e)||Mc.buses.set(e,new Q({context:this.context})),Mc.buses.get(e)}send(e,n=0){const r=this._getBus(e),s=new Q({context:this.context,units:"decibels",gain:n});return this.connect(s),s.connect(r),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Mc.buses=new Map,ss(),ss(),ss(),ss(),ss(),ss();const RY=["sheetMusicCanvas"];function PY(t,e){1&t&&(D(0,"div",7)(1,"div",8),I(2," Please create or select a profile before starting training "),E()())}function FY(t,e){if(1&t){const n=Yr();D(0,"div",9)(1,"div",10)(2,"div",11)(3,"h4"),I(4,"Level Adjusted"),E(),D(5,"p"),I(6),E()(),D(7,"div",12)(8,"button",13),ue("click",function(){return Le(n),Ve(ge().closeLevelAdjustmentNotification())}),I(9," Continue "),E()()()()}if(2&t){const n=ge();P(6),Mt(n.levelAdjustmentMessage)}}function LY(t,e){if(1&t){const n=Yr();D(0,"div",14)(1,"div",15)(2,"div",16)(3,"h4"),I(4,"Level Unlocked!"),E(),D(5,"p"),I(6),E()(),D(7,"div",17)(8,"button",18),ue("click",function(){return Le(n),Ve(ge().closeLevelUnlockNotification())}),I(9," Continue with New Level "),E()()()()}if(2&t){const n=ge();P(6),Mt(n.levelUnlockMessage)}}function VY(t,e){if(1&t&&(D(0,"div",45)(1,"p"),I(2,"Next level to unlock: "),D(3,"strong"),I(4),E()(),D(5,"p"),I(6),E()()),2&t){const n=ge(2);P(4),Mt(n.getNextUnlockableLevelName()),P(2),Mt(n.getUnlockRequirements(n.getNextUnlockableLevel()))}}function jY(t,e){if(1&t&&(D(0,"div",46),I(1),E()),2&t){const n=ge(2);P(),fr(" ",n.currentNote?"Hovering: "+n.currentNote.name:"Hover over staff to see note"," ")}}function UY(t,e){if(1&t&&(D(0,"div",46),I(1),E()),2&t){const n=ge(2);P(),fr(" Selected: ",n.selectedNote.name," ")}}function BY(t,e){if(1&t){const n=Yr();D(0,"div",47)(1,"div",48)(2,"button",49),ue("click",function(){return Le(n),Ve(ge(2).setAccidental("natural"))}),I(3," Natural "),E(),D(4,"button",49),ue("click",function(){return Le(n),Ve(ge(2).setAccidental("sharp"))}),I(5," Sharp (\u266f) "),E(),D(6,"button",49),ue("click",function(){return Le(n),Ve(ge(2).setAccidental("flat"))}),I(7," Flat (\u266d) "),E()(),D(8,"div",50)(9,"button",51),ue("click",function(){return Le(n),Ve(ge(2).cancelSelection())}),I(10," Cancel Selection "),E(),D(11,"button",52),ue("click",function(){return Le(n),Ve(ge(2).submitAnswer())}),I(12," Submit Answer "),E()()()}if(2&t){const n=ge(2);P(2),Et("selected","natural"===n.selectedNote.accidental),P(2),Et("selected","sharp"===n.selectedNote.accidental),P(2),Et("selected","flat"===n.selectedNote.accidental)}}function $Y(t,e){if(1&t){const n=Yr();D(0,"div",53),ue("click",function(){return Le(n),Ve(ge(2).closeFeedbackDialog())}),D(1,"div",54),ue("click",function(s){return Le(n),Ve(s.stopPropagation())}),D(2,"div",55)(3,"p"),I(4),E()(),D(5,"div",56)(6,"button",57),ue("click",function(){return Le(n),Ve(ge(2).closeFeedbackDialog())}),I(7),E()()()()}if(2&t){const n=ge(2);P(),Et("correct","correct"===n.feedbackClass)("incorrect","incorrect"===n.feedbackClass),P(3),Mt(n.feedbackMessage),P(3),fr(" ","correct"===n.feedbackClass?"Continue":"Try Again"," ")}}function HY(t,e){if(1&t){const n=Yr();D(0,"main",19)(1,"div",20)(2,"div",21)(3,"h3"),I(4,"Level Selection"),E(),D(5,"select",22),ue("ngModelChange",function(s){return Le(n),Ve(ge().changeLevel(s))}),D(6,"option",23),I(7,"Easy Level"),E(),D(8,"option",24),I(9,"Medium Level"),E(),D(10,"option",24),I(11,"Hard Level"),E(),D(12,"option",24),I(13,"Master Level"),E()(),Ot(14,VY,7,2,"div",25),E(),D(15,"div",26)(16,"h3"),I(17,"Instructions"),E(),D(18,"ol")(19,"li"),I(20,"Listen to the Base Note to establish the reference tone"),E(),D(21,"li"),I(22,"Play the Interval Note (this is the note you'll identify)"),E(),D(23,"li"),I(24,"Click on the staff where you think the note is located"),E(),D(25,"li"),I(26,"Select whether the note is natural, sharp, or flat"),E(),D(27,"li"),I(28,'Click "Submit Answer" to check your response'),E()(),D(29,"p"),I(30,"Train your ear to recognize intervals by comparing the relationship between the two notes!"),E()(),D(31,"div",27)(32,"button",28),ue("click",function(){return Le(n),Ve(ge().goBackToTraining())}),I(33," \u2190 Back to Training Selection "),E()()(),D(34,"div",29)(35,"div",30)(36,"div",31)(37,"div",32),I(38),D(39,"button",33),ue("click",function(){return Le(n),Ve(ge().playBaseNote())}),I(40," Play Base Note "),E()()(),D(41,"div",34)(42,"div",35),I(43," Interval Note: "),D(44,"button",36),ue("click",function(){return Le(n),Ve(ge().playIntervalNote())}),I(45," Play Interval Note "),E()()(),D(46,"div",37),Ot(47,jY,2,1,"div",38)(48,UY,2,1,"div",38),E(),Ot(49,BY,13,6,"div",39)(50,$Y,8,6,"div",40),D(51,"canvas",41,0),ue("mousemove",function(s){return Le(n),Ve(ge().onMouseMove(s))})("mouseout",function(){return Le(n),Ve(ge().onMouseOut())})("click",function(s){return Le(n),Ve(ge().onCanvasClick(s))}),E(),D(53,"div",42)(54,"button",43),ue("click",function(){return Le(n),Ve(ge().giveUp())}),I(55," Skip Exercise "),E(),D(56,"button",44),ue("click",function(){return Le(n),Ve(ge().showHint())}),I(57," Hint "),E()()()()()}if(2&t){const n=ge();P(2),Oe("ngClass",n.selectedLevel),P(3),Oe("ngModel",n.selectedLevel),P(),Oe("value",n.ProficiencyLevel.EASY),P(2),Oe("value",n.ProficiencyLevel.MEDIUM)("disabled",!n.isLevelUnlocked(n.ProficiencyLevel.MEDIUM)),P(2),Oe("value",n.ProficiencyLevel.HARD)("disabled",!n.isLevelUnlocked(n.ProficiencyLevel.HARD)),P(2),Oe("value",n.ProficiencyLevel.MASTERY)("disabled",!n.isLevelUnlocked(n.ProficiencyLevel.MASTERY)),P(2),Oe("ngIf",null!==n.getNextUnlockableLevel()),P(24),j_(" Base Note: ",null==n.baseNote?null:n.baseNote.name.charAt(0),"","sharp"===(null==n.baseNote?null:n.baseNote.accidental)?"\u266f":"flat"===(null==n.baseNote?null:n.baseNote.accidental)?"\u266d":"","",null==n.baseNote?null:n.baseNote.name.slice(1)," "),P(9),Oe("ngIf",!n.selectedNote),P(),Oe("ngIf",n.selectedNote),P(),Oe("ngIf",n.selectedNote),P(),Oe("ngIf",n.showFeedbackDialog)}}function qY(t,e){1&t&&(D(0,"span"),I(1,"Play Notes Step by Step"),E())}function zY(t,e){1&t&&(D(0,"span"),I(1,"Playing..."),E())}function GY(t,e){if(1&t){const n=Yr();D(0,"div",58),ue("click",function(){return Le(n),Ve(ge().closeHintDialog())}),D(1,"div",59),ue("click",function(s){return Le(n),Ve(s.stopPropagation())}),D(2,"div",60)(3,"h4"),I(4),E()(),D(5,"div",61)(6,"div",62)(7,"div",63)(8,"p"),I(9),E(),D(10,"button",64),ue("click",function(){return Le(n),Ve(ge().playSemitoneSteps())}),Ot(11,qY,2,0,"span",65)(12,zY,2,0,"span",65),E()(),D(13,"div",63)(14,"p"),I(15,"This interval is a "),D(16,"strong"),I(17),E(),I(18,"."),E(),D(19,"p"),I(20,"There are "),D(21,"strong"),I(22),E(),I(23," semitones between these notes."),E()(),D(24,"div",63)(25,"p"),I(26,"The note is "),D(27,"strong"),I(28),E(),I(29,"."),E(),D(30,"button",36),ue("click",function(){return Le(n),Ve(ge().playIntervalNote())}),I(31," Play Interval Note "),E()()()(),D(32,"div",66)(33,"button",67),ue("click",function(){return Le(n),Ve(ge().previousHint())}),I(34," \u2190 "),E(),D(35,"button",68),ue("click",function(){return Le(n),Ve(ge().nextHint())}),I(36," \u2192 "),E()(),D(37,"div",69)(38,"button",44),ue("click",function(){return Le(n),Ve(ge().closeHintDialog())}),I(39," Got it "),E()()()()}if(2&t){const n=ge();P(4),fr("Hint - Level ",n.currentHintLevel,"/3"),P(3),Et("active",1===n.currentHintLevel),P(2),Mt(n.hintLevel1),P(),Oe("disabled",n.isPlayingSemitones),P(),Oe("ngIf",!n.isPlayingSemitones),P(),Oe("ngIf",n.isPlayingSemitones),P(),Et("active",2===n.currentHintLevel),P(4),Mt(null==n.intervalInfo?null:n.intervalInfo.interval),P(5),Mt(n.Math.abs((null==n.intervalInfo?null:n.intervalInfo.semitones)||0)),P(2),Et("active",3===n.currentHintLevel),P(4),Mt(n.getFormattedNoteName(null==n.intervalInfo?null:n.intervalInfo.note)),P(5),Oe("disabled",1===n.currentHintLevel),P(2),Oe("disabled",3===n.currentHintLevel)}}const qe={easy:["Unison","Perfect Fourth","Perfect Fifth","Octave"],medium:["Major Second","Major Third","Major Sixth","Major Seventh"],hard:["Minor Second","Minor Third","Minor Sixth","Minor Seventh","Tritone"]},Pt=.8;let WY=(()=>{class t{constructor(n,r){this.router=n,this.userService=r,this.currentNote=null,this.selectedNote=null,this.baseNote=null,this.intervalInfo=null,this.synth=null,this.isPlaying=!1,this.feedbackMessage=null,this.feedbackClass="",this.showFeedbackDialog=!1,this.showHintDialog=!1,this.currentHintLevel=1,this.hintLevel1="Listen to the steps between the base note and interval note to help identify the interval.",this.Math=Math,this.isPlayingSemitones=!1,this.hintMessage="Hint functionality will be added soon!",this.currentUser=null,this.showError=!1,this.showLevelAdjustmentNotification=!1,this.levelAdjustmentMessage="",this.showLevelUnlockNotification=!1,this.levelUnlockMessage="",this.newlyUnlockedLevel=null,this.previouslyUnlockedLevels={[x.EASY]:!0,[x.MEDIUM]:!1,[x.HARD]:!1,[x.MASTERY]:!1},this.STAFF_HEIGHT=200,this.LINE_SPACING=12,this.STAFF_LINES=5,this.STAFF_WIDTH=400,this.STAFF_START_Y=(this.STAFF_HEIGHT-(this.STAFF_LINES-1)*this.LINE_SPACING)/2,this.NOTE_MAPPING=[{name:"A5",type:"ledger",position:this.STAFF_START_Y-this.LINE_SPACING,frequency:880},{name:"G5",type:"space",position:this.STAFF_START_Y-this.LINE_SPACING/2,frequency:783.99},{name:"F5",type:"line",position:this.STAFF_START_Y,frequency:698.46},{name:"E5",type:"space",position:this.STAFF_START_Y+this.LINE_SPACING/2,frequency:659.25},{name:"D5",type:"line",position:this.STAFF_START_Y+this.LINE_SPACING,frequency:587.33},{name:"C5",type:"space",position:this.STAFF_START_Y+1.5*this.LINE_SPACING,frequency:523.25},{name:"B4",type:"line",position:this.STAFF_START_Y+2*this.LINE_SPACING,frequency:493.88},{name:"A4",type:"space",position:this.STAFF_START_Y+2.5*this.LINE_SPACING,frequency:440},{name:"G4",type:"line",position:this.STAFF_START_Y+3*this.LINE_SPACING,frequency:392},{name:"F4",type:"space",position:this.STAFF_START_Y+3.5*this.LINE_SPACING,frequency:349.23},{name:"E4",type:"line",position:this.STAFF_START_Y+4*this.LINE_SPACING,frequency:329.63},{name:"D4",type:"space",position:this.STAFF_START_Y+4.5*this.LINE_SPACING,frequency:293.66},{name:"C4",type:"ledger",position:this.STAFF_START_Y+5*this.LINE_SPACING,frequency:261.63}],this.ProficiencyLevel=x,this.selectedLevel=x.EASY,this.userSelectedLevel=null,this.currentIntervalName=null,this.currentIntervalSemitones=null}ngOnInit(){let n=null;this.userSubscription=this.userService.getCurrentUser().subscribe(r=>{if(!r)return this.showError=!0,void setTimeout(()=>{this.router.navigate(["/"])},3e3);null!==n&&n!==r.id&&this.resetComponentState(),n=r.id,this.currentUser=r,this.initializeIntervalProgress(),this.calculateIntervalAccuracies(),this.updateProficiencyLevel(),this.initializeUnlockedLevelsTracking(),this.validateUserProficiencyLevel(),this.checkForNewlyUnlockedLevels(),this.selectedLevel=this.userSelectedLevel?this.userSelectedLevel:this.currentUser.intervalTraining.proficiencyLevel,this.baseNote&&this.generateNewExercise()})}initializeUnlockedLevelsTracking(){this.currentUser&&(this.previouslyUnlockedLevels={[x.EASY]:!0,[x.MEDIUM]:this.isLevelUnlocked(x.MEDIUM),[x.HARD]:this.isLevelUnlocked(x.HARD),[x.MASTERY]:this.isLevelUnlocked(x.MASTERY)})}checkForNewlyUnlockedLevels(){this.currentUser&&(!this.previouslyUnlockedLevels[x.MEDIUM]&&this.isLevelUnlocked(x.MEDIUM)?this.handleLevelUnlocked(x.MEDIUM):!this.previouslyUnlockedLevels[x.HARD]&&this.isLevelUnlocked(x.HARD)?this.handleLevelUnlocked(x.HARD):!this.previouslyUnlockedLevels[x.MASTERY]&&this.isLevelUnlocked(x.MASTERY)&&this.handleLevelUnlocked(x.MASTERY),this.previouslyUnlockedLevels={[x.EASY]:!0,[x.MEDIUM]:this.isLevelUnlocked(x.MEDIUM),[x.HARD]:this.isLevelUnlocked(x.HARD),[x.MASTERY]:this.isLevelUnlocked(x.MASTERY)})}handleLevelUnlocked(n){this.currentUser&&(this.newlyUnlockedLevel=n,this.updateHighestAchievedLevel(n),this.levelUnlockMessage=`Congratulations! You've unlocked the ${this.getLevelDisplayName(n)} level with your excellent performance. The application will now switch to this new level.`,this.showLevelUnlockNotification=!0)}updateHighestAchievedLevel(n){if(!this.currentUser?.intervalTraining)return;const r=this.currentUser.intervalTraining,s=r.proficiencyLevel;let i=!1;n===x.MASTERY&&s!==x.MASTERY?(r.proficiencyLevel=x.MASTERY,i=!0):n===x.HARD&&s!==x.HARD&&s!==x.MASTERY?(r.proficiencyLevel=x.HARD,i=!0):n===x.MEDIUM&&s!==x.MEDIUM&&s!==x.HARD&&s!==x.MASTERY&&(r.proficiencyLevel=x.MEDIUM,i=!0),i&&(console.log(`Updating user's highest achieved level to ${this.getLevelDisplayName(n)}`),this.userService.updateUser(this.currentUser))}closeLevelUnlockNotification(){this.showLevelUnlockNotification=!1,null!==this.newlyUnlockedLevel&&(this.changeLevel(this.newlyUnlockedLevel),this.newlyUnlockedLevel=null)}resetComponentState(){this.selectedNote=null,this.currentNote=null,this.feedbackMessage=null,this.showFeedbackDialog=!1,this.showLevelAdjustmentNotification=!1,this.showLevelUnlockNotification=!1,this.newlyUnlockedLevel=null,this.synth&&this.ctx&&(this.generateNewExercise(),this.drawStaffAndNotes())}ngAfterViewInit(){var n=this;return q(function*(){const r=n.canvasRef.nativeElement;n.ctx=r.getContext("2d"),r.width=n.STAFF_WIDTH,r.height=n.STAFF_HEIGHT,function dY(){return ko.resume()}().then(()=>{n.synth=(new Hi).toDestination();const s=Math.floor(Math.random()*n.NOTE_MAPPING.length),i=["natural","sharp","flat"],o=i[Math.floor(Math.random()*i.length)],a=n.NOTE_MAPPING[s].name.charAt(0);let c=o;(("C"===a||"F"===a)&&"flat"===o||("B"===a||"E"===a)&&"sharp"===o)&&(c="natural"),n.baseNote={...n.NOTE_MAPPING[s],x:100,accidental:c},n.generateIntervalNote(),n.drawStaffAndNotes()})})()}ngOnDestroy(){this.userSubscription?.unsubscribe(),this.synth&&this.synth.dispose()}getNoteWithAccidental(n){let r=n.name.charAt(0);const s=n.name.slice(-1);return"sharp"===n.accidental?r+="#":"flat"===n.accidental&&(r+="b"),r+s}playBaseNote(){var n=this;return q(function*(){if(!n.baseNote||!n.synth||n.isPlaying)return;n.isPlaying=!0;const r=n.getNoteWithAccidental(n.baseNote);let s=n.baseNote.frequency;"sharp"===n.baseNote.accidental?s*=Math.pow(2,1/12):"flat"===n.baseNote.accidental&&(s*=Math.pow(2,-1/12)),n.synth.triggerAttackRelease("natural"===n.baseNote.accidental?r:s,"2n"),setTimeout(()=>{n.isPlaying=!1},1e3)})()}drawStaff(){this.ctx.clearRect(0,0,this.STAFF_WIDTH,this.STAFF_HEIGHT);const n=(this.STAFF_HEIGHT-(this.STAFF_LINES-1)*this.LINE_SPACING)/2;this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=1;for(let r=0;r<this.STAFF_LINES;r++){const s=n+r*this.LINE_SPACING;this.ctx.moveTo(0,s),this.ctx.lineTo(this.STAFF_WIDTH,s)}this.ctx.stroke(),this.ctx.fillStyle="#000",this.ctx.font="65px serif",this.ctx.fillText("\u{1d11e}",10,n+4*this.LINE_SPACING)}drawStaffGuides(){const n=(this.STAFF_HEIGHT-(this.STAFF_LINES-1)*this.LINE_SPACING)/2-this.LINE_SPACING;this.ctx.strokeStyle="rgba(200,200,200,0.3)",this.ctx.lineWidth=1;for(let r=0;r<this.NOTE_MAPPING.length;r++){const s=n+r*this.LINE_SPACING/2;this.ctx.beginPath(),this.ctx.moveTo(80,s),this.ctx.lineTo(this.STAFF_WIDTH-20,s),this.ctx.stroke(),this.ctx.fillStyle="rgba(100,100,100,0.5)",this.ctx.font="10px sans-serif",this.ctx.fillText(this.NOTE_MAPPING[r].name,this.STAFF_WIDTH-18,s+4)}}drawStaffAndNotes(){this.drawStaff(),this.baseNote&&this.drawNote(this.baseNote.x,this.baseNote.position,!1,!0),this.selectedNote&&this.drawNote(this.selectedNote.x,this.selectedNote.position,!0,!1),this.currentNote&&!this.selectedNote&&this.drawNote(this.currentNote.x,this.currentNote.position,!1,!1)}drawNote(n,r,s=!1,i=!1){const o=s&&this.selectedNote?.x?this.selectedNote.x:n,a=(this.STAFF_HEIGHT-(this.STAFF_LINES-1)*this.LINE_SPACING)/2-this.LINE_SPACING,l=Math.round((r-a)/(this.LINE_SPACING/2)),u=this.NOTE_MAPPING[Math.max(0,Math.min(l,this.NOTE_MAPPING.length-1))];if("ledger"===u.type){if(this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.lineWidth=1,"C4"===u.name){const f=a+6*this.LINE_SPACING;this.ctx.moveTo(o-10,f),this.ctx.lineTo(o+10,f)}else if("A5"===u.name){const f=a;this.ctx.moveTo(o-10,f),this.ctx.lineTo(o+10,f)}this.ctx.stroke()}this.ctx.beginPath(),this.ctx.fillStyle=i?"#FFD700":s?"#3498db":"#000",this.ctx.ellipse(o,r,6,4.5,0,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.strokeStyle=i?"#FFD700":s?"#3498db":"#000",this.ctx.lineWidth=1,r>=a+2*this.LINE_SPACING?(this.ctx.moveTo(o+6,r),this.ctx.lineTo(o+6,r-35)):(this.ctx.moveTo(o-6,r),this.ctx.lineTo(o-6,r+35)),this.ctx.stroke();const h=i?this.baseNote:this.selectedNote;if(h?.accidental&&"natural"!==h.accidental){this.ctx.fillStyle=i?"#FFD700":s?"#3498db":"#000",this.ctx.font="24px serif";let f="",p=0;switch(h.accidental){case"sharp":f="\u266f",p=8;break;case"flat":f="\u266d",p=4}f&&this.ctx.fillText(f,o-20,r+p)}}getNoteFromPosition(n){const r=(this.STAFF_HEIGHT-(this.STAFF_LINES-1)*this.LINE_SPACING)/2-this.LINE_SPACING,i=Math.round((n-r)/(this.LINE_SPACING/2)),o=Math.max(0,Math.min(i,this.NOTE_MAPPING.length-1)),a=this.NOTE_MAPPING[o];return{name:a.name,position:r+o*this.LINE_SPACING/2,type:a.type,frequency:a.frequency}}onMouseMove(n){if(this.selectedNote)return;const r=this.canvasRef.nativeElement.getBoundingClientRect(),h=this.canvasRef.nativeElement.width/r.width*(n.clientX-r.left);if(h>80&&h<this.STAFF_WIDTH){const p=this.getNoteFromPosition(this.canvasRef.nativeElement.height/r.height*(n.clientY-r.top));this.currentNote={...p,x:h},this.drawStaffAndNotes()}}onCanvasClick(n){if(this.selectedNote)return;const r=this.canvasRef.nativeElement.getBoundingClientRect(),h=this.canvasRef.nativeElement.width/r.width*(n.clientX-r.left);if(h>80&&h<this.STAFF_WIDTH){const p=this.getNoteFromPosition(this.canvasRef.nativeElement.height/r.height*(n.clientY-r.top));this.selectedNote={...p,accidental:"natural",x:h},this.drawStaffAndNotes()}}setAccidental(n){this.selectedNote&&(this.selectedNote.accidental=n,this.drawStaffAndNotes())}cancelSelection(){this.selectedNote=null,this.drawStaffAndNotes()}onMouseOut(){this.selectedNote||(this.currentNote=null),this.drawStaffAndNotes()}goBackToTraining(){this.router.navigate(["/training"])}generateNewExercise(){this.showFeedbackDialog?console.log("Skipping exercise generation while feedback dialog is showing"):(this.generateBaseNote(),this.generateIntervalNote(),this.drawStaffAndNotes())}generateBaseNote(){const s=Math.floor(10*Math.random())+3;let i=this.NOTE_MAPPING[s];if(!i){console.error(`Invalid base note index: ${s}, max valid index is ${this.NOTE_MAPPING.length-1}`);const c=Math.min(7,this.NOTE_MAPPING.length-1);i=this.NOTE_MAPPING[c]}let a="natural";Math.random()<.3&&(a=Math.random()<.5?"sharp":"flat"),this.baseNote={...i,x:150,accidental:a},console.log(`Generated base note: ${this.baseNote.name}${"natural"===this.baseNote.accidental?"":this.baseNote.accidental}`)}generateIntervalNote(){if(!this.baseNote)return void console.error("Cannot generate interval without a base note");const n=this.selectIntervalByProficiency();console.log(`Selected interval: ${n}`);const r=this.getIntervalSemitones(n);console.log(`Selected interval corresponds to ${r} semitones`),this.generateIntervalFromSemitones(r,n)}generateIntervalFromSemitones(n,r){if(!this.baseNote)return;const i=this.baseNote.name.charAt(0),o=parseInt(this.baseNote.name.slice(-1));let a={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[i];"sharp"===this.baseNote.accidental?a+=1:"flat"===this.baseNote.accidental&&(a-=1);const c=a+12*o;let u=c+n,d="above";u>82&&(u=c-n,d="below",console.log("Interval would exceed staff range, placing below base note"));const h=Math.floor(u/12),p=this.chromaticPositionToNote(u%12),g=p.letter,_=p.accidental,m=this.NOTE_MAPPING.filter(y=>y.name.charAt(0)===g&&y.name.slice(-1)===h.toString());let v;if(!(m.length>0))return console.error(`Could not find note ${g}${h} in mapping`),void this.generateNewExercise();v={...m[0],x:250,accidental:_};const w=this.calculateSemitonesBetweenNotes(this.baseNote,v),T="above"===d?r:this.getDescendingIntervalName(r);console.log(`Generated interval: ${this.baseNote.name}${this.baseNote.accidental||""} to ${v.name}${v.accidental||""}`),console.log(`Interval: ${T} (${w} semitones), Direction: ${d}`),this.intervalInfo={note:v,interval:T,semitones:Math.abs(w)}}chromaticPositionToNote(n){return{0:{letter:"C",accidental:"natural"},1:{letter:"C",accidental:"sharp"},2:{letter:"D",accidental:"natural"},3:{letter:"D",accidental:"sharp"},4:{letter:"E",accidental:"natural"},5:{letter:"F",accidental:"natural"},6:{letter:"F",accidental:"sharp"},7:{letter:"G",accidental:"natural"},8:{letter:"G",accidental:"sharp"},9:{letter:"A",accidental:"natural"},10:{letter:"A",accidental:"sharp"},11:{letter:"B",accidental:"natural"}}[n]}getDescendingIntervalName(n){return`Descending ${n}`}getIntervalName(n,r){const s=this.calculateSemitonesBetweenNotes(n,r),a={0:"Unison",1:"Minor Second",2:"Major Second",3:"Minor Third",4:"Major Third",5:"Perfect Fourth",6:"Tritone",7:"Perfect Fifth",8:"Minor Sixth",9:"Major Sixth",10:"Minor Seventh",11:"Major Seventh",12:"Octave"}[Math.abs(s)]||"Unknown Interval";return s<0?`Descending ${a}`:a}calculateSemitonesBetweenNotes(n,r){if(!(n&&r&&n.name&&r.name))return console.error("Invalid notes passed to calculateSemitonesBetweenNotes",{note1:n,note2:r}),0;const s={C:0,D:2,E:4,F:5,G:7,A:9,B:11},i=n.name.charAt(0),o=parseInt(n.name.slice(-1)),a=r.name.charAt(0),c=parseInt(r.name.slice(-1));let l=s[i]+12*o,u=s[a]+12*c;return"sharp"===n.accidental&&(l+=1),"flat"===n.accidental&&(l-=1),"sharp"===r.accidental&&(u+=1),"flat"===r.accidental&&(u-=1),u-l}initializeIntervalProgress(){if(!this.currentUser?.intervalTraining){const r=["Unison","Minor Second","Major Second","Minor Third","Major Third","Perfect Fourth","Tritone","Perfect Fifth","Minor Sixth","Major Sixth","Minor Seventh","Major Seventh","Octave"].map(s=>({interval:s,attempts:0,correctAttempts:0,lastPracticed:new Date}));this.currentUser.intervalTraining={progress:r,totalExercisesCompleted:0,lastSessionDate:new Date,proficiencyLevel:x.EASY,easyIntervalAccuracy:0,mediumIntervalAccuracy:0,hardIntervalAccuracy:0},this.userService.updateUser(this.currentUser)}}updateIntervalProgress(n){if(!this.currentUser||!this.intervalInfo)return;const r=this.currentUser.intervalTraining.progress.find(s=>s.interval===this.intervalInfo.interval);r&&(r.attempts++,n&&r.correctAttempts++,r.lastPracticed=new Date),this.currentUser.intervalTraining.totalExercisesCompleted++,this.currentUser.intervalTraining.lastSessionDate=new Date,this.calculateIntervalAccuracies(),this.updateProficiencyLevel(),this.userService.updateUser(this.currentUser)}calculateIntervalAccuracies(){if(!this.currentUser)return;let r=0,s=0,i=0,o=0,a=0,c=0;this.currentUser.intervalTraining.progress.forEach(l=>{qe.easy.includes(l.interval)?(r+=l.attempts,s+=l.correctAttempts):qe.medium.includes(l.interval)?(i+=l.attempts,o+=l.correctAttempts):qe.hard.includes(l.interval)&&(a+=l.attempts,c+=l.correctAttempts)}),this.currentUser.intervalTraining.easyIntervalAccuracy=r>0?s/r:0,this.currentUser.intervalTraining.mediumIntervalAccuracy=i>0?o/i:0,this.currentUser.intervalTraining.hardIntervalAccuracy=a>0?c/a:0}updateProficiencyLevel(){if(!this.currentUser)return;const n=this.currentUser.intervalTraining,r=n.proficiencyLevel,s=10,i=this.getTotalAttemptsForCategory(qe.easy),o=this.getTotalAttemptsForCategory(qe.medium),a=this.getTotalAttemptsForCategory(qe.hard);if(this.userSelectedLevel===r)switch(r){case x.EASY:n.easyIntervalAccuracy>=Pt&&i>=s&&(n.proficiencyLevel=x.MEDIUM);break;case x.MEDIUM:n.easyIntervalAccuracy<Pt&&i>=s?n.proficiencyLevel=x.EASY:n.mediumIntervalAccuracy>=Pt&&o>=s&&(n.proficiencyLevel=x.HARD);break;case x.HARD:n.mediumIntervalAccuracy<Pt&&o>=s?n.proficiencyLevel=x.MEDIUM:n.hardIntervalAccuracy>=Pt&&a>=s&&(n.proficiencyLevel=x.MASTERY);break;case x.MASTERY:n.hardIntervalAccuracy<Pt&&a>=s&&(n.proficiencyLevel=x.HARD)}}getTotalAttemptsForCategory(n){return this.currentUser?this.currentUser.intervalTraining.progress.filter(r=>n.includes(r.interval)).reduce((r,s)=>r+s.attempts,0):0}submitAnswer(){if(!this.selectedNote||!this.intervalInfo||!this.currentUser)return;this.userSelectedLevel=this.selectedLevel,this.currentIntervalName=this.intervalInfo.interval,this.currentIntervalSemitones=this.intervalInfo.semitones;const n=this.notesAreEquivalent(this.selectedNote,this.intervalInfo.note),r=this.currentUser.intervalTraining.proficiencyLevel;if(this.updateIntervalProgressWithoutReset(n),n){let i="";if(r!==x.MASTERY&&this.currentUser.intervalTraining.proficiencyLevel===x.MASTERY)i="\n\nCongratulations! You've reached Master Level! You have demonstrated excellent understanding of musical intervals.";else if(this.userSelectedLevel===x.MASTERY)i="\n\nYou're practicing at Master Level!";else{const o=this.getAccuracyForLevel(this.userSelectedLevel);if(i=`\n\nYou're at ${Math.round(100*o)}% accuracy in ${this.getLevelDisplayName(this.userSelectedLevel)} intervals.`,this.selectedLevel===this.currentUser.intervalTraining.proficiencyLevel){const l=this.getNextProficiencyLevel(),u=10,d=this.getCategoryForLevel(this.selectedLevel),h=this.getTotalAttemptsForCategory(d);i+=o>=Pt&&h<u?` You need ${u-h} more practice attempts before advancing to ${l}.`:` Reach 80% to advance to ${l}!`}}this.feedbackMessage=`Correct! The interval is a ${this.currentIntervalName} (${this.currentIntervalSemitones} semitones).${i}`,this.feedbackClass="correct",this.showFeedbackDialog=!0,this.selectedNote=null}else this.feedbackMessage="Incorrect. Try again!",this.feedbackClass="incorrect",this.showFeedbackDialog=!0;this.drawStaffAndNotes()}updateIntervalProgressWithoutReset(n){if(!this.currentUser||!this.intervalInfo)return;const r=this.currentUser.intervalTraining.progress.find(s=>s.interval===this.intervalInfo.interval);r&&(r.attempts++,n&&r.correctAttempts++,r.lastPracticed=new Date),this.currentUser.intervalTraining.totalExercisesCompleted++,this.currentUser.intervalTraining.lastSessionDate=new Date,this.calculateIntervalAccuracies(),(!this.userSelectedLevel||this.selectedLevel===this.currentUser.intervalTraining.proficiencyLevel)&&this.updateProficiencyLevel(),this.validateUserProficiencyLevel(),this.checkForNewlyUnlockedLevels(),this.userService.updateUser(this.currentUser)}closeFeedbackDialog(){if(this.showFeedbackDialog=!1,"correct"===this.feedbackClass){const n=this.selectedLevel;try{this.generateNewExercise()}catch(r){console.error("Error generating new exercise:",r),this.baseNote=null,this.intervalInfo=null}this.selectedLevel=n}else this.drawStaffAndNotes()}changeLevel(n){this.currentUser&&(console.log("Changing level to:",n),console.log("Level unlocked?",this.isLevelUnlocked(n)),this.isLevelUnlocked(n)?(console.log("Setting selected level to:",n),this.userSelectedLevel=n,this.selectedLevel=n,this.updateHighestAchievedLevel(n),this.selectedNote=null,this.currentNote=null,this.feedbackMessage=null,this.showFeedbackDialog=!1,this.generateNewExercise(),this.drawStaffAndNotes()):console.warn("Attempted to select level that is not unlocked:",n))}getProficiencyLevelDisplay(){if(!this.currentUser)return"";switch(this.currentUser.intervalTraining.proficiencyLevel){case x.EASY:return"Easy";case x.MEDIUM:return"Medium";case x.HARD:return"Hard";case x.MASTERY:return"Master";default:return""}}getNextProficiencyLevel(){if(!this.currentUser)return"";switch(this.currentUser.intervalTraining.proficiencyLevel){case x.EASY:return"Medium";case x.MEDIUM:return"Hard";case x.HARD:return"Master";default:return""}}getCurrentCategoryAccuracy(){if(!this.currentUser)return 0;switch(this.currentUser.intervalTraining.proficiencyLevel){case x.EASY:return this.currentUser.intervalTraining.easyIntervalAccuracy;case x.MEDIUM:return this.currentUser.intervalTraining.mediumIntervalAccuracy;case x.HARD:return this.currentUser.intervalTraining.hardIntervalAccuracy;default:return 0}}getCurrentIntervalCategory(){if(!this.currentUser)return[];switch(this.currentUser.intervalTraining.proficiencyLevel){case x.EASY:return qe.easy;case x.MEDIUM:return qe.medium;case x.HARD:return qe.hard;default:return[]}}getLevelDisplayName(n){switch(n){case x.EASY:return"Easy";case x.MEDIUM:return"Medium";case x.HARD:return"Hard";case x.MASTERY:return"Master";default:return""}}getAccuracyForLevel(n){if(!this.currentUser)return 0;switch(n){case x.EASY:return this.currentUser.intervalTraining.easyIntervalAccuracy;case x.MEDIUM:return this.currentUser.intervalTraining.mediumIntervalAccuracy;case x.HARD:return this.currentUser.intervalTraining.hardIntervalAccuracy;default:return 0}}getCategoryForLevel(n){switch(n){case x.EASY:return qe.easy;case x.MEDIUM:return qe.medium;case x.HARD:return qe.hard;default:return[]}}notesAreEquivalent(n,r){return this.getChromaticPosition(n)===this.getChromaticPosition(r)}getChromaticPosition(n){const s=n.name.charAt(0);let i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(s);return"sharp"===n.accidental?i=(i+1)%12:"flat"===n.accidental&&(i=(i-1+12)%12),i+12*parseInt(n.name.slice(-1))}isLevelUnlocked(n){if(!this.currentUser)return!1;const r=this.currentUser.intervalTraining,s=10;switch(n){case x.EASY:return!0;case x.MEDIUM:return r.easyIntervalAccuracy>=Pt&&this.getTotalAttemptsForCategory(qe.easy)>=s;case x.HARD:const i=r.easyIntervalAccuracy>=Pt&&this.getTotalAttemptsForCategory(qe.easy)>=s,o=r.mediumIntervalAccuracy>=Pt&&this.getTotalAttemptsForCategory(qe.medium)>=s;return i&&o;case x.MASTERY:const a=r.easyIntervalAccuracy>=Pt&&this.getTotalAttemptsForCategory(qe.easy)>=s,c=r.mediumIntervalAccuracy>=Pt&&this.getTotalAttemptsForCategory(qe.medium)>=s,l=r.hardIntervalAccuracy>=Pt&&this.getTotalAttemptsForCategory(qe.hard)>=s;return a&&c&&l;default:return!1}}getNextUnlockableLevel(){return this.currentUser?this.isLevelUnlocked(x.MEDIUM)?this.isLevelUnlocked(x.HARD)?this.isLevelUnlocked(x.MASTERY)?null:x.MASTERY:x.HARD:x.MEDIUM:null}getNextUnlockableLevelName(){const n=this.getNextUnlockableLevel();if(!n)return"";switch(n){case x.MEDIUM:return"Medium";case x.HARD:return"Hard";case x.MASTERY:return"Master";default:return""}}getUnlockRequirements(n){if(!n||!this.currentUser)return"";const r=this.currentUser.intervalTraining;switch(n){case x.MEDIUM:{const i=Math.round(100*r.easyIntervalAccuracy),o=this.getTotalAttemptsForCategory(qe.easy),a=i<80,c=o<10;return a&&c?`Need 80% accuracy on Easy intervals (currently ${i}%) and 10 attempts (currently ${o}).`:a?`Need 80% accuracy on Easy intervals (currently ${i}%).`:c?`Need 10 attempts on Easy intervals (currently ${o}).`:""}case x.HARD:{const i=Math.round(100*r.mediumIntervalAccuracy),o=this.getTotalAttemptsForCategory(qe.medium),a=i<80,c=o<10;return a&&c?`Need 80% accuracy on Medium intervals (currently ${i}%) and 10 attempts (currently ${o}).`:a?`Need 80% accuracy on Medium intervals (currently ${i}%).`:c?`Need 10 attempts on Medium intervals (currently ${o}).`:""}case x.MASTERY:{const i=Math.round(100*r.hardIntervalAccuracy),o=this.getTotalAttemptsForCategory(qe.hard),a=i<80,c=o<10;return a&&c?`Need 80% accuracy on Hard intervals (currently ${i}%) and 10 attempts (currently ${o}).`:a?`Need 80% accuracy on Hard intervals (currently ${i}%).`:c?`Need 10 attempts on Hard intervals (currently ${o}).`:""}default:return""}}playIntervalNote(){var n=this;return q(function*(){if(!n.intervalInfo||!n.synth||n.isPlaying)return;n.isPlaying=!0;const r=n.getNoteWithAccidental(n.intervalInfo.note);let s=n.intervalInfo.note.frequency;"sharp"===n.intervalInfo.note.accidental?s*=Math.pow(2,1/12):"flat"===n.intervalInfo.note.accidental&&(s*=Math.pow(2,-1/12)),n.synth.triggerAttackRelease("natural"===n.intervalInfo.note.accidental?r:s,"2n"),setTimeout(()=>{n.isPlaying=!1},1e3)})()}selectIntervalByProficiency(){const n=this.selectedLevel,r=Math.random();let s=[];switch(n){case x.EASY:s=[...qe.easy];break;case x.MEDIUM:s=r<.8?[...qe.medium]:[...qe.easy];break;case x.HARD:s=r<.8?[...qe.hard]:r<.9?[...qe.medium]:[...qe.easy];break;case x.MASTERY:s=r<.33?[...qe.hard]:r<.67?[...qe.medium]:[...qe.easy];break;default:s=[...qe.easy]}return 0===s.length&&(console.warn("No intervals selected in proficiency logic, defaulting to easy intervals"),s=[...qe.easy]),s[Math.floor(Math.random()*s.length)]}getIntervalSemitones(n){return{Unison:0,"Minor Second":1,"Major Second":2,"Minor Third":3,"Major Third":4,"Perfect Fourth":5,Tritone:6,"Perfect Fifth":7,"Minor Sixth":8,"Major Sixth":9,"Minor Seventh":10,"Major Seventh":11,Octave:12}[n]||0}giveUp(){!this.intervalInfo||!this.currentUser||(this.currentIntervalName=this.intervalInfo.interval,this.currentIntervalSemitones=this.intervalInfo.semitones,this.updateIntervalProgressWithoutReset(!1),console.log(`Gave up on ${this.currentIntervalName} interval - counted as failed attempt`),this.selectedNote=null,this.generateNewExercise(),this.drawStaffAndNotes())}validateUserProficiencyLevel(){if(!this.currentUser)return;const n=this.currentUser.intervalTraining,r=n.proficiencyLevel;let s=!1;this.isLevelUnlocked(r)||(console.log("User's proficiency level is no longer valid due to performance drop"),this.isLevelUnlocked(x.MASTERY)&&r!==x.MASTERY?(n.proficiencyLevel=x.MASTERY,s=!0):this.isLevelUnlocked(x.HARD)&&r!==x.HARD?(n.proficiencyLevel=x.HARD,s=!0):this.isLevelUnlocked(x.MEDIUM)&&r!==x.MEDIUM?(n.proficiencyLevel=x.MEDIUM,s=!0):r!==x.EASY&&(n.proficiencyLevel=x.EASY,s=!0),s&&(console.log(`Updated user's proficiency level to ${this.getLevelDisplayName(n.proficiencyLevel)}`),this.userService.updateUser(this.currentUser))),this.validateSelectedLevel()}validateSelectedLevel(){this.currentUser&&(this.isLevelUnlocked(this.selectedLevel)||(console.log("Selected level is now locked due to performance drop"),this.selectedLevel=this.isLevelUnlocked(x.MASTERY)?x.MASTERY:this.isLevelUnlocked(x.HARD)?x.HARD:this.isLevelUnlocked(x.MEDIUM)?x.MEDIUM:x.EASY,this.userSelectedLevel=this.selectedLevel,this.levelAdjustmentMessage=`Your selected level has been adjusted to ${this.getLevelDisplayName(this.selectedLevel)} because your performance in previous levels has dropped below the mastery threshold.`,this.showLevelAdjustmentNotification=!0))}closeLevelAdjustmentNotification(){this.showLevelAdjustmentNotification=!1}showHint(){this.currentHintLevel=1,this.showHintDialog=!0}closeHintDialog(){this.showHintDialog=!1}nextHint(){this.currentHintLevel<3&&this.currentHintLevel++}previousHint(){this.currentHintLevel>1&&this.currentHintLevel--}playSemitoneSteps(){var n=this;return q(function*(){if(n.baseNote&&n.intervalInfo&&n.synth&&!n.isPlayingSemitones){n.isPlayingSemitones=!0;try{let r=n.baseNote.frequency||440;"sharp"===n.baseNote.accidental?r*=Math.pow(2,1/12):"flat"===n.baseNote.accidental&&(r*=Math.pow(2,-1/12));let s=n.intervalInfo.note.frequency||440;"sharp"===n.intervalInfo.note.accidental?s*=Math.pow(2,1/12):"flat"===n.intervalInfo.note.accidental&&(s*=Math.pow(2,-1/12));const i=n.intervalInfo.semitones,o=i>0,a=Math.abs(i);if(console.log(`Playing ${o?"ascending":"descending"} interval with ${a} semitones`),console.log(`Base freq: ${r}, Interval freq: ${s}`),console.log(`Base note: ${n.baseNote.name} ${n.baseNote.accidental||"natural"}`),console.log(`Interval note: ${n.intervalInfo.note.name} ${n.intervalInfo.note.accidental||"natural"}`),n.synth.triggerAttackRelease(r,"8n"),yield new Promise(u=>setTimeout(u,800)),0===a)return;const c=Math.pow(s/r,1/a);let l=r;for(let u=1;u<=a;u++)l=u===a?s:r*Math.pow(c,u),n.synth.triggerAttackRelease(l,"8n"),yield new Promise(d=>setTimeout(d,600))}finally{n.isPlayingSemitones=!1}}})()}getFormattedNoteName(n){if(!n)return"";const r=n.name.charAt(0),s=n.name.slice(-1);let i="";return"sharp"===n.accidental?i="\u266f":"flat"===n.accidental&&(i="\u266d"),`${r}${i}${s}`}adjustIntervalAccidental(n,r){const s=(r-n+12)%12;return 0===s?"natural":1===s||11===s?1===s?"sharp":"flat":2===s||10===s?2===s?"sharp":"flat":"natural"}getIntervalNameFromSemitones(n){return{0:"Unison",1:"Minor Second",2:"Major Second",3:"Minor Third",4:"Major Third",5:"Perfect Fourth",6:"Tritone",7:"Perfect Fifth",8:"Minor Sixth",9:"Major Sixth",10:"Minor Seventh",11:"Major Seventh",12:"Octave"}[n]||"Unknown Interval"}static{this.\u0275fac=function(r){return new(r||t)(k(En),k(lc))}}static{this.\u0275cmp=Us({type:t,selectors:[["app-interval-training"]],viewQuery:function(r,s){if(1&r&&function jT(t,e,n){x0(t,e,n)}(RY,5),2&r){let i;(function L_(t){const e=M(),n=Fe(),r=Pg();Ed(r+1);const s=c_(n,r);if(t.dirty&&function Lk(t){return!(4&~t[re])}(e)===!(2&~s.metadata.flags)){if(null===s.matches)t.reset([]);else{const i=N0(e,r);t.reset(i,_C),t.notifyOnChanges()}return!0}return!1})(i=V_())&&(s.canvasRef=i.first)}},decls:6,vars:5,consts:[["sheetMusicCanvas",""],[1,"interval-training-page"],["class","error-toast",4,"ngIf"],["class","level-adjustment-overlay",4,"ngIf"],["class","level-unlock-overlay",4,"ngIf"],["class","main-content",4,"ngIf"],["class","hint-dialog-overlay",3,"click",4,"ngIf"],[1,"error-toast"],[1,"error-message"],[1,"level-adjustment-overlay"],[1,"level-adjustment-dialog"],[1,"level-adjustment-content"],[1,"level-adjustment-actions"],[1,"level-adjustment-btn",3,"click"],[1,"level-unlock-overlay"],[1,"level-unlock-dialog"],[1,"level-unlock-content"],[1,"level-unlock-actions"],[1,"level-unlock-btn",3,"click"],[1,"main-content"],[1,"left-panel"],[1,"level-selection",3,"ngClass"],[3,"ngModelChange","ngModel"],[3,"value"],[3,"value","disabled"],["class","unlock-info",4,"ngIf"],[1,"instructions-panel"],[1,"button-container"],[1,"back-button",3,"click"],[1,"right-panel"],[1,"sheet-music-container"],[1,"base-note-container"],[1,"base-note-display"],[1,"play-base-btn",3,"click"],[1,"interval-note-container"],[1,"interval-note-display"],[1,"play-interval-btn",3,"click"],[1,"note-info"],["class","note-display",4,"ngIf"],["class","accidental-controls",4,"ngIf"],["class","feedback-dialog-overlay",3,"click",4,"ngIf"],[3,"mousemove","mouseout","click"],[1,"skip-container"],[1,"skip-exercise-btn",3,"click"],[1,"hint-btn",3,"click"],[1,"unlock-info"],[1,"note-display"],[1,"accidental-controls"],[1,"accidental-selector"],[1,"accidental-btn",3,"click"],[1,"action-buttons"],[1,"cancel-btn",3,"click"],[1,"submit-btn",3,"click"],[1,"feedback-dialog-overlay",3,"click"],[1,"feedback-dialog",3,"click"],[1,"feedback-content"],[1,"feedback-actions"],[1,"feedback-btn",3,"click"],[1,"hint-dialog-overlay",3,"click"],[1,"hint-dialog",3,"click"],[1,"hint-header"],[1,"hint-content"],[1,"hint-panes"],[1,"hint-pane"],[1,"play-semitones-btn",3,"click","disabled"],[4,"ngIf"],[1,"hint-navigation"],[1,"hint-nav-btn","prev",3,"click","disabled"],[1,"hint-nav-btn","next",3,"click","disabled"],[1,"hint-actions"]],template:function(r,s){1&r&&(D(0,"div",1),Ot(1,PY,3,0,"div",2)(2,FY,10,1,"div",3)(3,LY,10,1,"div",4)(4,HY,58,17,"main",5)(5,GY,40,16,"div",6),E()),2&r&&(P(),Oe("ngIf",s.showError),P(),Oe("ngIf",s.showLevelAdjustmentNotification),P(),Oe("ngIf",s.showLevelUnlockNotification),P(),Oe("ngIf",s.currentUser),P(),Oe("ngIf",s.showHintDialog))},dependencies:[VM,Ga,II,NI,Cf,ff,cu],styles:[".interval-training-page[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;background-color:#f5f5f5;position:relative}.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:6rem;padding:2rem 0;height:auto;max-width:1400px;margin:0 auto;width:90%}.left-panel[_ngcontent-%COMP%]{width:350px;display:flex;flex-direction:column;gap:1.5rem;min-height:600px;flex-shrink:0}.right-panel[_ngcontent-%COMP%]{width:550px;display:flex;flex-direction:column;gap:1.5rem;min-height:600px;flex-shrink:0;padding-bottom:0}.level-selection[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;transition:all .3s ease}.level-selection.easy[_ngcontent-%COMP%]{border-top:4px solid #3498db;background-image:linear-gradient(135deg,#3498db0d,#3498db26)}.level-selection.medium[_ngcontent-%COMP%]{border-top:4px solid #f39c12;background-image:linear-gradient(135deg,#f39c120d,#f39c1226)}.level-selection.hard[_ngcontent-%COMP%]{border-top:4px solid #e74c3c;background-image:linear-gradient(135deg,#e74c3c0d,#e74c3c26)}.level-selection.mastery[_ngcontent-%COMP%]{border-top:4px solid #9b59b6;background-image:linear-gradient(135deg,#9b59b61a,#3498db26)}.level-selection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;color:#333;text-align:center}.level-selection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;cursor:pointer;background-color:#fff;appearance:none;-webkit-appearance:none;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px}.instructions-panel[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;flex-grow:1}.instructions-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;color:#333;text-align:center}.instructions-panel[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{padding-left:1.5rem;margin-bottom:1rem}.instructions-panel[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.instructions-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-style:italic;text-align:center;margin-top:auto;padding-top:1rem}.button-container[_ngcontent-%COMP%]{width:100%;margin-top:auto}.back-button[_ngcontent-%COMP%], .skip-exercise-btn[_ngcontent-%COMP%], .hint-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .2s;height:45px;width:100%}.back-button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none}.back-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.skip-exercise-btn[_ngcontent-%COMP%]{background-color:#fff;color:#e74c3c;border:2px solid #e74c3c;flex:1}.skip-exercise-btn[_ngcontent-%COMP%]:hover{background-color:#e74c3c;color:#fff}.hint-btn[_ngcontent-%COMP%]{background-color:#fff;color:#3498db;border:2px solid #3498db;flex:1}.hint-btn[_ngcontent-%COMP%]:hover{background-color:#3498db;color:#fff}.sheet-music-container[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;display:flex;flex-direction:column;gap:1rem;width:100%;flex-grow:1}.controls-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.note-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;width:100%}.note-display[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem 1rem;border-radius:4px;box-shadow:0 2px 4px #0000001a;font-size:1.2rem;width:100%;text-align:center;display:flex;justify-content:center;align-items:center;gap:1rem}.accidental-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;width:100%}.accidental-selector[_ngcontent-%COMP%]{display:flex;gap:.5rem}.accidental-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #ddd;border-radius:4px;background-color:#fff;cursor:pointer;transition:all .2s}.accidental-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.accidental-btn.selected[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border-color:#3498db}canvas[_ngcontent-%COMP%]{border:1px solid #ddd;background-color:#fff;cursor:pointer}.base-note-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-bottom:1rem}.base-note-display[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;align-items:center;gap:1rem;background-color:#fff;padding:.5rem 1rem;border-radius:4px;box-shadow:0 2px 4px #0000001a;font-size:1.2rem}.play-base-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #2ecc71;border-radius:4px;background-color:#fff;color:#2ecc71;cursor:pointer;transition:all .2s;font-weight:500}.play-base-btn[_ngcontent-%COMP%]:hover{background-color:#2ecc71;color:#fff}.interval-note-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-bottom:1rem}.interval-note-display[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;gap:1rem;background-color:#fff;padding:.5rem 1rem;border-radius:4px;box-shadow:0 2px 4px #0000001a;font-size:1.2rem}.interval-info[_ngcontent-%COMP%]{color:#666;font-style:italic}.play-interval-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #2ecc71;border-radius:4px;background-color:#fff;color:#2ecc71;cursor:pointer;transition:all .2s;font-weight:500}.play-interval-btn[_ngcontent-%COMP%]:hover{background-color:#2ecc71;color:#fff}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem;margin-bottom:0;justify-content:space-between;align-items:center}.submit-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:all .2s;height:36px;min-width:120px;margin:0;line-height:1;display:flex;align-items:center;justify-content:center}.submit-btn[_ngcontent-%COMP%]{border:1px solid #2ecc71;background-color:#fff;color:#2ecc71}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#2ecc71;color:#fff}.cancel-btn[_ngcontent-%COMP%]{border:1px solid #e74c3c;background-color:#fff;color:#e74c3c}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#e74c3c;color:#fff}.feedback-dialog-overlay[_ngcontent-%COMP%], .hint-dialog-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.feedback-dialog[_ngcontent-%COMP%], .hint-dialog[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:8px;max-width:400px;box-shadow:0 4px 20px #0003;text-align:center;position:relative}.hint-dialog[_ngcontent-%COMP%]{border-top:4px solid #3498db;width:90%;max-width:500px;padding:2rem;justify-content:center}.hint-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;justify-content:center}.hint-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5rem}.hint-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;min-height:150px;padding:3rem 0;width:100%;justify-content:center}.hint-panes[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.hint-pane[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity .3s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:1rem}.hint-pane[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.2rem;line-height:1.5;text-align:center;width:100%;justify-content:center}.hint-pane.active[_ngcontent-%COMP%]{opacity:1;z-index:1}.hint-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:1.5rem;padding:0 2rem}.hint-nav-btn[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:8px;background-color:#f5f5f5;border:1px solid #ddd;cursor:pointer;transition:all .2s;font-size:1.2rem}.hint-nav-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#e0e0e0}.hint-nav-btn[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.feedback-dialog.correct[_ngcontent-%COMP%]{border-top:4px solid #2ecc71}.feedback-dialog.incorrect[_ngcontent-%COMP%]{border-top:4px solid #e74c3c}.feedback-content[_ngcontent-%COMP%]{padding:1.5rem;text-align:center;font-size:1.1rem}.feedback-actions[_ngcontent-%COMP%], .hint-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.feedback-btn[_ngcontent-%COMP%], .hint-dialog[_ngcontent-%COMP%]   .hint-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;cursor:pointer;border:none;font-size:1.1rem;background-color:#3498db;color:#fff;transition:all .2s;min-width:120px}.feedback-dialog.correct[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff;border:none}.feedback-dialog.correct[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]:hover{background-color:#27ae60}.feedback-dialog.incorrect[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none}.feedback-dialog.incorrect[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}.unlock-info[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#f8f9fa;border-radius:4px;font-size:.9rem}.unlock-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.skip-container[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:auto;margin-bottom:0}.level-adjustment-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1001}.level-adjustment-dialog[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0003;width:90%;max-width:400px;overflow:hidden;border-top:4px solid #9b59b6}.level-adjustment-content[_ngcontent-%COMP%]{padding:1.5rem;text-align:center;font-size:1.1rem}.level-adjustment-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;color:#9b59b6;font-size:1.3rem;margin-bottom:1rem}.level-adjustment-actions[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:center;border-top:1px solid #eee}.level-adjustment-btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:4px;font-weight:500;cursor:pointer;transition:all .2s;background-color:#9b59b6;color:#fff;border:none}.level-adjustment-btn[_ngcontent-%COMP%]:hover{background-color:#8e44ad}.level-unlock-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1002}.level-unlock-dialog[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #0003;width:90%;max-width:400px;overflow:hidden;border-top:4px solid #2ecc71}.level-unlock-content[_ngcontent-%COMP%]{padding:1.5rem;text-align:center;font-size:1.1rem}.level-unlock-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;color:#2ecc71;font-size:1.5rem;margin-bottom:1rem;font-weight:700}.level-unlock-actions[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:center;border-top:1px solid #eee}.level-unlock-btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border-radius:4px;font-weight:500;cursor:pointer;transition:all .2s;background-color:#2ecc71;color:#fff;border:none}.level-unlock-btn[_ngcontent-%COMP%]:hover{background-color:#27ae60}.play-semitones-btn[_ngcontent-%COMP%], .hint-pane[_ngcontent-%COMP%]   .play-interval-btn[_ngcontent-%COMP%]{margin-top:.5rem;padding:.75rem 1.5rem;border-radius:8px;background-color:#2ecc71;color:#fff;border:none;cursor:pointer;transition:all .2s;font-size:1rem;align-self:center}.play-semitones-btn[_ngcontent-%COMP%]:hover:not([disabled]), .hint-pane[_ngcontent-%COMP%]   .play-interval-btn[_ngcontent-%COMP%]:hover{background-color:#27ae60}.play-semitones-btn[disabled][_ngcontent-%COMP%]{background-color:#95a5a6;cursor:not-allowed}"]})}}return t})();function YY(t,e){if(1&t&&(D(0,"div",28)(1,"span",29),I(2),E(),D(3,"div",30)(4,"span",31),I(5),E(),D(6,"span",32),I(7),E()()()),2&t){const n=e.$implicit;P(2),Mt(n.name),P(2),Et("good",n.accuracy>=80)("poor",n.accuracy<50),P(),fr(" ",n.accuracy,"% "),P(2),Si("",n.correct,"/",n.attempts,"")}}function ZY(t,e){if(1&t&&(D(0,"div",28)(1,"span",29),I(2),E(),D(3,"div",30)(4,"span",31),I(5),E(),D(6,"span",32),I(7),E()()()),2&t){const n=e.$implicit;P(2),Mt(n.name),P(2),Et("good",n.accuracy>=80)("poor",n.accuracy<50),P(),fr(" ",n.accuracy,"% "),P(2),Si("",n.correct,"/",n.attempts,"")}}function QY(t,e){if(1&t&&(D(0,"div",28)(1,"span",29),I(2),E(),D(3,"div",30)(4,"span",31),I(5),E(),D(6,"span",32),I(7),E()()()),2&t){const n=e.$implicit;P(2),Mt(n.name),P(2),Et("good",n.accuracy>=80)("poor",n.accuracy<50),P(),fr(" ",n.accuracy,"% "),P(2),Si("",n.correct,"/",n.attempts,"")}}const XY=[{path:"",component:Hz},{path:"settings",component:Gz},{path:"training",component:Kz},{path:"progress",component:(()=>{class t{constructor(n,r){this.userService=n,this.router=r,this.currentUser=null}ngOnInit(){this.userSubscription=this.userService.getCurrentUser().subscribe({next:n=>{n?this.currentUser=n:this.router.navigate(["/"])},error:n=>{console.error("Error loading user data:",n),this.router.navigate(["/"])}})}ngOnDestroy(){this.userSubscription?.unsubscribe()}getTotalExercises(){return this.currentUser?.intervalTraining?.totalExercisesCompleted||0}getLastSessionDate(){const n=this.currentUser?.intervalTraining?.lastSessionDate;return n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never"}getOverallAccuracy(){if(!this.currentUser?.intervalTraining?.progress)return 0;const n=this.currentUser.intervalTraining.progress,r=n.reduce((i,o)=>i+o.attempts,0),s=n.reduce((i,o)=>i+o.correctAttempts,0);return 0===r?0:Math.round(s/r*100)}getProficiencyLevelDisplay(){return this.currentUser?.intervalTraining?.proficiencyLevel?this.currentUser.intervalTraining.proficiencyLevel.charAt(0).toUpperCase()+this.currentUser.intervalTraining.proficiencyLevel.slice(1):"No Level"}getAccuracyPercentage(n){if(!this.currentUser?.intervalTraining)return 0;switch(n){case"easy":return Math.round(100*this.currentUser.intervalTraining.easyIntervalAccuracy);case"medium":return Math.round(100*this.currentUser.intervalTraining.mediumIntervalAccuracy);case"hard":return Math.round(100*this.currentUser.intervalTraining.hardIntervalAccuracy);default:return 0}}getAttemptsForCategory(n){if(!this.currentUser?.intervalTraining?.progress)return 0;const s={easy:["Unison","Perfect Fourth","Perfect Fifth","Octave"],medium:["Major Second","Major Third","Major Sixth","Major Seventh"],hard:["Minor Second","Minor Third","Minor Sixth","Minor Seventh","Tritone"]}[n]||[];return this.currentUser.intervalTraining.progress.filter(i=>s.includes(i.interval)).reduce((i,o)=>i+o.attempts,0)}getIntervalDetails(n){if(!this.currentUser?.intervalTraining?.progress)return[];let r=[];return"Perfect"===n?r=["Unison","Perfect Fourth","Perfect Fifth","Octave"]:"Major"===n?r=["Major Second","Major Third","Major Sixth","Major Seventh"]:"Minor"===n&&(r=["Minor Second","Minor Third","Minor Sixth","Minor Seventh","Tritone"]),this.currentUser.intervalTraining.progress.filter(s=>r.includes(s.interval)).map(s=>({name:s.interval,accuracy:0===s.attempts?0:Math.round(s.correctAttempts/s.attempts*100),attempts:s.attempts,correct:s.correctAttempts}))}goBack(){this.router.navigate(["/"])}static{this.\u0275fac=function(r){return new(r||t)(k(lc),k(En))}}static{this.\u0275cmp=Us({type:t,selectors:[["app-progress"]],decls:83,vars:30,consts:[[1,"progress-container"],[1,"progress-content"],[1,"overall-stats"],[1,"stat-card"],[1,"stat-value"],[1,"interval-training-progress"],[1,"proficiency-status"],[1,"current-level"],[1,"level-indicator"],[1,"proficiency-info"],[1,"interval-categories"],[1,"interval-category"],[1,"level-tag","easy-level"],[1,"accuracy-container"],[1,"accuracy-bar"],[1,"accuracy-fill"],["title","80% proficiency threshold",1,"threshold-line"],[1,"accuracy-summary"],[1,"interval-list"],[1,"interval-items"],["class","interval-item",4,"ngFor","ngForOf"],[1,"level-tag","medium-level"],[1,"level-tag","hard-level"],[1,"interval-category","mastery"],[1,"level-tag","mastery-level"],[1,"mastery-text"],[1,"action-buttons"],[1,"back-button",3,"click"],[1,"interval-item"],[1,"interval-name"],[1,"interval-stats"],[1,"interval-accuracy"],[1,"interval-score"]],template:function(r,s){1&r&&(D(0,"div",0)(1,"div",1)(2,"h2"),I(3,"Training Progress"),E(),D(4,"div",2)(5,"div",3)(6,"h3"),I(7,"Total Exercises"),E(),D(8,"p",4),I(9),E()(),D(10,"div",3)(11,"h3"),I(12,"Last Session"),E(),D(13,"p",4),I(14),E()(),D(15,"div",3)(16,"h3"),I(17,"Overall Accuracy"),E(),D(18,"p",4),I(19),E()()(),D(20,"div",5)(21,"h3"),I(22,"Interval Training"),E(),D(23,"div",6)(24,"p",7),I(25," Current Level: "),D(26,"span",8),I(27),E(),D(28,"span",9),I(29,"80% accuracy with at least 10 attempts needed to advance"),E()()(),D(30,"div",10)(31,"div",11)(32,"h4"),I(33,"Perfect Intervals "),D(34,"span",12),I(35,"Easy Level"),E()(),D(36,"div",13)(37,"div",14),Di(38,"div",15)(39,"div",16),E(),D(40,"p",17),I(41),E()(),D(42,"div",18)(43,"div",19),Ot(44,YY,8,8,"div",20),E()()(),D(45,"div",11)(46,"h4"),I(47,"Major Intervals "),D(48,"span",21),I(49,"Medium Level"),E()(),D(50,"div",13)(51,"div",14),Di(52,"div",15)(53,"div",16),E(),D(54,"p",17),I(55),E()(),D(56,"div",18)(57,"div",19),Ot(58,ZY,8,8,"div",20),E()()(),D(59,"div",11)(60,"h4"),I(61,"Minor & Tritone "),D(62,"span",22),I(63,"Hard Level"),E()(),D(64,"div",13)(65,"div",14),Di(66,"div",15)(67,"div",16),E(),D(68,"p",17),I(69),E()(),D(70,"div",18)(71,"div",19),Ot(72,QY,8,8,"div",20),E()()(),D(73,"div",23)(74,"h4"),I(75,"Mastery Level "),D(76,"span",24),I(77,"All Intervals"),E()(),D(78,"p",25),I(79),E()()()(),D(80,"div",26)(81,"button",27),ue("click",function(){return s.goBack()}),I(82,"Back to Main Menu"),E()()()()),2&r&&(P(9),Mt(s.getTotalExercises()),P(5),Mt(s.getLastSessionDate()),P(5),fr("",s.getOverallAccuracy(),"%"),P(7),LS(null==s.currentUser||null==s.currentUser.intervalTraining?null:s.currentUser.intervalTraining.proficiencyLevel),P(),Mt(s.getProficiencyLevelDisplay()),P(4),Et("current-level","easy"===(null==s.currentUser||null==s.currentUser.intervalTraining?null:s.currentUser.intervalTraining.proficiencyLevel)),P(7),Rl("width",s.getAccuracyPercentage("easy"),"%"),P(3),Si("Accuracy: ",s.getAccuracyPercentage("easy"),"% (",s.getAttemptsForCategory("easy")," attempts)"),P(3),Oe("ngForOf",s.getIntervalDetails("Perfect")),P(),Et("current-level","medium"===(null==s.currentUser||null==s.currentUser.intervalTraining?null:s.currentUser.intervalTraining.proficiencyLevel)),P(7),Rl("width",s.getAccuracyPercentage("medium"),"%"),P(3),Si("Accuracy: ",s.getAccuracyPercentage("medium"),"% (",s.getAttemptsForCategory("medium")," attempts)"),P(3),Oe("ngForOf",s.getIntervalDetails("Major")),P(),Et("current-level","hard"===(null==s.currentUser||null==s.currentUser.intervalTraining?null:s.currentUser.intervalTraining.proficiencyLevel)),P(7),Rl("width",s.getAccuracyPercentage("hard"),"%"),P(3),Si("Accuracy: ",s.getAccuracyPercentage("hard"),"% (",s.getAttemptsForCategory("hard")," attempts)"),P(3),Oe("ngForOf",s.getIntervalDetails("Minor")),P(),Et("current-level","mastery"===(null==s.currentUser||null==s.currentUser.intervalTraining?null:s.currentUser.intervalTraining.proficiencyLevel)),P(6),Mt("mastery"===(null==s.currentUser||null==s.currentUser.intervalTraining?null:s.currentUser.intervalTraining.proficiencyLevel)?"You have achieved mastery level! All intervals will now be presented with equal frequency.":"Complete the Hard Level to reach Mastery."))},dependencies:[sf],styles:[".progress-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto}.progress-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;padding:2rem;box-shadow:0 2px 8px #0000001a}h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:2rem;text-align:center}h3[_ngcontent-%COMP%]{color:#34495e;margin-bottom:1rem}h4[_ngcontent-%COMP%]{color:#2c3e50;margin:1rem 0;padding-bottom:.5rem;border-bottom:2px solid #3498db;font-size:1.2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem}.overall-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.stat-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:1.5rem;text-align:center;flex:1;min-width:200px}.stat-value[_ngcontent-%COMP%]{font-size:2rem;color:#3498db;margin:0}.interval-training-progress[_ngcontent-%COMP%]{margin-bottom:2rem}.proficiency-status[_ngcontent-%COMP%]{margin-bottom:1.5rem;background-color:#f8f9fa;padding:1rem;border-radius:8px;text-align:center}.current-level[_ngcontent-%COMP%]{font-size:1.2rem;color:#34495e;margin:0}.level-indicator[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .7rem;border-radius:12px;color:#fff;margin-left:.5rem}.level-indicator.easy[_ngcontent-%COMP%]{background-color:#3498db}.level-indicator.medium[_ngcontent-%COMP%]{background-color:#f39c12}.level-indicator.hard[_ngcontent-%COMP%]{background-color:#e74c3c}.level-indicator.mastery[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#9b59b6,#3498db)}.interval-categories[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}.interval-category[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:1.5rem;box-shadow:0 1px 3px #0000001a;transition:all .3s ease}.interval-category.current-level[_ngcontent-%COMP%]{border:2px solid #3498db;transform:scale(1.02);box-shadow:0 4px 8px #0000001a}.accuracy-container[_ngcontent-%COMP%]{margin-bottom:1rem}.accuracy-bar[_ngcontent-%COMP%]{height:20px;background-color:#f3f3f3;border-radius:10px;overflow:hidden;margin-bottom:.8rem;position:relative}.accuracy-fill[_ngcontent-%COMP%]{height:100%;background-color:#3498db;transition:width .5s ease-out}.threshold-line[_ngcontent-%COMP%]{position:absolute;height:100%;width:2px;background-color:#0000004d;left:80%;top:0}.accuracy-summary[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;margin-bottom:1.2rem}.proficiency-info[_ngcontent-%COMP%]{font-size:.9rem;font-style:italic;color:#666;display:block;margin-top:.5rem}.interval-list[_ngcontent-%COMP%]{margin-top:1.2rem;background-color:#fff;padding:1rem;border-radius:6px;border:1px solid #e0e0e0}.interval-items[_ngcontent-%COMP%]{line-height:1.8;color:#34495e}.interval-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.7rem 0;border-bottom:1px solid #eee}.interval-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.interval-name[_ngcontent-%COMP%]{font-weight:500}.interval-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.interval-accuracy[_ngcontent-%COMP%]{font-weight:600;min-width:45px;text-align:right}.interval-accuracy.good[_ngcontent-%COMP%]{color:#27ae60}.interval-accuracy.poor[_ngcontent-%COMP%]{color:#e74c3c}.interval-score[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem;min-width:40px;text-align:right}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}.back-button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;cursor:pointer;font-size:1rem;transition:background-color .2s}.back-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.level-tag[_ngcontent-%COMP%]{font-weight:700;padding:.3rem .6rem;border-radius:4px;font-size:.9rem;white-space:nowrap}.easy-level[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.medium-level[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.hard-level[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.mastery-level[_ngcontent-%COMP%]{background-color:#9b59b6;color:#fff}.mastery-text[_ngcontent-%COMP%]{font-size:1.1rem;color:#2c3e50;padding:1rem 0}"]})}}return t})()},{path:"interval-training",component:WY},{path:"**",redirectTo:""}];let KY=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bs({type:t})}static{this.\u0275inj=cs({imports:[HA.forRoot(XY),HA]})}}return t})();function JY(t,e){1&t&&(D(0,"span",21),I(1,"Do you really want to delete this profile and related data?"),E())}function eZ(t,e){if(1&t){const n=Yr();D(0,"div",14)(1,"div",15),ue("click",function(s){const i=Le(n).$implicit;return ge(3).selectUser(i),Ve(s.stopPropagation())}),D(2,"div",16)(3,"span",17),I(4),E(),D(5,"span",18),I(6),function uE(t,e){const n=Fe();let r;const s=t+De;n.firstCreatePass?(r=function FU(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks??=[]).push(s,r.onDestroy)):r=n.data[s];const i=r.factory||(r.factory=so(r.type)),a=Wn(k);try{const c=Ad(!1),l=i();return Ad(c),function oU(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,M(),s,l),l}finally{Wn(a)}}(7,"date"),E(),Ot(8,JY,2,0,"span",19),E()(),D(9,"button",20),ue("click",function(s){const i=Le(n).$implicit;return ge(3).deleteUser(i),Ve(s.stopPropagation())}),I(10),E()()}if(2&t){const n=e.$implicit,r=ge(3);Et("active",(null==r.currentUser?null:r.currentUser.id)===n.id)("confirming-delete",(null==r.userToDelete?null:r.userToDelete.id)===n.id),P(4),Mt(n.name),P(),Et("hidden",(null==r.userToDelete?null:r.userToDelete.id)===n.id),P(),fr("Last active: ",dE(7,13,n.lastActive,"shortDate"),""),P(2),Oe("ngIf",(null==r.userToDelete?null:r.userToDelete.id)===n.id),P(),Et("confirm",(null==r.userToDelete?null:r.userToDelete.id)===n.id),zr("title",(null==r.userToDelete?null:r.userToDelete.id)===n.id?"Click again to confirm deletion":"Delete profile"),P(),fr(" ",(null==r.userToDelete?null:r.userToDelete.id)===n.id?"\u2713":"\xd7"," ")}}function tZ(t,e){if(1&t&&(D(0,"div",7)(1,"div",8),I(2,"Select Profile"),E(),D(3,"div",12),Ot(4,eZ,11,16,"div",13),E()()),2&t){const n=ge(2);P(4),Oe("ngForOf",n.users)}}function nZ(t,e){if(1&t){const n=Yr();D(0,"div",5),Ot(1,tZ,5,1,"div",6),D(2,"div",7)(3,"div",8),I(4,"Create New Profile"),E(),D(5,"div",9),ue("click",function(s){return Le(n),Ve(s.stopPropagation())}),D(6,"input",10),Oh("ngModelChange",function(s){Le(n);const i=ge();return U_(i.newUserName,s)||(i.newUserName=s),Ve(s)}),ue("keyup.enter",function(){return Le(n),Ve(ge().createUser())}),E(),D(7,"button",11),ue("click",function(){return Le(n),Ve(ge().createUser())}),I(8," Create "),E()()()()}if(2&t){const n=ge();P(),Oe("ngIf",n.users.length>0),P(5),Nh("ngModel",n.newUserName),P(),Oe("disabled",!n.newUserName.trim())}}let rZ=(()=>{class t{constructor(n){this.userService=n,this.users=[],this.currentUser=null,this.newUserName="",this.isDropdownOpen=!1,this.userToDelete=null,window.addEventListener("click",r=>{(!r.target||!r.target.closest(".profile-indicator"))&&(this.isDropdownOpen=!1,this.resetDeleteState())})}ngOnInit(){this.userService.getUsers().subscribe(n=>{this.users=n}),this.userService.getCurrentUser().subscribe(n=>{this.currentUser=n})}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen,this.isDropdownOpen||this.resetDeleteState()}selectUser(n){this.userService.setCurrentUser(n),this.isDropdownOpen=!1,this.resetDeleteState()}createUser(){if(this.newUserName.trim()){const n=this.userService.createUser(this.newUserName.trim());this.userService.setCurrentUser(n),this.newUserName="",this.isDropdownOpen=!1}}deleteUser(n){this.userToDelete?.id===n.id?(this.userService.deleteUser(n.id),this.resetDeleteState()):(this.resetDeleteState(),this.userToDelete=n,this.deleteTimeout=setTimeout(()=>{this.resetDeleteState()},3e3))}resetDeleteState(){this.userToDelete=null,this.deleteTimeout&&(clearTimeout(this.deleteTimeout),this.deleteTimeout=null)}static{this.\u0275fac=function(r){return new(r||t)(k(lc))}}static{this.\u0275cmp=Us({type:t,selectors:[["app-user-profile"]],decls:7,vars:4,consts:[[1,"profile-indicator",3,"click"],[1,"current-profile"],[1,"profile-name"],[1,"dropdown-arrow"],["class","dropdown-menu",4,"ngIf"],[1,"dropdown-menu"],["class","dropdown-section",4,"ngIf"],[1,"dropdown-section"],[1,"section-title"],[1,"create-profile",3,"click"],["type","text","placeholder","Enter name",3,"ngModelChange","keyup.enter","ngModel"],[1,"create-button",3,"click","disabled"],[1,"profile-list"],["class","profile-item",3,"active","confirming-delete",4,"ngFor","ngForOf"],[1,"profile-item"],[1,"profile-info",3,"click"],[1,"profile-details"],[1,"name"],[1,"last-active"],["class","delete-confirmation",4,"ngIf"],[1,"delete-button",3,"click"],[1,"delete-confirmation"]],template:function(r,s){1&r&&(D(0,"div",0),ue("click",function(){return s.toggleDropdown()}),D(1,"div",1)(2,"span",2),I(3),E(),D(4,"span",3),I(5,"\u25bc"),E()(),Ot(6,nZ,9,3,"div",4),E()),2&r&&(Et("active",s.isDropdownOpen),P(3),Mt((null==s.currentUser?null:s.currentUser.name)||"Select Profile"),P(3),Oe("ngIf",s.isDropdownOpen))},dependencies:[sf,Ga,ru,ff,cu,HM],styles:[".profile-indicator[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:.75rem 1.25rem;background:#fff;border-radius:8px;box-shadow:0 2px 8px #00000014;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .3s ease}.profile-indicator[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translateY(-1px);box-shadow:0 4px 12px #0000001f}.profile-indicator.active[_ngcontent-%COMP%]{background:#f8f9fa;box-shadow:0 4px 12px #0000001f}.current-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.profile-name[_ngcontent-%COMP%]{font-size:.95rem;color:#2c3e50;font-weight:500}.dropdown-arrow[_ngcontent-%COMP%]{font-size:.8rem;color:#95a5a6;transition:transform .3s ease}.profile-indicator.active[_ngcontent-%COMP%]   .dropdown-arrow[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .75rem);left:0;min-width:300px;background:#fff;border-radius:12px;box-shadow:0 4px 20px #00000026;z-index:1000;overflow:hidden;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-section[_ngcontent-%COMP%]{padding:1.25rem;border-bottom:1px solid #ecf0f1}.dropdown-section[_ngcontent-%COMP%]:last-child{border-bottom:none}.section-title[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#7f8c8d;margin-bottom:1rem;text-transform:uppercase;letter-spacing:.5px}.profile-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.profile-item[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:8px;display:flex;justify-content:space-between;align-items:center;font-size:.95rem;transition:all .2s ease}.profile-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.profile-item.active[_ngcontent-%COMP%]{background:#e8f0fe;color:#1a73e8}.profile-item.confirming-delete[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #ffe3e3}.profile-item.confirming-delete[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{color:#e53e3e}.profile-info[_ngcontent-%COMP%]{flex:1;cursor:pointer;margin-right:.75rem;transition:color .2s ease}.profile-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.name[_ngcontent-%COMP%]{font-weight:500}.last-active[_ngcontent-%COMP%]{font-size:.85rem;color:#95a5a6}.last-active.hidden[_ngcontent-%COMP%]{display:none}.delete-confirmation[_ngcontent-%COMP%]{font-size:.85rem;color:#e53e3e;font-weight:500;margin-top:.25rem}.delete-button[_ngcontent-%COMP%]{width:28px;height:28px;padding:0;border:none;background:#f0f0f0;color:#666;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.delete-button[_ngcontent-%COMP%]:hover{background:#f44;color:#fff;transform:scale(1.05)}.delete-button.confirm[_ngcontent-%COMP%]{background:#38a169;color:#fff;box-shadow:0 2px 6px #38a1694d}.create-profile[_ngcontent-%COMP%]{display:flex;gap:.75rem}.create-profile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:8px;font-size:.95rem;transition:all .2s ease}.create-profile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.create-profile[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4299e1;box-shadow:0 0 0 3px #4299e126}.create-button[_ngcontent-%COMP%]{padding:.75rem 1.25rem;background:#4299e1;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:500;transition:all .2s ease;box-shadow:0 2px 4px #4299e14d}.create-button[_ngcontent-%COMP%]:disabled{background:#cbd5e0;box-shadow:none;cursor:not-allowed}.create-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#3182ce;transform:translateY(-1px);box-shadow:0 4px 6px #4299e166}.create-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}"]})}}return t})(),sZ=(()=>{class t{constructor(){this.title="ear_training_tutor"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Us({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"app-container"]],template:function(r,s){1&r&&(D(0,"div",0)(1,"header"),Di(2,"app-user-profile"),E(),D(3,"main"),Di(4,"router-outlet"),E()())},dependencies:[My,rZ],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}header[_ngcontent-%COMP%]{padding:1rem;background-color:#f8f9fa;border-bottom:1px solid #e9ecef;position:relative;z-index:1000}main[_ngcontent-%COMP%]{flex:1;position:relative}"]})}}return t})(),iZ=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Bs({type:t,bootstrap:[sZ]})}static{this.\u0275inj=cs({imports:[_q,u5,zM,KY]})}}return t})();gq().bootstrapModule(iZ).catch(t=>console.error(t))},582:function(Z,St,je){!function(Se,q,Qe,xe){"use strict";var $e=function(z,J,B){return{endTime:J,insertTime:B,type:"exponentialRampToValue",value:z}},vt=function(z,J,B){return{endTime:J,insertTime:B,type:"linearRampToValue",value:z}},lt=function(z,J){return{startTime:J,type:"setValue",value:z}},de=function(z,J,B){return{duration:B,startTime:J,type:"setValueCurve",values:z}},Yi=function(z,J,B){var Ie=B.target;return Ie+(J-Ie)*Math.exp((B.startTime-z)/B.timeConstant)},is=function(z){return"exponentialRampToValue"===z.type},Ac=function(z){return"linearRampToValue"===z.type},os=function(z){return is(z)||Ac(z)},Zi=function(z){return"setValue"===z.type},Pr=function(z){return"setValueCurve"===z.type},Qi=function(z,J,B,me){var Ie=z[J];return void 0===Ie?me:os(Ie)||Zi(Ie)?Ie.value:Pr(Ie)?Ie.values[Ie.values.length-1]:Yi(B,Qi(z,J-1,Ie.startTime,me),Ie)},Nc=function(z,J,B,me,Ie){return void 0===B?[me.insertTime,Ie]:os(B)?[B.endTime,B.value]:Zi(B)?[B.startTime,B.value]:Pr(B)?[B.startTime+B.duration,B.values[B.values.length-1]]:[B.startTime,Qi(z,J-1,B.startTime,Ie)]},Vo=function(z){return"cancelAndHold"===z.type},jo=function(z){return"cancelScheduledValues"===z.type},Fr=function(z){return Vo(z)||jo(z)?z.cancelTime:is(z)||Ac(z)?z.endTime:z.startTime},Oc=function(z,J,B,me){var Y=me.value;return B===Y?Y:0<B&&0<Y||B<0&&Y<0?B*Math.pow(Y/B,(z-J)/(me.endTime-J)):0},Uo=function(z,J,B,me){return B+(z-J)/(me.endTime-J)*(me.value-B)},Xu=function(z,J){var Ie=J.values;return function(z,J){var B=Math.floor(J),me=Math.ceil(J);return B===me?z[B]:(1-(J-B))*z[B]+(1-(me-J))*z[me]}(Ie,(z-J.startTime)/J.duration*(Ie.length-1))},Ls=function(z){return"setTarget"===z.type};Se.AutomationEventList=function(){return xe(function Ke(z){Qe(this,Ke),this._automationEvents=[],this._currenTime=0,this._defaultValue=z},[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(J){var B=Fr(J);if(Vo(J)||jo(J)){var me=this._automationEvents.findIndex(function(as){return jo(J)&&Pr(as)?as.startTime+as.duration>=B:Fr(as)>=B}),Ie=this._automationEvents[me];if(-1!==me&&(this._automationEvents=this._automationEvents.slice(0,me)),Vo(J)){var Y=this._automationEvents[this._automationEvents.length-1];if(void 0!==Ie&&os(Ie)){if(void 0!==Y&&Ls(Y))throw new Error("The internal list is malformed.");var kc=void 0===Y?Ie.insertTime:Pr(Y)?Y.startTime+Y.duration:Fr(Y),Bo=void 0===Y?this._defaultValue:Pr(Y)?Y.values[Y.values.length-1]:Y.value,Rc=is(Ie)?Oc(B,kc,Bo,Ie):Uo(B,kc,Bo,Ie),Pc=is(Ie)?$e(Rc,B,this._currenTime):vt(Rc,B,this._currenTime);this._automationEvents.push(Pc)}if(void 0!==Y&&Ls(Y)&&this._automationEvents.push(lt(this.getValue(B),B)),void 0!==Y&&Pr(Y)&&Y.startTime+Y.duration>B){var $o=B-Y.startTime,Ki=(Y.values.length-1)/Y.duration,Ji=Math.max(2,1+Math.ceil($o*Ki)),Fc=$o/(Ji-1)*Ki,eo=Y.values.slice(0,Ji);if(Fc<1)for(var ui=1;ui<Ji;ui+=1){var Vp=Fc*ui%1;eo[ui]=Y.values[ui-1]*(1-Vp)+Y.values[ui]*Vp}this._automationEvents[this._automationEvents.length-1]=de(eo,Y.startTime,$o)}}}else{var ze=this._automationEvents.findIndex(function(as){return Fr(as)>B}),di=-1===ze?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[ze-1];if(void 0!==di&&Pr(di)&&Fr(di)+di.duration>B)return!1;var Ho=is(J)?$e(J.value,J.endTime,this._currenTime):Ac(J)?vt(J.value,B,this._currenTime):J;if(-1===ze)this._automationEvents.push(Ho);else{if(Pr(J)&&B+J.duration>Fr(this._automationEvents[ze]))return!1;this._automationEvents.splice(ze,0,Ho)}}return!0}},{key:"flush",value:function(J){var B=this._automationEvents.findIndex(function(Y){return Fr(Y)>J});if(B>1){var me=this._automationEvents.slice(B-1),Ie=me[0];Ls(Ie)&&me.unshift(lt(Qi(this._automationEvents,B-2,Ie.startTime,this._defaultValue),Ie.startTime)),this._automationEvents=me}}},{key:"getValue",value:function(J){if(0===this._automationEvents.length)return this._defaultValue;var B=this._automationEvents.findIndex(function(eo){return Fr(eo)>J}),me=this._automationEvents[B],Ie=(-1===B?this._automationEvents.length:B)-1,Y=this._automationEvents[Ie];if(void 0!==Y&&Ls(Y)&&(void 0===me||!os(me)||me.insertTime>J))return Yi(J,Qi(this._automationEvents,Ie-1,Y.startTime,this._defaultValue),Y);if(void 0!==Y&&Zi(Y)&&(void 0===me||!os(me)))return Y.value;if(void 0!==Y&&Pr(Y)&&(void 0===me||!os(me)||Y.startTime+Y.duration>J))return J<Y.startTime+Y.duration?Xu(J,Y):Y.values[Y.values.length-1];if(void 0!==Y&&os(Y)&&(void 0===me||!os(me)))return Y.value;if(void 0!==me&&is(me)){var kc=Nc(this._automationEvents,Ie,Y,me,this._defaultValue),Bo=q(kc,2);return Oc(J,Bo[0],Bo[1],me)}if(void 0!==me&&Ac(me)){var $o=Nc(this._automationEvents,Ie,Y,me,this._defaultValue),Ki=q($o,2);return Uo(J,Ki[0],Ki[1],me)}return this._defaultValue}}])}(),Se.createCancelAndHoldAutomationEvent=function(z){return{cancelTime:z,type:"cancelAndHold"}},Se.createCancelScheduledValuesAutomationEvent=function(z){return{cancelTime:z,type:"cancelScheduledValues"}},Se.createExponentialRampToValueAutomationEvent=function(z,J){return{endTime:J,type:"exponentialRampToValue",value:z}},Se.createLinearRampToValueAutomationEvent=function(z,J){return{endTime:J,type:"linearRampToValue",value:z}},Se.createSetTargetAutomationEvent=function(z,J,B){return{startTime:J,target:z,timeConstant:B,type:"setTarget"}},Se.createSetValueAutomationEvent=lt,Se.createSetValueCurveAutomationEvent=de}(St,je(416),je(834),je(660))},530:Z=>{Z.exports=function St(je,Se){(null==Se||Se>je.length)&&(Se=je.length);for(var q=0,Qe=Array(Se);q<Se;q++)Qe[q]=je[q];return Qe},Z.exports.__esModule=!0,Z.exports.default=Z.exports},178:Z=>{Z.exports=function St(je){if(Array.isArray(je))return je},Z.exports.__esModule=!0,Z.exports.default=Z.exports},834:Z=>{Z.exports=function St(je,Se){if(!(je instanceof Se))throw new TypeError("Cannot call a class as a function")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},660:(Z,St,je)=>{var Se=je(107);function q(xe,$e){for(var vt=0;vt<$e.length;vt++){var lt=$e[vt];lt.enumerable=lt.enumerable||!1,lt.configurable=!0,"value"in lt&&(lt.writable=!0),Object.defineProperty(xe,Se(lt.key),lt)}}Z.exports=function Qe(xe,$e,vt){return $e&&q(xe.prototype,$e),vt&&q(xe,vt),Object.defineProperty(xe,"prototype",{writable:!1}),xe},Z.exports.__esModule=!0,Z.exports.default=Z.exports},493:Z=>{Z.exports=function St(je,Se){var q=null==je?null:typeof Symbol<"u"&&je[Symbol.iterator]||je["@@iterator"];if(null!=q){var Qe,xe,$e,vt,lt=[],de=!0,Yi=!1;try{if($e=(q=q.call(je)).next,0===Se){if(Object(q)!==q)return;de=!1}else for(;!(de=(Qe=$e.call(q)).done)&&(lt.push(Qe.value),lt.length!==Se);de=!0);}catch(is){Yi=!0,xe=is}finally{try{if(!de&&null!=q.return&&(vt=q.return(),Object(vt)!==vt))return}finally{if(Yi)throw xe}}return lt}},Z.exports.__esModule=!0,Z.exports.default=Z.exports},771:Z=>{Z.exports=function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},Z.exports.__esModule=!0,Z.exports.default=Z.exports},416:(Z,St,je)=>{var Se=je(178),q=je(493),Qe=je(179),xe=je(771);Z.exports=function $e(vt,lt){return Se(vt)||q(vt,lt)||Qe(vt,lt)||xe()},Z.exports.__esModule=!0,Z.exports.default=Z.exports},678:(Z,St,je)=>{var Se=je(575).default;Z.exports=function q(Qe,xe){if("object"!=Se(Qe)||!Qe)return Qe;var $e=Qe[Symbol.toPrimitive];if(void 0!==$e){var vt=$e.call(Qe,xe||"default");if("object"!=Se(vt))return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===xe?String:Number)(Qe)},Z.exports.__esModule=!0,Z.exports.default=Z.exports},107:(Z,St,je)=>{var Se=je(575).default,q=je(678);Z.exports=function Qe(xe){var $e=q(xe,"string");return"symbol"==Se($e)?$e:$e+""},Z.exports.__esModule=!0,Z.exports.default=Z.exports},575:Z=>{function St(je){return Z.exports=St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Se){return typeof Se}:function(Se){return Se&&"function"==typeof Symbol&&Se.constructor===Symbol&&Se!==Symbol.prototype?"symbol":typeof Se},Z.exports.__esModule=!0,Z.exports.default=Z.exports,St(je)}Z.exports=St,Z.exports.__esModule=!0,Z.exports.default=Z.exports},179:(Z,St,je)=>{var Se=je(530);Z.exports=function q(Qe,xe){if(Qe){if("string"==typeof Qe)return Se(Qe,xe);var $e={}.toString.call(Qe).slice(8,-1);return"Object"===$e&&Qe.constructor&&($e=Qe.constructor.name),"Map"===$e||"Set"===$e?Array.from(Qe):"Arguments"===$e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($e)?Se(Qe,xe):void 0}},Z.exports.__esModule=!0,Z.exports.default=Z.exports}},Z=>{Z(Z.s=161)}]);